2025-07-25 09:46:57.707 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 09:46:58.980 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 09:47:00.591 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 09:47:01.607 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 09:47:01.905 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 09:47:01.909 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 09:47:01.910 +05:30 [INF] Hosting environment: Development
2025-07-25 09:47:01.910 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 09:51:38.133 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 09:51:38.183 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-25 09:51:38.186 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:51:38.261 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 09:51:38.266 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 09:51:38.282 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 151.3567ms
2025-07-25 09:55:05.428 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 09:55:05.432 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:05.434 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 6.1499ms
2025-07-25 09:55:05.437 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 09:55:05.438 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:05.449 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 09:55:05.476 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 09:55:05.732 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 09:55:07.133 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 09:55:07.133 +05:30 [INF] Role: Admin
2025-07-25 09:55:07.134 +05:30 [INF] Role: Admin
2025-07-25 09:55:07.134 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 09:55:07.265 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 09:55:07.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 09:55:07.409 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1927.7966ms
2025-07-25 09:55:07.410 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 09:55:07.416 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1971.6644 ms
2025-07-25 09:55:07.423 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1986.9015ms
2025-07-25 09:55:07.423 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 09:55:07.425 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:07.425 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.8506ms
2025-07-25 09:55:07.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 09:55:07.435 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:07.471 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:55:07.488 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 09:55:07.511 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 09:55:07.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 09:55:07.706 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 09:55:07.707 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 09:55:07.720 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 09:55:07.722 +05:30 [INF] Found 1 users among search
2025-07-25 09:55:07.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:55:07.740 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 251.8135ms
2025-07-25 09:55:07.740 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:55:07.741 +05:30 [INF] HTTP GET /api/user/search responded 200 in 269.9453 ms
2025-07-25 09:55:07.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 313.9673ms
2025-07-25 09:55:07.745 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 09:55:07.745 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:07.745 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.692ms
2025-07-25 09:55:07.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 09:55:07.748 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:07.750 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:55:07.750 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 09:55:07.760 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 09:55:07.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 09:55:07.776 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 09:55:07.777 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 09:55:07.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 09:55:07.791 +05:30 [INF] Found 1 users among search
2025-07-25 09:55:07.792 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:55:07.792 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 41.7714ms
2025-07-25 09:55:07.793 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:55:07.793 +05:30 [INF] HTTP GET /api/user/search responded 200 in 43.7575 ms
2025-07-25 09:55:07.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 46.0584ms
2025-07-25 09:55:09.617 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 09:55:09.618 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:09.619 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.5335ms
2025-07-25 09:55:09.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 09:55:09.626 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:55:09.631 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 09:55:09.634 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 09:55:09.672 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 09:55:09.677 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:55:09.683 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 48.8413ms
2025-07-25 09:55:09.684 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 09:55:09.684 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 53.5728 ms
2025-07-25 09:55:09.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 60.0952ms
2025-07-25 09:59:23.984 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 09:59:23.985 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:23.988 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 09:59:23.989 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 09:59:23.991 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 6.6397ms
2025-07-25 09:59:24.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 09:59:24.951 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:24.951 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6455ms
2025-07-25 09:59:24.952 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 09:59:24.953 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:24.953 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 09:59:24.954 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 09:59:24.973 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 09:59:25.534 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 09:59:25.534 +05:30 [INF] Role: Admin
2025-07-25 09:59:25.534 +05:30 [INF] Role: Admin
2025-07-25 09:59:25.534 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 09:59:25.542 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 09:59:25.543 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 09:59:25.543 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 589.5118ms
2025-07-25 09:59:25.544 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 09:59:25.544 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 590.6580 ms
2025-07-25 09:59:25.544 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 591.84ms
2025-07-25 09:59:25.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 09:59:25.550 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:25.552 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 2.4187ms
2025-07-25 09:59:25.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 09:59:25.555 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:25.556 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:59:25.557 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 09:59:25.560 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 09:59:25.570 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 09:59:25.576 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 09:59:25.580 +05:30 [INF] Found 1 users among search
2025-07-25 09:59:25.582 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:59:25.584 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 26.5245ms
2025-07-25 09:59:25.584 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:59:25.585 +05:30 [INF] HTTP GET /api/user/search responded 200 in 28.2449 ms
2025-07-25 09:59:25.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 30.1847ms
2025-07-25 09:59:25.589 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 09:59:25.590 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:25.591 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.2457ms
2025-07-25 09:59:25.593 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 09:59:25.593 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:25.594 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:59:25.594 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 09:59:25.596 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 09:59:25.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 09:59:25.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 09:59:25.605 +05:30 [INF] Found 1 users among search
2025-07-25 09:59:25.605 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:59:25.606 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.8118ms
2025-07-25 09:59:25.606 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 09:59:25.606 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.2710 ms
2025-07-25 09:59:25.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 13.9331ms
2025-07-25 09:59:27.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 09:59:27.960 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:27.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.4695ms
2025-07-25 09:59:27.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 09:59:27.964 +05:30 [INF] CORS policy execution successful.
2025-07-25 09:59:27.966 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 09:59:27.966 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 09:59:27.975 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 09:59:27.976 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 09:59:27.978 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 11.0585ms
2025-07-25 09:59:27.978 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 09:59:27.978 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 12.8166 ms
2025-07-25 09:59:27.979 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 15.2956ms
2025-07-25 10:02:09.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:09.859 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:09.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.8724ms
2025-07-25 10:02:09.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:09.893 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:09.895 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 10:02:09.895 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 10:02:09.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 4.7977ms
2025-07-25 10:02:11.010 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 10:02:11.011 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:11.012 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 10:02:11.012 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 10:02:11.013 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.8804ms
2025-07-25 10:02:11.741 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 10:02:11.742 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:11.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 2.259ms
2025-07-25 10:02:11.746 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 10:02:11.746 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:11.747 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:02:11.747 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 10:02:11.763 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 10:02:12.783 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 10:02:12.784 +05:30 [INF] Role: Admin
2025-07-25 10:02:12.784 +05:30 [INF] Role: Admin
2025-07-25 10:02:12.785 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 10:02:12.796 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 10:02:12.797 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 10:02:12.799 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1051.0119ms
2025-07-25 10:02:12.799 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:02:12.800 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1053.4276 ms
2025-07-25 10:02:12.800 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1054.6672ms
2025-07-25 10:02:12.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:02:12.805 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:12.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.0951ms
2025-07-25 10:02:12.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:02:12.808 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:12.809 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:12.810 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:02:12.811 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:02:12.814 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 10:02:12.816 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 10:02:12.817 +05:30 [INF] Found 1 users among search
2025-07-25 10:02:12.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:12.818 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.8359ms
2025-07-25 10:02:12.819 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:12.819 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.8945 ms
2025-07-25 10:02:12.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 11.8938ms
2025-07-25 10:02:12.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:02:12.839 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:12.840 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0027ms
2025-07-25 10:02:12.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:02:12.843 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:12.844 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:12.845 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:02:12.846 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:02:12.848 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 10:02:12.850 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 10:02:12.851 +05:30 [INF] Found 1 users among search
2025-07-25 10:02:12.851 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:12.852 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6187ms
2025-07-25 10:02:12.852 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:12.852 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.2814 ms
2025-07-25 10:02:12.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 10.1568ms
2025-07-25 10:02:15.000 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:15.000 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:15.001 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.0236ms
2025-07-25 10:02:15.003 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:15.003 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:15.005 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:02:15.005 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 10:02:15.014 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 10:02:15.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:15.016 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 9.8599ms
2025-07-25 10:02:15.016 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:02:15.016 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 12.0507 ms
2025-07-25 10:02:15.017 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 14.3999ms
2025-07-25 10:02:31.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 10:02:31.837 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:31.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1576ms
2025-07-25 10:02:31.840 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 10:02:31.841 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:31.841 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:02:31.842 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 10:02:31.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 10:02:33.021 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 10:02:33.021 +05:30 [INF] Role: Admin
2025-07-25 10:02:33.022 +05:30 [INF] Role: Admin
2025-07-25 10:02:33.022 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 10:02:33.027 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 10:02:33.027 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 10:02:33.028 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1185.8025ms
2025-07-25 10:02:33.028 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:02:33.028 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1187.3217 ms
2025-07-25 10:02:33.029 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1188.7918ms
2025-07-25 10:02:33.033 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:02:33.033 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:33.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5102ms
2025-07-25 10:02:33.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:02:33.036 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:33.037 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:33.037 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:02:33.038 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:02:33.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 10:02:33.044 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 10:02:33.046 +05:30 [INF] Found 1 users among search
2025-07-25 10:02:33.046 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:33.047 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.3072ms
2025-07-25 10:02:33.047 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:33.047 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.5413 ms
2025-07-25 10:02:33.047 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 11.7309ms
2025-07-25 10:02:33.096 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:02:33.096 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:33.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.7595ms
2025-07-25 10:02:33.099 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:02:33.099 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:33.100 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:33.100 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:02:33.101 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:02:33.103 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 10:02:33.105 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 10:02:33.106 +05:30 [INF] Found 1 users among search
2025-07-25 10:02:33.106 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:33.107 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6834ms
2025-07-25 10:02:33.107 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:02:33.107 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.6959 ms
2025-07-25 10:02:33.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.8662ms
2025-07-25 10:02:35.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:35.241 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:35.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.8687ms
2025-07-25 10:02:35.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 10:02:35.245 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:35.245 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:02:35.246 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 10:02:35.250 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 10:02:35.251 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:35.251 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.1881ms
2025-07-25 10:02:35.252 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:02:35.252 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.7263 ms
2025-07-25 10:02:35.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 8.0737ms
2025-07-25 10:02:41.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Dermatology - null null
2025-07-25 10:02:41.530 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:41.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Dermatology - 204 null null 0.6327ms
2025-07-25 10:02:41.537 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Dermatology - null null
2025-07-25 10:02:41.539 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:02:41.540 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 10:02:41.549 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 10:02:41.566 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 10:02:41.568 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 10:02:41.569 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 10:02:41.582 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 10:02:41.582 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:02:41.591 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 40.4821ms
2025-07-25 10:02:41.591 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 10:02:41.592 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 51.5277 ms
2025-07-25 10:02:41.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Dermatology - 200 395 application/json; charset=utf-8 55.0722ms
2025-07-25 10:33:38.367 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 10:33:38.368 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:33:38.370 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 10:33:38.370 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 10:33:38.370 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.942ms
2025-07-25 10:57:08.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 10:57:08.209 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:08.210 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.2562ms
2025-07-25 10:57:08.213 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 10:57:08.213 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:08.214 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:57:08.214 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 10:57:08.243 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 10:57:08.986 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 10:57:08.986 +05:30 [INF] Role: Admin
2025-07-25 10:57:08.986 +05:30 [INF] Role: Admin
2025-07-25 10:57:08.987 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 10:57:08.994 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 10:57:08.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 10:57:08.996 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 782.1124ms
2025-07-25 10:57:08.997 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 10:57:08.997 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 783.7183 ms
2025-07-25 10:57:08.997 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 784.8992ms
2025-07-25 10:57:09.000 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:57:09.001 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:09.001 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6751ms
2025-07-25 10:57:09.003 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 10:57:09.003 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:09.004 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:57:09.004 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:57:09.005 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:57:09.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 10:57:09.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 10:57:09.011 +05:30 [INF] Found 1 users among search
2025-07-25 10:57:09.012 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:57:09.012 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.0215ms
2025-07-25 10:57:09.013 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:57:09.013 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.3460 ms
2025-07-25 10:57:09.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.6321ms
2025-07-25 10:57:09.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:57:09.030 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:09.030 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.2685ms
2025-07-25 10:57:09.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 10:57:09.033 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:09.034 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:57:09.035 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 10:57:09.036 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 10:57:09.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 10:57:09.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 10:57:09.042 +05:30 [INF] Found 1 users among search
2025-07-25 10:57:09.043 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:57:09.043 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.0783ms
2025-07-25 10:57:09.043 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 10:57:09.043 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.3022 ms
2025-07-25 10:57:09.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.6391ms
2025-07-25 10:57:21.991 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 10:57:21.991 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:21.992 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.975ms
2025-07-25 10:57:21.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 10:57:21.994 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:21.996 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:57:21.997 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 10:57:22.009 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 10:57:22.010 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:57:22.011 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 12.9379ms
2025-07-25 10:57:22.011 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 10:57:22.012 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 15.8569 ms
2025-07-25 10:57:22.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 18.3553ms
2025-07-25 10:57:32.380 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 10:57:32.381 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:32.381 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.8932ms
2025-07-25 10:57:32.383 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 10:57:32.383 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:32.384 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 10:57:32.385 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 10:57:32.389 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 10:57:32.398 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 10:57:32.399 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:57:32.399 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 14.4259ms
2025-07-25 10:57:32.399 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 10:57:32.400 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 15.5220 ms
2025-07-25 10:57:32.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 17.264ms
2025-07-25 10:57:56.757 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 10:57:56.757 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:56.758 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 1.7094ms
2025-07-25 10:57:56.760 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 147
2025-07-25 10:57:56.760 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:57:56.762 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 10:57:56.770 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 10:57:56.802 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-25 10:57:56.839 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 67.9017ms
2025-07-25 10:57:56.839 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 10:57:56.839 +05:30 [INF] HTTP POST /api/appointment responded 400 in 77.7386 ms
2025-07-25 10:57:56.840 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 400 345 application/problem+json; charset=utf-8 79.9328ms
2025-07-25 10:58:28.592 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 10:58:28.592 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:58:28.593 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 10:58:28.599 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 10:58:28.623 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 10:58:28.624 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 10:58:28.628 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 28.192ms
2025-07-25 10:58:28.628 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 10:58:28.629 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 36.0599 ms
2025-07-25 10:58:28.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 36.994ms
2025-07-25 10:58:49.789 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 10:58:49.789 +05:30 [INF] CORS policy execution successful.
2025-07-25 10:58:49.790 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 10:58:49.790 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 10:58:49.791 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0451ms
2025-07-25 11:09:28.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:09:28.926 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:28.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.3307ms
2025-07-25 11:09:28.929 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:09:28.929 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:28.930 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:09:28.931 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:09:28.949 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:09:29.991 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:09:29.991 +05:30 [INF] Role: Admin
2025-07-25 11:09:29.991 +05:30 [INF] Role: Admin
2025-07-25 11:09:29.991 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:09:30.000 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:09:30.002 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:09:30.002 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1071.2956ms
2025-07-25 11:09:30.003 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:09:30.003 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1073.3555 ms
2025-07-25 11:09:30.004 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1075.6355ms
2025-07-25 11:09:30.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:09:30.007 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:30.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7298ms
2025-07-25 11:09:30.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:09:30.010 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:30.011 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:09:30.011 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:09:30.013 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:09:30.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:09:30.017 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:09:30.018 +05:30 [INF] Found 1 users among search
2025-07-25 11:09:30.018 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:09:30.019 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.2292ms
2025-07-25 11:09:30.019 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:09:30.019 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.6768 ms
2025-07-25 11:09:30.020 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.113ms
2025-07-25 11:09:30.038 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:09:30.039 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:30.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8795ms
2025-07-25 11:09:30.042 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:09:30.043 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:30.043 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:09:30.044 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:09:30.045 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:09:30.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:09:30.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:09:30.051 +05:30 [INF] Found 1 users among search
2025-07-25 11:09:30.052 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:09:30.052 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.3636ms
2025-07-25 11:09:30.053 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:09:30.053 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.5621 ms
2025-07-25 11:09:30.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.0502ms
2025-07-25 11:09:39.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:09:39.785 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:39.786 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:09:39.786 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:09:39.797 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:09:39.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:09:39.799 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 12.2359ms
2025-07-25 11:09:39.799 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:09:39.799 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 13.7772 ms
2025-07-25 11:09:39.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 15.2794ms
2025-07-25 11:09:43.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 11:09:43.832 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:43.833 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5172ms
2025-07-25 11:09:43.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 11:09:43.834 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:43.835 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:09:43.835 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:09:43.838 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:09:43.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:09:43.839 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.797ms
2025-07-25 11:09:43.840 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:09:43.840 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 5.2543 ms
2025-07-25 11:09:43.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 6.1546ms
2025-07-25 11:09:51.643 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 11:09:51.644 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:51.644 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.5569ms
2025-07-25 11:09:51.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 11:09:51.647 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:09:51.648 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 11:09:51.648 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:09:51.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 11:09:51.660 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:09:51.661 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:09:51.662 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 13.0816ms
2025-07-25 11:09:51.662 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 11:09:51.663 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 15.0059 ms
2025-07-25 11:09:51.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 16.8362ms
2025-07-25 11:10:10.308 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:10:10.308 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:10.309 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:10:10.309 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:10:10.309 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5904ms
2025-07-25 11:10:24.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:10:24.529 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:24.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1728ms
2025-07-25 11:10:24.532 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 52
2025-07-25 11:10:24.532 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:24.533 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:24.533 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:10:24.542 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:10:25.573 +05:30 [WRN] Failed login attempt for email: ruby@raishin.com, rubyRaishi
2025-07-25 11:10:25.574 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-07-25 11:10:25.576 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1042.1947ms
2025-07-25 11:10:25.576 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:25.577 +05:30 [INF] HTTP POST /api/auth/login responded 401 in 1043.9570 ms
2025-07-25 11:10:25.577 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 401 null text/plain; charset=utf-8 1045.8593ms
2025-07-25 11:10:36.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:10:36.153 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:36.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5624ms
2025-07-25 11:10:36.155 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:10:36.155 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:36.156 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:36.156 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:10:36.160 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:10:37.026 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:10:37.027 +05:30 [INF] Role: Admin
2025-07-25 11:10:37.028 +05:30 [INF] Role: Admin
2025-07-25 11:10:37.028 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:10:37.038 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:10:37.039 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:10:37.040 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 883.2893ms
2025-07-25 11:10:37.040 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:37.041 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 884.9847 ms
2025-07-25 11:10:37.041 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 885.9463ms
2025-07-25 11:10:37.045 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:10:37.045 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:37.045 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6412ms
2025-07-25 11:10:37.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:10:37.047 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:37.048 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:37.048 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:10:37.049 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:10:37.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:10:37.068 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:10:37.069 +05:30 [INF] Found 1 users among search
2025-07-25 11:10:37.070 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:10:37.072 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 23.2631ms
2025-07-25 11:10:37.072 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:37.072 +05:30 [INF] HTTP GET /api/user/search responded 200 in 24.4888 ms
2025-07-25 11:10:37.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 25.6597ms
2025-07-25 11:10:37.080 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:10:37.081 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:37.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.6512ms
2025-07-25 11:10:37.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:10:37.083 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:37.084 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:37.084 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:10:37.085 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:10:37.087 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:10:37.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:10:37.089 +05:30 [INF] Found 1 users among search
2025-07-25 11:10:37.090 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:10:37.090 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8051ms
2025-07-25 11:10:37.091 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:37.091 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.2914 ms
2025-07-25 11:10:37.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.5999ms
2025-07-25 11:10:42.624 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:10:42.624 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:42.625 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:10:42.626 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:10:42.626 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.3261ms
2025-07-25 11:10:46.722 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:10:46.723 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:46.723 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1309ms
2025-07-25 11:10:46.725 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:10:46.726 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:46.726 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:46.726 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:10:46.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:10:47.633 +05:30 [INF] User logged in: test@patient.com
2025-07-25 11:10:47.633 +05:30 [INF] Role: Patient
2025-07-25 11:10:47.633 +05:30 [INF] Role: Patient
2025-07-25 11:10:47.634 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 11:10:47.640 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:10:47.642 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:10:47.642 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 915.4908ms
2025-07-25 11:10:47.643 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:10:47.643 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 916.9168 ms
2025-07-25 11:10:47.643 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 917.9735ms
2025-07-25 11:10:47.646 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:10:47.646 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:47.647 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.8389ms
2025-07-25 11:10:47.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:10:47.649 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:47.649 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:47.650 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:10:47.651 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:10:47.654 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:10:47.659 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:10:47.659 +05:30 [INF] Found 1 users among search
2025-07-25 11:10:47.660 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:10:47.660 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.5744ms
2025-07-25 11:10:47.660 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:47.661 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.2146 ms
2025-07-25 11:10:47.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 519 application/json; charset=utf-8 12.3342ms
2025-07-25 11:10:47.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:10:47.675 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:47.675 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5896ms
2025-07-25 11:10:47.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:10:47.679 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:10:47.680 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:47.687 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:10:47.692 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 11:10:47.709 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 11:10:47.711 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 11:10:47.712 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 11:10:47.731 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:10:47.732 +05:30 [INF] Found 0 patients matching search
2025-07-25 11:10:47.733 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:10:47.735 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 48.0104ms
2025-07-25 11:10:47.736 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:10:47.736 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 56.2206 ms
2025-07-25 11:10:47.736 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 57.3247ms
2025-07-25 11:12:30.230 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 11:12:30.231 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:12:30.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5749ms
2025-07-25 11:12:30.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 11:12:30.233 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:12:30.234 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:12:30.234 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:12:30.244 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:12:30.244 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:12:30.245 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 10.2277ms
2025-07-25 11:12:30.245 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:12:30.245 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 11.1721 ms
2025-07-25 11:12:30.245 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 12.7357ms
2025-07-25 11:43:51.337 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:43:51.338 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:51.339 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:43:51.339 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:43:51.340 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2083ms
2025-07-25 11:43:52.754 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:43:52.754 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:52.755 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4392ms
2025-07-25 11:43:52.757 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:43:52.757 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:52.757 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:43:52.758 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:43:52.787 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:43:53.512 +05:30 [INF] User logged in: test@patient.com
2025-07-25 11:43:53.512 +05:30 [INF] Role: Patient
2025-07-25 11:43:53.513 +05:30 [INF] Role: Patient
2025-07-25 11:43:53.513 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 11:43:53.520 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:43:53.521 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:43:53.522 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 764.2424ms
2025-07-25 11:43:53.523 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:43:53.523 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 765.6682 ms
2025-07-25 11:43:53.523 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 766.3054ms
2025-07-25 11:43:53.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:43:53.528 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:53.528 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.7951ms
2025-07-25 11:43:53.530 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:43:53.530 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:53.531 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:43:53.531 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:43:53.532 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:43:53.535 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:43:53.537 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:43:53.538 +05:30 [INF] Found 1 users among search
2025-07-25 11:43:53.538 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:43:53.539 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.6057ms
2025-07-25 11:43:53.540 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:43:53.542 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.9809 ms
2025-07-25 11:43:53.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 12.8078ms
2025-07-25 11:43:53.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:43:53.552 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:53.552 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.9259ms
2025-07-25 11:43:53.554 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:43:53.555 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:43:53.555 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:43:53.555 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:43:53.557 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 11:43:53.567 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 11:43:53.573 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:43:53.573 +05:30 [INF] Found 0 patients matching search
2025-07-25 11:43:53.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:43:53.573 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.913ms
2025-07-25 11:43:53.573 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:43:53.574 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 18.6708 ms
2025-07-25 11:43:53.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 19.5624ms
2025-07-25 11:44:26.399 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:44:26.399 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:26.400 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:44:26.401 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:44:26.401 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2076ms
2025-07-25 11:44:27.259 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:44:27.259 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:27.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4843ms
2025-07-25 11:44:27.261 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:44:27.262 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:27.263 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:44:27.263 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:44:27.283 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:44:27.958 +05:30 [INF] User logged in: test@patient.com
2025-07-25 11:44:27.959 +05:30 [INF] Role: Patient
2025-07-25 11:44:27.959 +05:30 [INF] Role: Patient
2025-07-25 11:44:27.959 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 11:44:27.964 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:44:27.964 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:44:27.965 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 701.614ms
2025-07-25 11:44:27.965 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:44:27.965 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 702.8855 ms
2025-07-25 11:44:27.966 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 704.4005ms
2025-07-25 11:44:27.969 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:44:27.969 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:27.970 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 1.2405ms
2025-07-25 11:44:27.972 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:44:27.973 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:27.975 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:44:27.977 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:44:27.979 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:44:27.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:44:27.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:44:27.992 +05:30 [INF] Found 1 users among search
2025-07-25 11:44:27.993 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:44:27.993 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 15.9007ms
2025-07-25 11:44:27.995 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:44:27.996 +05:30 [INF] HTTP GET /api/user/search responded 200 in 20.7167 ms
2025-07-25 11:44:27.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 519 application/json; charset=utf-8 23.5979ms
2025-07-25 11:44:28.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:44:28.002 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:28.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.9116ms
2025-07-25 11:44:28.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:44:28.005 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:28.005 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:44:28.006 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:44:28.006 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 11:44:28.016 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 11:44:28.022 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:44:28.023 +05:30 [INF] Found 0 patients matching search
2025-07-25 11:44:28.023 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:44:28.023 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.4651ms
2025-07-25 11:44:28.024 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:44:28.024 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 18.7072 ms
2025-07-25 11:44:28.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 19.6162ms
2025-07-25 11:44:35.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 11:44:35.319 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:35.320 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6463ms
2025-07-25 11:44:35.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 11:44:35.322 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:44:35.323 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:44:35.323 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:44:35.330 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:44:35.331 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:44:35.331 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 7.2754ms
2025-07-25 11:44:35.331 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:44:35.331 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 8.0232 ms
2025-07-25 11:44:35.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 9.8178ms
2025-07-25 11:45:00.922 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 11:45:00.923 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:00.923 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9018ms
2025-07-25 11:45:00.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 11:45:00.930 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:00.930 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 11:45:00.931 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:45:00.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 2.7442ms
2025-07-25 11:45:01.972 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:45:01.972 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:01.973 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:45:01.973 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:45:01.974 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7668ms
2025-07-25 11:45:09.321 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:45:09.321 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.321 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5762ms
2025-07-25 11:45:09.323 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:45:09.323 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.324 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:45:09.324 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:45:09.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:45:09.899 +05:30 [INF] User logged in: test@patient.com
2025-07-25 11:45:09.900 +05:30 [INF] Role: Patient
2025-07-25 11:45:09.900 +05:30 [INF] Role: Patient
2025-07-25 11:45:09.900 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 11:45:09.902 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:45:09.903 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:45:09.903 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 578.8874ms
2025-07-25 11:45:09.903 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:45:09.904 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 580.1075 ms
2025-07-25 11:45:09.904 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 580.9901ms
2025-07-25 11:45:09.907 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:45:09.908 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.908 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.5831ms
2025-07-25 11:45:09.910 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 11:45:09.910 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.911 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:09.911 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:45:09.912 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:45:09.915 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:45:09.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:45:09.917 +05:30 [INF] Found 1 users among search
2025-07-25 11:45:09.918 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:45:09.919 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.7627ms
2025-07-25 11:45:09.920 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:09.921 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.5084 ms
2025-07-25 11:45:09.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 13.2718ms
2025-07-25 11:45:09.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:45:09.926 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.8245ms
2025-07-25 11:45:09.928 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 11:45:09.928 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:09.929 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:09.931 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:45:09.932 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 11:45:09.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 11:45:09.937 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:45:09.938 +05:30 [INF] Found 0 patients matching search
2025-07-25 11:45:09.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:45:09.938 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 6.8152ms
2025-07-25 11:45:09.939 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:09.939 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 10.2386 ms
2025-07-25 11:45:09.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 11.4625ms
2025-07-25 11:45:36.774 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:45:36.775 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:36.776 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:45:36.776 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:45:36.777 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.3313ms
2025-07-25 11:45:42.114 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:45:42.115 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0468ms
2025-07-25 11:45:42.118 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:45:42.118 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.119 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:45:42.119 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:45:42.135 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:45:42.917 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:45:42.917 +05:30 [INF] Role: Admin
2025-07-25 11:45:42.918 +05:30 [INF] Role: Admin
2025-07-25 11:45:42.918 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:45:42.924 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:45:42.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:45:42.926 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 806.6802ms
2025-07-25 11:45:42.926 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:45:42.926 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 807.7808 ms
2025-07-25 11:45:42.926 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 808.7173ms
2025-07-25 11:45:42.929 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:45:42.929 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4358ms
2025-07-25 11:45:42.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:45:42.932 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.933 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:42.933 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:45:42.934 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:45:42.936 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:45:42.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:45:42.939 +05:30 [INF] Found 1 users among search
2025-07-25 11:45:42.939 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:45:42.939 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.0267ms
2025-07-25 11:45:42.940 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:42.940 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3565 ms
2025-07-25 11:45:42.940 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.2517ms
2025-07-25 11:45:42.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:45:42.948 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 3.2555ms
2025-07-25 11:45:42.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:45:42.953 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:42.954 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:42.955 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:45:42.956 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:45:42.958 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:45:42.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:45:42.961 +05:30 [INF] Found 1 users among search
2025-07-25 11:45:42.961 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:45:42.962 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.4759ms
2025-07-25 11:45:42.962 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:45:42.962 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.5018 ms
2025-07-25 11:45:42.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 10.6705ms
2025-07-25 11:45:49.061 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:45:49.062 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:45:49.062 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:45:49.062 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:45:49.070 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:45:49.071 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:45:49.072 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 8.9675ms
2025-07-25 11:45:49.072 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:45:49.072 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 10.1320 ms
2025-07-25 11:45:49.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 10.8033ms
2025-07-25 11:46:47.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 11:46:47.274 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:46:47.274 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5361ms
2025-07-25 11:46:47.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 11:46:47.276 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:46:47.277 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:46:47.277 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 11:46:47.288 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:46:47.289 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:46:47.289 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 11.8433ms
2025-07-25 11:46:47.290 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 11:46:47.290 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 13.1480 ms
2025-07-25 11:46:47.290 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 14.5132ms
2025-07-25 11:47:08.073 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:47:08.073 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:47:08.074 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:47:08.074 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:47:08.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:47:08.078 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:47:08.079 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.8014ms
2025-07-25 11:47:08.079 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:47:08.079 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.5261 ms
2025-07-25 11:47:08.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 6.5807ms
2025-07-25 11:50:26.098 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:50:26.098 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:50:26.099 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:50:26.099 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:50:26.110 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:50:26.111 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:50:26.114 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 14.7718ms
2025-07-25 11:50:26.115 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:50:26.115 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 16.6277 ms
2025-07-25 11:50:26.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 18.2815ms
2025-07-25 11:50:59.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:50:59.831 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:50:59.831 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:50:59.831 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:50:59.835 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:50:59.835 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:50:59.836 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.9179ms
2025-07-25 11:50:59.836 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:50:59.836 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.1535 ms
2025-07-25 11:50:59.837 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 6.2923ms
2025-07-25 11:53:45.860 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:53:45.861 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:53:45.862 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:53:45.862 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:53:45.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:53:45.866 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:53:45.867 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.2641ms
2025-07-25 11:53:45.867 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:53:45.867 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.1768 ms
2025-07-25 11:53:45.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 7.1031ms
2025-07-25 11:54:42.845 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:54:42.845 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:42.845 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:54:42.846 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:54:42.850 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:54:42.851 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:54:42.851 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 5.1719ms
2025-07-25 11:54:42.851 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:54:42.851 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.9684 ms
2025-07-25 11:54:42.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 6.8495ms
2025-07-25 11:54:52.183 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:54:52.184 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:52.184 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:54:52.184 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:54:52.187 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:54:52.187 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:54:52.188 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.1769ms
2025-07-25 11:54:52.188 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:54:52.188 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 4.4443 ms
2025-07-25 11:54:52.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 5.6184ms
2025-07-25 11:54:57.239 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:54:57.239 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:57.239 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:54:57.239 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:54:57.240 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1341ms
2025-07-25 11:54:58.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:54:58.457 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:58.457 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4661ms
2025-07-25 11:54:58.459 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:54:58.459 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:58.459 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:54:58.460 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:54:58.464 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:54:59.006 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:54:59.006 +05:30 [INF] Role: Admin
2025-07-25 11:54:59.006 +05:30 [INF] Role: Admin
2025-07-25 11:54:59.006 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:54:59.013 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:54:59.014 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:54:59.015 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 555.1976ms
2025-07-25 11:54:59.015 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:54:59.016 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 556.5485 ms
2025-07-25 11:54:59.016 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 557.2836ms
2025-07-25 11:54:59.019 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:54:59.019 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:59.019 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6839ms
2025-07-25 11:54:59.021 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:54:59.021 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:59.022 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:54:59.022 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:54:59.024 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:54:59.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:54:59.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:54:59.029 +05:30 [INF] Found 1 users among search
2025-07-25 11:54:59.029 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:54:59.030 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.421ms
2025-07-25 11:54:59.030 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:54:59.031 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.3624 ms
2025-07-25 11:54:59.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.4856ms
2025-07-25 11:54:59.046 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:54:59.046 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:59.047 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.6008ms
2025-07-25 11:54:59.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:54:59.052 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:54:59.052 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:54:59.052 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:54:59.053 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:54:59.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:54:59.058 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:54:59.058 +05:30 [INF] Found 1 users among search
2025-07-25 11:54:59.059 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:54:59.059 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.4469ms
2025-07-25 11:54:59.059 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:54:59.060 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.8476 ms
2025-07-25 11:54:59.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.811ms
2025-07-25 11:55:18.492 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:55:18.493 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:18.493 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:55:18.493 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:55:18.494 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7642ms
2025-07-25 11:55:20.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:55:20.734 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:20.734 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0901ms
2025-07-25 11:55:20.736 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:55:20.737 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:20.737 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:20.737 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:55:20.742 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:55:21.285 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:55:21.286 +05:30 [INF] Role: Admin
2025-07-25 11:55:21.286 +05:30 [INF] Role: Admin
2025-07-25 11:55:21.286 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:55:21.290 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:55:21.290 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:55:21.290 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 553.3ms
2025-07-25 11:55:21.291 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:21.291 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 553.9519 ms
2025-07-25 11:55:21.291 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 554.6759ms
2025-07-25 11:55:21.295 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:21.295 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:21.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6262ms
2025-07-25 11:55:21.297 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:21.297 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:21.298 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:21.298 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:21.299 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:21.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:55:21.313 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:55:21.314 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:21.315 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:21.317 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 18.8084ms
2025-07-25 11:55:21.318 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:21.318 +05:30 [INF] HTTP GET /api/user/search responded 200 in 20.4494 ms
2025-07-25 11:55:21.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 21.5663ms
2025-07-25 11:55:21.327 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:21.327 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:21.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.3827ms
2025-07-25 11:55:21.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:21.329 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:21.329 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:21.329 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:21.330 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:21.332 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:55:21.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:55:21.335 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:21.335 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:21.335 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.7704ms
2025-07-25 11:55:21.335 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:21.336 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.5615 ms
2025-07-25 11:55:21.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.3829ms
2025-07-25 11:55:24.893 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:55:24.893 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:24.894 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:55:24.894 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:55:24.894 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9653ms
2025-07-25 11:55:26.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:55:26.613 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:26.613 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4461ms
2025-07-25 11:55:26.615 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:55:26.615 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:26.615 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:26.615 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:55:26.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:55:27.581 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:55:27.582 +05:30 [INF] Role: Admin
2025-07-25 11:55:27.582 +05:30 [INF] Role: Admin
2025-07-25 11:55:27.583 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:55:27.587 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:55:27.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:55:27.589 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 973.2107ms
2025-07-25 11:55:27.589 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:27.590 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 974.5744 ms
2025-07-25 11:55:27.590 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 975.76ms
2025-07-25 11:55:27.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:27.593 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:27.594 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7553ms
2025-07-25 11:55:27.595 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:27.596 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:27.596 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:27.597 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:27.597 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:27.602 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:55:27.605 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:55:27.606 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:27.606 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:27.607 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.7066ms
2025-07-25 11:55:27.607 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:27.607 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.7845 ms
2025-07-25 11:55:27.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 11.7936ms
2025-07-25 11:55:27.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:27.612 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:27.612 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.6337ms
2025-07-25 11:55:27.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:27.615 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:27.615 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:27.616 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:27.617 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:27.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:55:27.621 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:55:27.622 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:27.622 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:27.622 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.6065ms
2025-07-25 11:55:27.622 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:27.623 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3821 ms
2025-07-25 11:55:27.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.6599ms
2025-07-25 11:55:30.242 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 11:55:30.243 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:30.243 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:55:30.243 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:55:30.244 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5296ms
2025-07-25 11:55:36.624 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 11:55:36.624 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:36.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0175ms
2025-07-25 11:55:36.627 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 11:55:36.627 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:36.628 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:36.628 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 11:55:36.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 11:55:37.739 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 11:55:37.739 +05:30 [INF] Role: Admin
2025-07-25 11:55:37.740 +05:30 [INF] Role: Admin
2025-07-25 11:55:37.740 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 11:55:37.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 11:55:37.743 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 11:55:37.743 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1115.029ms
2025-07-25 11:55:37.744 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 11:55:37.744 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1116.2036 ms
2025-07-25 11:55:37.744 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1117.3683ms
2025-07-25 11:55:37.747 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:37.748 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:37.748 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7405ms
2025-07-25 11:55:37.750 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 11:55:37.751 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:37.751 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:37.752 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:37.752 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:37.754 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 11:55:37.756 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 11:55:37.757 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:37.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:37.759 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.559ms
2025-07-25 11:55:37.760 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:37.760 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.2346 ms
2025-07-25 11:55:37.761 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.5891ms
2025-07-25 11:55:37.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:37.765 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:37.766 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.65ms
2025-07-25 11:55:37.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 11:55:37.768 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:37.769 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:37.770 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 11:55:37.770 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 11:55:37.772 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 11:55:37.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 11:55:37.775 +05:30 [INF] Found 1 users among search
2025-07-25 11:55:37.775 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:37.776 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8875ms
2025-07-25 11:55:37.776 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 11:55:37.776 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.1729 ms
2025-07-25 11:55:37.776 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.5042ms
2025-07-25 11:55:39.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:55:39.895 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:39.895 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:39.895 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:55:39.898 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:55:39.899 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:39.899 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.7286ms
2025-07-25 11:55:39.900 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:39.901 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.6078 ms
2025-07-25 11:55:39.901 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 6.7445ms
2025-07-25 11:55:45.429 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:55:45.429 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:45.430 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:45.430 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:55:45.433 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:55:45.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:45.434 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.2581ms
2025-07-25 11:55:45.435 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:45.435 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.7704 ms
2025-07-25 11:55:45.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 7.094ms
2025-07-25 11:55:50.462 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:55:50.463 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:55:50.464 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:50.470 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 11:55:50.482 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 11:55:50.483 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 11:55:50.485 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 14.203ms
2025-07-25 11:55:50.488 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 11:55:50.488 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 23.8698 ms
2025-07-25 11:55:50.488 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 25.9317ms
2025-07-25 11:56:48.944 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 11:56:49.871 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 11:56:51.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 11:56:51.612 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 11:56:51.679 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 11:56:51.682 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 11:56:51.682 +05:30 [INF] Hosting environment: Development
2025-07-25 11:56:51.682 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 11:58:04.372 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 11:58:04.427 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-25 11:58:04.430 +05:30 [INF] CORS policy execution successful.
2025-07-25 11:58:04.483 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 11:58:04.489 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 11:58:04.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 146.1379ms
2025-07-25 12:00:01.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:00:01.090 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:01.095 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:01.097 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:01.098 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 14.1904ms
2025-07-25 12:00:04.839 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:00:04.840 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:04.842 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:04.843 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:04.843 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.9371ms
2025-07-25 12:00:05.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:00:05.991 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:05.992 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 3.2211ms
2025-07-25 12:00:05.994 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:00:05.994 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:05.999 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:06.021 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:00:06.129 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:00:06.919 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:00:06.919 +05:30 [INF] Role: Admin
2025-07-25 12:00:06.920 +05:30 [INF] Role: Admin
2025-07-25 12:00:06.920 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:00:06.980 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:00:07.007 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:00:07.028 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1003.9673ms
2025-07-25 12:00:07.029 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:07.032 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1035.3531 ms
2025-07-25 12:00:07.037 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1043.218ms
2025-07-25 12:00:07.038 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:07.039 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:07.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.4502ms
2025-07-25 12:00:07.044 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:07.044 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:07.089 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:07.098 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:07.112 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:07.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:00:07.211 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:00:07.211 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:00:07.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:00:07.219 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:07.220 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:07.230 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 132.4594ms
2025-07-25 12:00:07.231 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:07.231 +05:30 [INF] HTTP GET /api/user/search responded 200 in 142.7216 ms
2025-07-25 12:00:07.232 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 187.9798ms
2025-07-25 12:00:07.237 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:07.237 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:07.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0461ms
2025-07-25 12:00:07.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:07.241 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:07.242 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:07.242 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:07.246 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:07.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:00:07.257 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:00:07.258 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:00:07.263 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:00:07.264 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:07.264 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:07.265 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 21.9999ms
2025-07-25 12:00:07.265 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:07.265 +05:30 [INF] HTTP GET /api/user/search responded 200 in 23.3377 ms
2025-07-25 12:00:07.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 25.4946ms
2025-07-25 12:00:08.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:00:08.234 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:08.235 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:08.236 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:08.237 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 3.3658ms
2025-07-25 12:00:09.135 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:00:09.136 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:09.137 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:09.138 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:09.138 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.4981ms
2025-07-25 12:00:11.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:00:11.175 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:11.176 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.7084ms
2025-07-25 12:00:11.178 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:00:11.178 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:11.179 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:11.179 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:00:11.188 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:00:12.392 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:00:12.392 +05:30 [INF] Role: Admin
2025-07-25 12:00:12.393 +05:30 [INF] Role: Admin
2025-07-25 12:00:12.393 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:00:12.398 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:00:12.400 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:00:12.402 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1222.2839ms
2025-07-25 12:00:12.402 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:12.403 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1224.6668 ms
2025-07-25 12:00:12.404 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1225.7521ms
2025-07-25 12:00:12.408 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:12.408 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:12.409 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.0234ms
2025-07-25 12:00:12.411 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:12.411 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:12.412 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:12.413 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:12.417 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:12.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:00:12.423 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:00:12.424 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:12.425 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:12.428 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.9335ms
2025-07-25 12:00:12.428 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:12.429 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.9785 ms
2025-07-25 12:00:12.429 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.6242ms
2025-07-25 12:00:12.438 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:12.440 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:12.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.7639ms
2025-07-25 12:00:12.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:12.445 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:12.446 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:12.447 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:12.448 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:12.451 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:00:12.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:00:12.454 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:12.455 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:12.456 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.3008ms
2025-07-25 12:00:12.456 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:12.456 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.0684 ms
2025-07-25 12:00:12.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.7705ms
2025-07-25 12:00:14.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:00:14.276 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:14.276 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:14.277 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:14.277 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 1.4176ms
2025-07-25 12:00:58.016 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:00:58.016 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:58.017 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:00:58.017 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:00:58.018 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9277ms
2025-07-25 12:00:59.321 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:00:59.322 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 2.6668ms
2025-07-25 12:00:59.326 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:00:59.327 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.327 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:59.328 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:00:59.334 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:00:59.873 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:00:59.873 +05:30 [INF] Role: Admin
2025-07-25 12:00:59.873 +05:30 [INF] Role: Admin
2025-07-25 12:00:59.874 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:00:59.881 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:00:59.882 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:00:59.883 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 554.9386ms
2025-07-25 12:00:59.883 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:00:59.883 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 556.2617 ms
2025-07-25 12:00:59.884 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 557.5134ms
2025-07-25 12:00:59.889 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:59.889 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.890 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.3532ms
2025-07-25 12:00:59.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:00:59.893 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.893 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:59.894 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:59.895 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:59.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:00:59.904 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:00:59.910 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:59.911 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:59.913 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 18.6244ms
2025-07-25 12:00:59.913 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:59.913 +05:30 [INF] HTTP GET /api/user/search responded 200 in 20.1390 ms
2025-07-25 12:00:59.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 21.8719ms
2025-07-25 12:00:59.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:59.927 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 3.1556ms
2025-07-25 12:00:59.934 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:00:59.935 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:00:59.936 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:59.937 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:00:59.938 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:00:59.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:00:59.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:00:59.947 +05:30 [INF] Found 1 users among search
2025-07-25 12:00:59.948 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:00:59.949 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.9644ms
2025-07-25 12:00:59.949 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:00:59.950 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.8919 ms
2025-07-25 12:00:59.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 16.5171ms
2025-07-25 12:01:01.957 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:01.958 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:01.958 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:01.959 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:01.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 1.8173ms
2025-07-25 12:01:38.065 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:38.066 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:38.069 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 4.1829ms
2025-07-25 12:01:38.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:38.078 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:38.078 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:38.079 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:38.079 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 2.0748ms
2025-07-25 12:01:38.705 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:01:38.706 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:38.706 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:38.707 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:38.707 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.5822ms
2025-07-25 12:01:39.420 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:01:39.421 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:39.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0268ms
2025-07-25 12:01:39.423 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:01:39.423 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:39.424 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:39.424 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:01:39.429 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:01:40.019 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:01:40.019 +05:30 [INF] Role: Admin
2025-07-25 12:01:40.019 +05:30 [INF] Role: Admin
2025-07-25 12:01:40.019 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:01:40.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:01:40.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:01:40.023 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 598.5997ms
2025-07-25 12:01:40.023 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:40.024 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 599.8596 ms
2025-07-25 12:01:40.024 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 601.0084ms
2025-07-25 12:01:40.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:40.030 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:40.031 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.2542ms
2025-07-25 12:01:40.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:40.034 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:40.035 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:40.036 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:40.037 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:40.042 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:01:40.047 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:01:40.051 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:40.052 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:40.053 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 17.1662ms
2025-07-25 12:01:40.057 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:40.058 +05:30 [INF] HTTP GET /api/user/search responded 200 in 23.0381 ms
2025-07-25 12:01:40.061 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 27.1133ms
2025-07-25 12:01:40.072 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:40.073 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:40.074 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.6284ms
2025-07-25 12:01:40.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:40.078 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:40.080 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:40.080 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:40.081 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:40.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:01:40.091 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:01:40.091 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:40.093 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:40.094 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.0908ms
2025-07-25 12:01:40.095 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:40.096 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.1890 ms
2025-07-25 12:01:40.097 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 19.78ms
2025-07-25 12:01:41.721 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:41.722 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:41.723 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:01:41.729 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:01:41.758 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:01:41.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:41.766 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 37.408ms
2025-07-25 12:01:41.767 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:01:41.767 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 43.6736 ms
2025-07-25 12:01:41.767 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 46.1485ms
2025-07-25 12:01:44.563 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:44.565 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:44.566 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 2.5219ms
2025-07-25 12:01:44.568 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:44.569 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:44.570 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:44.571 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:44.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 4.2984ms
2025-07-25 12:01:46.398 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:01:46.399 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:46.400 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:46.400 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:46.401 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.3028ms
2025-07-25 12:01:47.379 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:01:47.379 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:47.379 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.784ms
2025-07-25 12:01:47.381 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:01:47.381 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:47.382 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:47.382 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:01:47.387 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:01:48.336 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:01:48.336 +05:30 [INF] Role: Admin
2025-07-25 12:01:48.336 +05:30 [INF] Role: Admin
2025-07-25 12:01:48.336 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:01:48.342 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:01:48.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:01:48.344 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 961.3719ms
2025-07-25 12:01:48.344 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:48.344 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 962.4748 ms
2025-07-25 12:01:48.344 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 963.5305ms
2025-07-25 12:01:48.349 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:48.350 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:48.350 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.588ms
2025-07-25 12:01:48.352 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:48.353 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:48.353 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:48.354 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:48.355 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:48.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:01:48.363 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:01:48.364 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:48.365 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:48.366 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.0944ms
2025-07-25 12:01:48.367 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:48.367 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.0220 ms
2025-07-25 12:01:48.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.7596ms
2025-07-25 12:01:48.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:48.384 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:48.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.5221ms
2025-07-25 12:01:48.391 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:48.392 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:48.394 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:48.395 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:48.396 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:48.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:01:48.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:01:48.403 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:48.404 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:48.404 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.6852ms
2025-07-25 12:01:48.405 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:48.405 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.3358 ms
2025-07-25 12:01:48.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 14.1341ms
2025-07-25 12:01:52.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:52.051 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:52.051 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.8211ms
2025-07-25 12:01:52.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:52.053 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:52.055 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:01:52.056 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:01:52.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:01:52.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:52.063 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 7.3465ms
2025-07-25 12:01:52.064 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:01:52.064 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 9.0345 ms
2025-07-25 12:01:52.064 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 11.2692ms
2025-07-25 12:01:53.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:01:53.968 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:53.968 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:53.969 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:53.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 3.9952ms
2025-07-25 12:01:54.704 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:01:54.705 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:54.706 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:01:54.706 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:01:54.707 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.7215ms
2025-07-25 12:01:57.547 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:01:57.547 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:57.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8885ms
2025-07-25 12:01:57.549 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:01:57.550 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:57.550 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:57.550 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:01:57.554 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:01:58.334 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:01:58.334 +05:30 [INF] Role: Admin
2025-07-25 12:01:58.334 +05:30 [INF] Role: Admin
2025-07-25 12:01:58.334 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:01:58.341 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:01:58.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:01:58.342 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 791.9221ms
2025-07-25 12:01:58.343 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:01:58.344 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 793.6500 ms
2025-07-25 12:01:58.344 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 794.6494ms
2025-07-25 12:01:58.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:58.347 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:58.348 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.753ms
2025-07-25 12:01:58.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:01:58.350 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:58.351 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:58.351 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:58.352 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:58.355 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:01:58.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:01:58.359 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:58.361 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:58.361 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.8079ms
2025-07-25 12:01:58.362 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:58.362 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.2412 ms
2025-07-25 12:01:58.362 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 12.7622ms
2025-07-25 12:01:58.370 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:58.371 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:58.371 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0509ms
2025-07-25 12:01:58.375 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:01:58.375 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:01:58.376 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:58.376 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:01:58.377 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:01:58.380 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:01:58.381 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:01:58.382 +05:30 [INF] Found 1 users among search
2025-07-25 12:01:58.382 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:01:58.383 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.9364ms
2025-07-25 12:01:58.383 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:01:58.383 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3495 ms
2025-07-25 12:01:58.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.6314ms
2025-07-25 12:02:07.512 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:02:07.513 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:07.513 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:02:07.513 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:02:07.514 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9694ms
2025-07-25 12:02:10.952 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:02:10.952 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:10.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1188ms
2025-07-25 12:02:10.955 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 12:02:10.956 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:10.956 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:02:10.957 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:02:10.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:02:11.789 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 12:02:11.789 +05:30 [INF] Role: Doctor
2025-07-25 12:02:11.790 +05:30 [INF] Role: Doctor
2025-07-25 12:02:11.790 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 12:02:11.795 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:02:11.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:02:11.796 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 838.8524ms
2025-07-25 12:02:11.796 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:02:11.797 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 840.3917 ms
2025-07-25 12:02:11.797 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 841.9235ms
2025-07-25 12:02:11.799 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:02:11.800 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:11.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.6111ms
2025-07-25 12:02:11.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:02:11.802 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:11.803 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:02:11.804 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:02:11.804 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:02:11.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:02:11.809 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:02:11.809 +05:30 [INF] Found 1 users among search
2025-07-25 12:02:11.811 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:02:11.813 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.8412ms
2025-07-25 12:02:11.813 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:02:11.814 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.7410 ms
2025-07-25 12:02:11.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 12.1021ms
2025-07-25 12:02:11.821 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:02:11.822 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:11.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.7679ms
2025-07-25 12:02:11.824 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:02:11.825 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:11.825 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:02:11.830 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:02:11.845 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 12:02:11.847 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:02:11.847 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:02:11.858 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:02:11.859 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:02:11.861 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 30.487ms
2025-07-25 12:02:11.862 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:02:11.862 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 37.0176 ms
2025-07-25 12:02:11.862 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 38.3271ms
2025-07-25 12:02:20.149 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:02:20.150 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:20.150 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.7839ms
2025-07-25 12:02:20.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:02:20.152 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:02:20.153 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:02:20.154 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:02:20.156 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:02:20.157 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:02:20.157 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.5907ms
2025-07-25 12:02:20.158 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:02:20.159 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 6.1618 ms
2025-07-25 12:02:20.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 7.8104ms
2025-07-25 12:03:22.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:03:22.966 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:22.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.7329ms
2025-07-25 12:03:22.969 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:03:22.969 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:22.970 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:03:22.970 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:03:22.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 1.5799ms
2025-07-25 12:03:23.925 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:03:23.925 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:23.926 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:03:23.926 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:03:23.927 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2046ms
2025-07-25 12:03:25.003 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:03:25.003 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:25.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7417ms
2025-07-25 12:03:25.005 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 12:03:25.005 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:25.006 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:03:25.006 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:03:25.014 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:03:26.081 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 12:03:26.081 +05:30 [INF] Role: Doctor
2025-07-25 12:03:26.082 +05:30 [INF] Role: Doctor
2025-07-25 12:03:26.082 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 12:03:26.087 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:03:26.088 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:03:26.089 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1082.2037ms
2025-07-25 12:03:26.089 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:03:26.090 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1084.2332 ms
2025-07-25 12:03:26.091 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 1085.5683ms
2025-07-25 12:03:26.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:03:26.094 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:26.094 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.7619ms
2025-07-25 12:03:26.096 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:03:26.096 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:26.097 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:26.097 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:03:26.098 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:03:26.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:03:26.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:03:26.105 +05:30 [INF] Found 1 users among search
2025-07-25 12:03:26.105 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:26.106 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.2668ms
2025-07-25 12:03:26.106 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:26.107 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.3926 ms
2025-07-25 12:03:26.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 11.8724ms
2025-07-25 12:03:26.114 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:03:26.114 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:26.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.5997ms
2025-07-25 12:03:26.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:03:26.118 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:26.118 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:03:26.119 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:03:26.126 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 12:03:26.133 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:03:26.134 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:26.134 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 14.7176ms
2025-07-25 12:03:26.134 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:03:26.134 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 16.0150 ms
2025-07-25 12:03:26.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 17.3421ms
2025-07-25 12:03:33.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:03:33.192 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:33.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.4583ms
2025-07-25 12:03:33.195 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:03:33.195 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:33.196 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:03:33.196 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:03:33.200 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:03:33.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:33.202 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 5.0626ms
2025-07-25 12:03:33.202 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:03:33.202 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 6.3025 ms
2025-07-25 12:03:33.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 8.1022ms
2025-07-25 12:03:41.386 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:03:41.386 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:41.387 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:03:41.387 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:03:41.387 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0764ms
2025-07-25 12:03:47.002 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:03:47.002 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:47.002 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:03:47.003 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:03:47.003 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3474ms
2025-07-25 12:03:48.038 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:03:48.039 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:48.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0419ms
2025-07-25 12:03:48.041 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:03:48.041 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:48.042 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:03:48.042 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:03:48.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:03:48.983 +05:30 [INF] User logged in: test@patient.com
2025-07-25 12:03:48.983 +05:30 [INF] Role: Patient
2025-07-25 12:03:48.984 +05:30 [INF] Role: Patient
2025-07-25 12:03:48.984 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 12:03:48.991 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:03:48.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:03:48.993 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 950.3987ms
2025-07-25 12:03:48.993 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:03:48.994 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 952.0700 ms
2025-07-25 12:03:48.994 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 953.4455ms
2025-07-25 12:03:48.998 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:03:48.998 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:48.998 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.6685ms
2025-07-25 12:03:49.000 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:03:49.001 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:49.002 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:49.002 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:03:49.003 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:03:49.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:03:49.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:03:49.009 +05:30 [INF] Found 1 users among search
2025-07-25 12:03:49.010 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:49.011 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.3449ms
2025-07-25 12:03:49.011 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:49.011 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.7517 ms
2025-07-25 12:03:49.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 11.6673ms
2025-07-25 12:03:49.015 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:03:49.015 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:49.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.598ms
2025-07-25 12:03:49.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:03:49.020 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:49.021 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:49.026 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:03:49.030 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 12:03:49.041 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 12:03:49.043 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:03:49.043 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:03:49.059 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:03:49.060 +05:30 [INF] Found 0 patients matching search
2025-07-25 12:03:49.060 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:49.063 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 36.9558ms
2025-07-25 12:03:49.063 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:03:49.064 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 42.8633 ms
2025-07-25 12:03:49.064 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 45.8163ms
2025-07-25 12:03:53.255 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:03:53.256 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:53.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.683ms
2025-07-25 12:03:53.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:03:53.258 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:03:53.260 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:03:53.267 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:03:53.289 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:03:53.291 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:03:53.294 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 26.5023ms
2025-07-25 12:03:53.295 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:03:53.295 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 35.0156 ms
2025-07-25 12:03:53.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 37.2185ms
2025-07-25 12:04:21.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:04:21.092 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:21.092 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.8ms
2025-07-25 12:04:21.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:04:21.095 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:21.095 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:04:21.096 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:04:21.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 12:04:21.105 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:04:21.105 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 12:04:21.115 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:04:21.116 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:04:21.120 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 24.268ms
2025-07-25 12:04:21.121 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:04:21.121 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 25.7030 ms
2025-07-25 12:04:21.121 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 26.7158ms
2025-07-25 12:04:45.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 12:04:45.715 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:45.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 1.1954ms
2025-07-25 12:04:45.717 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 160
2025-07-25 12:04:45.718 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:45.719 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:04:45.723 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 12:04:45.745 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-25 12:04:45.771 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 47.2823ms
2025-07-25 12:04:45.771 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:04:45.772 +05:30 [INF] HTTP POST /api/appointment responded 400 in 52.8175 ms
2025-07-25 12:04:45.772 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 400 345 application/problem+json; charset=utf-8 54.5196ms
2025-07-25 12:04:55.139 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:04:55.139 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:55.140 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:04:55.141 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:04:55.141 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.3181ms
2025-07-25 12:04:55.977 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:04:55.977 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:55.977 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7095ms
2025-07-25 12:04:55.980 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:04:55.980 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:55.981 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:04:55.982 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:04:55.989 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:04:56.815 +05:30 [INF] User logged in: test@patient.com
2025-07-25 12:04:56.815 +05:30 [INF] Role: Patient
2025-07-25 12:04:56.815 +05:30 [INF] Role: Patient
2025-07-25 12:04:56.816 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 12:04:56.823 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:04:56.823 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:04:56.824 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 841.8677ms
2025-07-25 12:04:56.824 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:04:56.825 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 843.5745 ms
2025-07-25 12:04:56.825 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 845.3811ms
2025-07-25 12:04:56.829 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:04:56.829 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:56.830 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.7963ms
2025-07-25 12:04:56.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:04:56.832 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:56.833 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:04:56.833 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:04:56.834 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:04:56.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:04:56.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:04:56.844 +05:30 [INF] Found 1 users among search
2025-07-25 12:04:56.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:04:56.846 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.483ms
2025-07-25 12:04:56.847 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:04:56.847 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.5915 ms
2025-07-25 12:04:56.848 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 15.8744ms
2025-07-25 12:04:56.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:04:56.853 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:56.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.7442ms
2025-07-25 12:04:56.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:04:56.857 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:56.857 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:04:56.858 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:04:56.861 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 12:04:56.868 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 12:04:56.876 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:04:56.876 +05:30 [INF] Found 0 patients matching search
2025-07-25 12:04:56.877 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:04:56.877 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 19.2674ms
2025-07-25 12:04:56.878 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:04:56.878 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 20.7550 ms
2025-07-25 12:04:56.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 22.0537ms
2025-07-25 12:04:58.518 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:04:58.518 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:04:58.519 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:04:58.519 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:04:58.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0574ms
2025-07-25 12:05:06.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:05:06.140 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:06.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5708ms
2025-07-25 12:05:06.141 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:05:06.141 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:06.142 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:05:06.142 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:05:06.148 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:05:07.173 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:05:07.174 +05:30 [INF] Role: Admin
2025-07-25 12:05:07.174 +05:30 [INF] Role: Admin
2025-07-25 12:05:07.175 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:05:07.183 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:05:07.184 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:05:07.185 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1042.659ms
2025-07-25 12:05:07.185 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:05:07.186 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1044.0790 ms
2025-07-25 12:05:07.186 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1045.0814ms
2025-07-25 12:05:07.190 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:05:07.190 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:07.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6068ms
2025-07-25 12:05:07.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:05:07.192 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:07.193 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:07.193 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:05:07.194 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:05:07.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:05:07.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:05:07.199 +05:30 [INF] Found 1 users among search
2025-07-25 12:05:07.200 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:07.201 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3775ms
2025-07-25 12:05:07.202 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:07.202 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.6924 ms
2025-07-25 12:05:07.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 11.074ms
2025-07-25 12:05:07.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:05:07.210 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:07.210 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.2231ms
2025-07-25 12:05:07.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:05:07.213 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:07.214 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:07.214 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:05:07.214 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:05:07.216 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:05:07.218 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:05:07.219 +05:30 [INF] Found 1 users among search
2025-07-25 12:05:07.220 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:07.220 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.1871ms
2025-07-25 12:05:07.221 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:07.221 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.9131 ms
2025-07-25 12:05:07.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.21ms
2025-07-25 12:05:08.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:05:08.831 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:08.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4552ms
2025-07-25 12:05:08.833 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:05:08.833 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:08.834 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:05:08.834 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:05:08.837 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:05:08.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:08.839 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 4.8865ms
2025-07-25 12:05:08.840 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:05:08.840 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 5.9953 ms
2025-07-25 12:05:08.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 7.1506ms
2025-07-25 12:05:11.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:05:11.174 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:11.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.5954ms
2025-07-25 12:05:11.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:05:11.177 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:11.177 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:05:11.178 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:05:11.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:05:11.181 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:11.182 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.2695ms
2025-07-25 12:05:11.182 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:05:11.183 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.4622 ms
2025-07-25 12:05:11.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 344 application/json; charset=utf-8 6.6177ms
2025-07-25 12:05:17.638 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:05:17.639 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:17.639 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:05:17.640 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:05:17.641 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.0604ms
2025-07-25 12:05:23.372 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:05:23.373 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:23.374 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.359ms
2025-07-25 12:05:23.376 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:05:23.376 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:23.377 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:05:23.377 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:05:23.380 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:05:24.433 +05:30 [INF] User logged in: test@patient.com
2025-07-25 12:05:24.433 +05:30 [INF] Role: Patient
2025-07-25 12:05:24.434 +05:30 [INF] Role: Patient
2025-07-25 12:05:24.434 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 12:05:24.440 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:05:24.441 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:05:24.442 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1064.4248ms
2025-07-25 12:05:24.442 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:05:24.443 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1065.8727 ms
2025-07-25 12:05:24.443 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 1067.0083ms
2025-07-25 12:05:24.446 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:05:24.447 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:24.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.6038ms
2025-07-25 12:05:24.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:05:24.449 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:24.449 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:24.450 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:05:24.450 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:05:24.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:05:24.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:05:24.459 +05:30 [INF] Found 1 users among search
2025-07-25 12:05:24.460 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:24.460 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.4652ms
2025-07-25 12:05:24.461 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:24.461 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.9118 ms
2025-07-25 12:05:24.462 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 13.1936ms
2025-07-25 12:05:24.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:05:24.465 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:24.465 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.7853ms
2025-07-25 12:05:24.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:05:24.468 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:24.468 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:24.469 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:05:24.470 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 12:05:24.476 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 12:05:24.482 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:05:24.482 +05:30 [INF] Found 0 patients matching search
2025-07-25 12:05:24.482 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:24.483 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 13.8013ms
2025-07-25 12:05:24.483 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:05:24.483 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 14.8263 ms
2025-07-25 12:05:24.483 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 15.9053ms
2025-07-25 12:05:32.514 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:05:32.514 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:32.515 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4269ms
2025-07-25 12:05:32.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:05:32.517 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:32.518 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:05:32.518 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:05:32.520 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:05:32.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:05:32.521 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 2.7408ms
2025-07-25 12:05:32.522 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:05:32.523 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 5.0221 ms
2025-07-25 12:05:32.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 7.0746ms
2025-07-25 12:05:57.436 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:05:57.436 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:05:57.437 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:05:57.438 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:05:57.438 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.4351ms
2025-07-25 12:06:00.095 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:06:00.095 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:00.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6929ms
2025-07-25 12:06:00.097 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:06:00.098 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:00.098 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:06:00.099 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:06:00.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:06:01.058 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:06:01.058 +05:30 [INF] Role: Admin
2025-07-25 12:06:01.059 +05:30 [INF] Role: Admin
2025-07-25 12:06:01.059 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:06:01.064 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:06:01.065 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:06:01.065 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 965.9091ms
2025-07-25 12:06:01.065 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:06:01.066 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 967.3850 ms
2025-07-25 12:06:01.066 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 968.7513ms
2025-07-25 12:06:01.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:06:01.069 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:01.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6262ms
2025-07-25 12:06:01.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:06:01.072 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:01.072 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:01.072 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:06:01.073 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:06:01.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:06:01.079 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:06:01.080 +05:30 [INF] Found 1 users among search
2025-07-25 12:06:01.080 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:01.080 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.507ms
2025-07-25 12:06:01.080 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:01.081 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.9931 ms
2025-07-25 12:06:01.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.0917ms
2025-07-25 12:06:01.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:06:01.085 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:01.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.5794ms
2025-07-25 12:06:01.087 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:06:01.088 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:01.088 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:01.089 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:06:01.090 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:06:01.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:06:01.093 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:06:01.094 +05:30 [INF] Found 1 users among search
2025-07-25 12:06:01.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:01.094 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.4003ms
2025-07-25 12:06:01.094 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:01.094 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.3123 ms
2025-07-25 12:06:01.095 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.4988ms
2025-07-25 12:06:02.577 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:06:02.577 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:02.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7136ms
2025-07-25 12:06:02.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:06:02.580 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:02.580 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:06:02.581 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:06:02.583 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:06:02.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:02.584 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.2197ms
2025-07-25 12:06:02.584 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:06:02.585 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 4.3687 ms
2025-07-25 12:06:02.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 5.8325ms
2025-07-25 12:06:08.727 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:06:08.727 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:08.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.5169ms
2025-07-25 12:06:08.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:06:08.730 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:08.730 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:06:08.731 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:06:08.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 12:06:08.737 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:06:08.738 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:08.738 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 7.3441ms
2025-07-25 12:06:08.739 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:06:08.739 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 8.7435 ms
2025-07-25 12:06:08.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 10.2221ms
2025-07-25 12:06:23.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 12:06:23.453 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:23.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 0.6171ms
2025-07-25 12:06:23.455 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 160
2025-07-25 12:06:23.456 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:23.457 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:06:23.458 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 12:06:23.460 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-25 12:06:23.461 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 2.7477ms
2025-07-25 12:06:23.461 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:06:23.461 +05:30 [INF] HTTP POST /api/appointment responded 400 in 4.2997 ms
2025-07-25 12:06:23.462 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 400 345 application/problem+json; charset=utf-8 6.4357ms
2025-07-25 12:06:31.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:06:31.053 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:31.053 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.7254ms
2025-07-25 12:06:31.068 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:06:31.069 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:31.070 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 12:06:31.071 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:06:31.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 3.9156ms
2025-07-25 12:06:32.279 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:06:32.279 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:32.280 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:06:32.280 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:06:32.281 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4589ms
2025-07-25 12:06:33.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:06:33.185 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:33.186 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6555ms
2025-07-25 12:06:33.187 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:06:33.187 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:33.188 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:06:33.188 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:06:33.194 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:06:34.053 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 12:06:34.054 +05:30 [INF] Role: Admin
2025-07-25 12:06:34.054 +05:30 [INF] Role: Admin
2025-07-25 12:06:34.054 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 12:06:34.057 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:06:34.058 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:06:34.058 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 869.9067ms
2025-07-25 12:06:34.058 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:06:34.058 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 870.7099 ms
2025-07-25 12:06:34.059 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 871.4613ms
2025-07-25 12:06:34.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:06:34.065 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:34.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8012ms
2025-07-25 12:06:34.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 12:06:34.067 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:34.067 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:34.068 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:06:34.068 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:06:34.071 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:06:34.076 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:06:34.077 +05:30 [INF] Found 1 users among search
2025-07-25 12:06:34.079 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:34.080 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.3403ms
2025-07-25 12:06:34.081 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:34.083 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.7129 ms
2025-07-25 12:06:34.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 17.0881ms
2025-07-25 12:06:34.099 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:06:34.100 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:34.101 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.2542ms
2025-07-25 12:06:34.104 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 12:06:34.105 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:34.106 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:34.107 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:06:34.108 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:06:34.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 12:06:34.118 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:06:34.120 +05:30 [INF] Found 1 users among search
2025-07-25 12:06:34.120 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:34.121 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.2507ms
2025-07-25 12:06:34.122 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:06:34.122 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.9360 ms
2025-07-25 12:06:34.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 18.3375ms
2025-07-25 12:06:35.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:06:35.187 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:35.188 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:06:35.188 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:06:35.192 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:06:35.193 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:35.195 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.8906ms
2025-07-25 12:06:35.196 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:06:35.196 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 8.8899 ms
2025-07-25 12:06:35.197 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 10.7567ms
2025-07-25 12:06:37.092 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:06:37.094 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:37.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 2.4292ms
2025-07-25 12:06:37.097 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:06:37.097 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:37.098 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:06:37.098 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:06:37.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 12:06:37.105 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:06:37.106 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:06:37.106 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 7.6338ms
2025-07-25 12:06:37.106 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:06:37.107 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 9.0711 ms
2025-07-25 12:06:37.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 10.1088ms
2025-07-25 12:06:51.876 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 12:06:51.876 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:51.878 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 2.2959ms
2025-07-25 12:06:51.879 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 160
2025-07-25 12:06:51.880 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:06:51.881 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:06:51.881 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 12:06:51.885 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-25 12:06:51.885 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 3.857ms
2025-07-25 12:06:51.886 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:06:51.886 +05:30 [INF] HTTP POST /api/appointment responded 400 in 5.2437 ms
2025-07-25 12:06:51.886 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 400 345 application/problem+json; charset=utf-8 6.7146ms
2025-07-25 12:07:37.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:07:37.989 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:37.989 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7726ms
2025-07-25 12:07:37.991 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:07:37.992 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:37.992 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 12:07:37.992 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:07:37.992 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9024ms
2025-07-25 12:07:39.071 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:07:39.071 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:39.072 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:07:39.072 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:07:39.072 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0451ms
2025-07-25 12:07:45.847 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:07:45.848 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:45.849 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.8553ms
2025-07-25 12:07:45.852 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 12:07:45.852 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:45.853 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:07:45.853 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:07:45.862 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:07:46.874 +05:30 [INF] User logged in: test@patient.com
2025-07-25 12:07:46.875 +05:30 [INF] Role: Patient
2025-07-25 12:07:46.875 +05:30 [INF] Role: Patient
2025-07-25 12:07:46.876 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 12:07:46.885 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:07:46.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:07:46.887 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1033.7567ms
2025-07-25 12:07:46.888 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:07:46.888 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1035.6688 ms
2025-07-25 12:07:46.889 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 1036.9783ms
2025-07-25 12:07:46.894 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:07:46.894 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:46.894 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.6333ms
2025-07-25 12:07:46.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 12:07:46.897 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:46.898 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:07:46.898 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:07:46.899 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:07:46.902 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:07:46.905 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:07:46.905 +05:30 [INF] Found 1 users among search
2025-07-25 12:07:46.906 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:07:46.906 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.6495ms
2025-07-25 12:07:46.907 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:07:46.908 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.4671 ms
2025-07-25 12:07:46.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 519 application/json; charset=utf-8 12.8969ms
2025-07-25 12:07:46.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:07:46.926 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:46.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.8042ms
2025-07-25 12:07:46.928 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 12:07:46.929 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:46.929 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:07:46.930 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:07:46.932 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 12:07:46.941 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 12:07:46.948 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:07:46.948 +05:30 [INF] Found 0 patients matching search
2025-07-25 12:07:46.949 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:07:46.949 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 18.9594ms
2025-07-25 12:07:46.949 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 12:07:46.950 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 20.6291 ms
2025-07-25 12:07:46.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 21.8479ms
2025-07-25 12:07:48.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:07:48.881 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:48.882 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.1131ms
2025-07-25 12:07:48.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:07:48.884 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:48.885 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:07:48.885 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:07:48.888 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:07:48.889 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:07:48.889 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.9982ms
2025-07-25 12:07:48.890 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:07:48.890 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 5.4422 ms
2025-07-25 12:07:48.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 6.9036ms
2025-07-25 12:07:51.033 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:07:51.033 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:51.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.7347ms
2025-07-25 12:07:51.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 12:07:51.036 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:07:51.037 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:07:51.037 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:07:51.039 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 12:07:51.044 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:07:51.045 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:07:51.046 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 8.4763ms
2025-07-25 12:07:51.046 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:07:51.046 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 9.6848 ms
2025-07-25 12:07:51.047 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 10.9441ms
2025-07-25 12:08:06.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 12:08:06.397 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:06.397 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 0.6553ms
2025-07-25 12:08:06.400 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 159
2025-07-25 12:08:06.400 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:06.401 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:08:06.401 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 12:08:06.454 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 1000) (DbType = AnsiString), @p5='?' (DbType = Int32), @p6='?' (Size = 255) (DbType = AnsiString), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppointmentDate], [CreatedAt], [DoctorID], [ModifiedAt], [Notes], [PatientID], [Reason], [Status], [isActive])
OUTPUT INSERTED.[AppointmentID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-07-25 12:08:06.580 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'HealthcareApi.Models.Appointment'.
2025-07-25 12:08:06.602 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 200.9894ms
2025-07-25 12:08:06.603 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 12:08:06.603 +05:30 [INF] HTTP POST /api/appointment responded 201 in 202.3636 ms
2025-07-25 12:08:06.603 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 201 259 application/json; charset=utf-8 203.6619ms
2025-07-25 12:08:06.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:08:06.615 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:06.616 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.548ms
2025-07-25 12:08:06.618 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:08:06.619 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:06.619 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:08:06.619 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:08:06.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:08:06.622 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:08:06.623 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.3728ms
2025-07-25 12:08:06.623 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:08:06.623 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 4.5132 ms
2025-07-25 12:08:06.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1070 application/json; charset=utf-8 5.6201ms
2025-07-25 12:08:13.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 12:08:13.053 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:13.055 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 4.1179ms
2025-07-25 12:08:13.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 12:08:13.061 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:13.062 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:08:13.063 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 12:08:13.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:08:13.068 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:08:13.069 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.9484ms
2025-07-25 12:08:13.070 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 12:08:13.071 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 8.5486 ms
2025-07-25 12:08:13.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1070 application/json; charset=utf-8 11.5909ms
2025-07-25 12:08:22.638 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:08:22.639 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:22.639 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:08:22.641 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:08:22.642 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.7379ms
2025-07-25 12:08:26.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:08:26.269 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:26.269 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6588ms
2025-07-25 12:08:26.271 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 12:08:26.271 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:26.271 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:08:26.272 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:08:26.278 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:08:27.042 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 12:08:27.042 +05:30 [INF] Role: Doctor
2025-07-25 12:08:27.042 +05:30 [INF] Role: Doctor
2025-07-25 12:08:27.043 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 12:08:27.052 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:08:27.053 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:08:27.054 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 782.0133ms
2025-07-25 12:08:27.054 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:08:27.055 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 783.2611 ms
2025-07-25 12:08:27.055 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 783.9926ms
2025-07-25 12:08:27.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:08:27.061 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:27.061 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.736ms
2025-07-25 12:08:27.063 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:08:27.063 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:27.064 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:08:27.064 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:08:27.065 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:08:27.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:08:27.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:08:27.074 +05:30 [INF] Found 1 users among search
2025-07-25 12:08:27.077 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:08:27.078 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.2859ms
2025-07-25 12:08:27.080 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:08:27.080 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.1478 ms
2025-07-25 12:08:27.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 19.6306ms
2025-07-25 12:08:27.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:08:27.097 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:27.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 3.4384ms
2025-07-25 12:08:27.101 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:08:27.101 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:27.102 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:08:27.103 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:08:27.111 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 12:08:27.120 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:08:27.120 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:08:27.121 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 17.866ms
2025-07-25 12:08:27.121 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:08:27.121 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 18.9564 ms
2025-07-25 12:08:27.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 20.8104ms
2025-07-25 12:08:28.810 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:08:28.810 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:28.810 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.7106ms
2025-07-25 12:08:28.813 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:08:28.813 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:08:28.814 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:08:28.814 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:08:28.818 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:08:28.819 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:08:28.819 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.7189ms
2025-07-25 12:08:28.820 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:08:28.820 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.8212 ms
2025-07-25 12:08:28.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 692 application/json; charset=utf-8 7.6165ms
2025-07-25 12:10:39.585 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:10:39.586 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:10:39.586 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:10:39.587 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:10:39.587 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.1758ms
2025-07-25 12:11:26.175 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:11:26.175 +05:30 [INF] CORS policy execution failed.
2025-07-25 12:11:26.176 +05:30 [INF] Request origin http://localhost:9876 does not have permission to access the resource.
2025-07-25 12:11:26.176 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:11:26.177 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:11:26.177 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7313ms
2025-07-25 12:11:39.993 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:11:39.993 +05:30 [INF] CORS policy execution failed.
2025-07-25 12:11:39.993 +05:30 [INF] Request origin http://localhost:9876 does not have permission to access the resource.
2025-07-25 12:11:39.994 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:11:39.994 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:11:39.994 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5215ms
2025-07-25 12:15:13.034 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 12:15:13.034 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6263ms
2025-07-25 12:15:13.036 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 12:15:13.036 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.037 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:15:13.037 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 12:15:13.050 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 12:15:13.871 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 12:15:13.872 +05:30 [INF] Role: Doctor
2025-07-25 12:15:13.872 +05:30 [INF] Role: Doctor
2025-07-25 12:15:13.872 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 12:15:13.879 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 12:15:13.879 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 12:15:13.880 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 842.9684ms
2025-07-25 12:15:13.880 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 12:15:13.880 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 843.9571 ms
2025-07-25 12:15:13.881 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 844.7722ms
2025-07-25 12:15:13.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:15:13.884 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.885 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5644ms
2025-07-25 12:15:13.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 12:15:13.887 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.887 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:15:13.888 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 12:15:13.888 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 12:15:13.890 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 12:15:13.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 12:15:13.893 +05:30 [INF] Found 1 users among search
2025-07-25 12:15:13.893 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:15:13.894 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8335ms
2025-07-25 12:15:13.894 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 12:15:13.894 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.0767 ms
2025-07-25 12:15:13.897 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 9.9139ms
2025-07-25 12:15:13.915 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:15:13.915 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.6124ms
2025-07-25 12:15:13.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 12:15:13.917 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:13.918 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:15:13.918 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:15:13.926 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 12:15:13.934 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 12:15:13.935 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:15:13.935 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 16.7396ms
2025-07-25 12:15:13.935 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 12:15:13.935 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 17.5488 ms
2025-07-25 12:15:13.936 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 18.8608ms
2025-07-25 12:15:16.854 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:15:16.854 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:16.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.6764ms
2025-07-25 12:15:16.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:15:16.857 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:15:16.857 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:15:16.857 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 12:15:16.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 12:15:16.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 12:15:16.861 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.0541ms
2025-07-25 12:15:16.861 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 12:15:16.861 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 3.9715 ms
2025-07-25 12:15:16.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 692 application/json; charset=utf-8 4.9884ms
2025-07-25 12:34:19.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:34:19.692 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:34:19.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 4.5653ms
2025-07-25 12:34:19.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 12:34:19.737 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:34:19.738 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:34:19.739 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:34:19.740 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 401 0 null 4.43ms
2025-07-25 12:34:25.270 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 12:34:25.271 +05:30 [INF] CORS policy execution successful.
2025-07-25 12:34:25.272 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 12:34:25.272 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 12:34:25.272 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9793ms
2025-07-25 13:48:06.985 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 13:48:08.018 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 13:48:09.459 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 13:48:10.006 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 13:48:10.091 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 13:48:10.094 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 13:48:10.094 +05:30 [INF] Hosting environment: Development
2025-07-25 13:48:10.095 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 13:51:53.718 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 13:51:54.623 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 13:51:55.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 13:51:56.448 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 13:51:56.515 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 13:51:56.517 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 13:51:56.518 +05:30 [INF] Hosting environment: Development
2025-07-25 13:51:56.518 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 13:54:34.307 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 13:54:34.329 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-25 13:54:34.330 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:34.341 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 34.1047ms
2025-07-25 13:54:34.344 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 13:54:34.348 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:34.385 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:54:34.404 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 13:54:34.523 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 13:54:35.389 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 13:54:35.390 +05:30 [INF] Role: Doctor
2025-07-25 13:54:35.390 +05:30 [INF] Role: Doctor
2025-07-25 13:54:35.390 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 13:54:35.448 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 13:54:35.472 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 13:54:35.494 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1086.2921ms
2025-07-25 13:54:35.495 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:54:35.499 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1116.7124 ms
2025-07-25 13:54:35.505 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 639 application/json; charset=utf-8 1160.7888ms
2025-07-25 13:54:35.506 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 13:54:35.508 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:35.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 2.4656ms
2025-07-25 13:54:35.511 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 13:54:35.515 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:35.548 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:35.560 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 13:54:35.578 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 13:54:35.672 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 13:54:35.677 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:35.677 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:35.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 13:54:35.685 +05:30 [INF] Found 1 users among search
2025-07-25 13:54:35.687 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:35.705 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 145.0529ms
2025-07-25 13:54:35.706 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:35.706 +05:30 [INF] HTTP GET /api/user/search responded 200 in 159.6676 ms
2025-07-25 13:54:35.707 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 195.3548ms
2025-07-25 13:54:35.710 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 13:54:35.710 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:35.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.8107ms
2025-07-25 13:54:35.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 13:54:35.714 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:35.716 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 13:54:35.720 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 13:54:35.743 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 13:54:35.746 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:35.746 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:35.755 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 13:54:35.755 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:35.757 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 36.6831ms
2025-07-25 13:54:35.758 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 13:54:35.758 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 41.7623 ms
2025-07-25 13:54:35.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 45.619ms
2025-07-25 13:54:37.346 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 13:54:37.346 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:37.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.7228ms
2025-07-25 13:54:37.348 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 13:54:37.348 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:37.352 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 13:54:37.355 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 13:54:37.377 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 13:54:37.380 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:37.384 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 28.6713ms
2025-07-25 13:54:37.384 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 13:54:37.384 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 32.4323 ms
2025-07-25 13:54:37.385 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 692 application/json; charset=utf-8 36.6359ms
2025-07-25 13:54:44.415 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 13:54:44.415 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:44.418 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 13:54:44.421 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 13:54:44.421 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 6.3602ms
2025-07-25 13:54:47.631 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 13:54:47.632 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:47.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6972ms
2025-07-25 13:54:47.633 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 13:54:47.634 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:47.634 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:54:47.634 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 13:54:47.638 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 13:54:48.175 +05:30 [INF] User logged in: test@patient.com
2025-07-25 13:54:48.176 +05:30 [INF] Role: Patient
2025-07-25 13:54:48.176 +05:30 [INF] Role: Patient
2025-07-25 13:54:48.176 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 13:54:48.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 13:54:48.180 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 13:54:48.181 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 546.2166ms
2025-07-25 13:54:48.181 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:54:48.181 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 547.0411 ms
2025-07-25 13:54:48.181 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 645 application/json; charset=utf-8 547.7807ms
2025-07-25 13:54:48.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 13:54:48.185 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:48.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.67ms
2025-07-25 13:54:48.188 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 13:54:48.188 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:48.188 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:48.189 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 13:54:48.191 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 13:54:48.195 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 13:54:48.197 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 13:54:48.198 +05:30 [INF] Found 1 users among search
2025-07-25 13:54:48.198 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:48.199 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.0614ms
2025-07-25 13:54:48.200 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:48.201 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.8155 ms
2025-07-25 13:54:48.202 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 14.2432ms
2025-07-25 13:54:48.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 13:54:48.207 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:48.207 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.7624ms
2025-07-25 13:54:48.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 13:54:48.211 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:48.212 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:48.216 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 13:54:48.219 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 13:54:48.230 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 13:54:48.231 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:48.232 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:54:48.240 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 13:54:48.241 +05:30 [INF] Found 0 patients matching search
2025-07-25 13:54:48.242 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:48.243 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 27.1606ms
2025-07-25 13:54:48.244 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 13:54:48.244 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 32.2026 ms
2025-07-25 13:54:48.245 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 35.0459ms
2025-07-25 13:54:54.122 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 13:54:54.122 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:54.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5176ms
2025-07-25 13:54:54.124 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 13:54:54.124 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:54:54.126 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 13:54:54.130 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 13:54:54.140 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 13:54:54.147 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:54:54.152 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 21.6251ms
2025-07-25 13:54:54.152 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 13:54:54.153 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 26.5359 ms
2025-07-25 13:54:54.153 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1070 application/json; charset=utf-8 29.0927ms
2025-07-25 13:55:01.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 13:55:01.231 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:01.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.5152ms
2025-07-25 13:55:01.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 13:55:01.238 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:01.238 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 13:55:01.238 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 13:55:01.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 13:55:01.247 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:55:01.247 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:55:01.254 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 13:55:01.255 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:55:01.258 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 19.4404ms
2025-07-25 13:55:01.258 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 13:55:01.258 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 20.2093 ms
2025-07-25 13:55:01.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 21.0232ms
2025-07-25 13:55:17.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 13:55:17.904 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:17.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 1.0559ms
2025-07-25 13:55:17.906 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 153
2025-07-25 13:55:17.907 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:17.907 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 13:55:17.909 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 13:55:17.951 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 1000) (DbType = AnsiString), @p5='?' (DbType = Int32), @p6='?' (Size = 255) (DbType = AnsiString), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppointmentDate], [CreatedAt], [DoctorID], [ModifiedAt], [Notes], [PatientID], [Reason], [Status], [isActive])
OUTPUT INSERTED.[AppointmentID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-07-25 13:55:18.035 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'HealthcareApi.Models.Appointment'.
2025-07-25 13:55:18.045 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 135.7531ms
2025-07-25 13:55:18.046 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 13:55:18.046 +05:30 [INF] HTTP POST /api/appointment responded 201 in 138.8730 ms
2025-07-25 13:55:18.047 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 201 253 application/json; charset=utf-8 139.9946ms
2025-07-25 13:55:18.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 13:55:18.057 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:18.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5865ms
2025-07-25 13:55:18.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 13:55:18.059 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:18.060 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 13:55:18.060 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 13:55:18.064 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 13:55:18.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:55:18.065 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.0739ms
2025-07-25 13:55:18.066 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 13:55:18.066 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.2778 ms
2025-07-25 13:55:18.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 7.6723ms
2025-07-25 13:55:26.420 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 13:55:26.421 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:26.421 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 13:55:26.422 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 13:55:26.422 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.8562ms
2025-07-25 13:55:28.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 13:55:28.629 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:28.630 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1785ms
2025-07-25 13:55:28.632 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 13:55:28.632 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:28.632 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:55:28.632 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 13:55:28.645 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 13:55:29.197 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 13:55:29.198 +05:30 [INF] Role: Admin
2025-07-25 13:55:29.198 +05:30 [INF] Role: Admin
2025-07-25 13:55:29.198 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 13:55:29.208 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 13:55:29.209 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 13:55:29.209 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 576.6445ms
2025-07-25 13:55:29.209 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 13:55:29.210 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 577.3683 ms
2025-07-25 13:55:29.210 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 578.1339ms
2025-07-25 13:55:29.213 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 13:55:29.213 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:29.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7083ms
2025-07-25 13:55:29.215 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 13:55:29.216 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:29.216 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:55:29.217 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 13:55:29.218 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 13:55:29.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 13:55:29.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 13:55:29.224 +05:30 [INF] Found 1 users among search
2025-07-25 13:55:29.224 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:55:29.227 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.5238ms
2025-07-25 13:55:29.228 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:55:29.228 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.1418 ms
2025-07-25 13:55:29.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 13.2438ms
2025-07-25 13:55:29.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 13:55:29.236 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:29.236 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8671ms
2025-07-25 13:55:29.239 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 13:55:29.239 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:29.240 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:55:29.241 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 13:55:29.242 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 13:55:29.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 13:55:29.248 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:55:29.249 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 13:55:29.254 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 13:55:29.254 +05:30 [INF] Found 1 users among search
2025-07-25 13:55:29.254 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:55:29.254 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.6248ms
2025-07-25 13:55:29.255 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 13:55:29.255 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.6903 ms
2025-07-25 13:55:29.255 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 16.0993ms
2025-07-25 13:55:33.501 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 13:55:33.502 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:33.502 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.6206ms
2025-07-25 13:55:33.504 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 13:55:33.505 +05:30 [INF] CORS policy execution successful.
2025-07-25 13:55:33.506 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 13:55:33.506 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 13:55:33.515 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 13:55:33.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 13:55:33.517 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 10.5835ms
2025-07-25 13:55:33.517 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 13:55:33.517 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 11.6042 ms
2025-07-25 13:55:33.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 1034 application/json; charset=utf-8 13.2912ms
2025-07-25 14:51:14.548 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 14:51:14.550 +05:30 [INF] CORS policy execution successful.
2025-07-25 14:51:14.551 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 14:51:14.551 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 14:51:14.552 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 4.1515ms
2025-07-25 14:54:35.594 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 14:54:36.514 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 14:54:37.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 14:54:38.673 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 14:54:38.776 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 14:54:38.780 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 14:54:38.781 +05:30 [INF] Hosting environment: Development
2025-07-25 14:54:38.781 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 15:01:56.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - null null
2025-07-25 15:01:56.124 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-25 15:01:56.125 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:01:56.136 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - 204 null null 44.2028ms
2025-07-25 15:01:56.139 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/register - application/json 86
2025-07-25 15:01:56.143 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:01:56.174 +05:30 [INF] Executing endpoint 'AuthController.Register (HealthcareApi)'
2025-07-25 15:01:56.190 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:01:56.337 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__req_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__req_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-25 15:01:56.340 +05:30 [WRN] Attempt to register with already used email: ruby@raishin.com
2025-07-25 15:01:56.345 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-25 15:01:56.350 +05:30 [INF] Executed action AuthController.Register (HealthcareApi) in 156.7616ms
2025-07-25 15:01:56.350 +05:30 [INF] Executed endpoint 'AuthController.Register (HealthcareApi)'
2025-07-25 15:01:56.353 +05:30 [INF] HTTP POST /api/auth/register responded 400 in 181.6471 ms
2025-07-25 15:01:56.357 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/register - 400 null text/plain; charset=utf-8 217.6283ms
2025-07-25 15:02:06.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - null null
2025-07-25 15:02:07.001 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:02:07.001 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - 204 null null 2.6577ms
2025-07-25 15:02:07.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/register - application/json 86
2025-07-25 15:02:07.004 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:02:07.006 +05:30 [INF] Executing endpoint 'AuthController.Register (HealthcareApi)'
2025-07-25 15:02:07.006 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:02:07.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__req_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__req_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-25 15:02:07.090 +05:30 [WRN] Attempt to register with already used email: ruby@raishin.com
2025-07-25 15:02:07.090 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-25 15:02:07.092 +05:30 [INF] Executed action AuthController.Register (HealthcareApi) in 85.0272ms
2025-07-25 15:02:07.092 +05:30 [INF] Executed endpoint 'AuthController.Register (HealthcareApi)'
2025-07-25 15:02:07.093 +05:30 [INF] HTTP POST /api/auth/register responded 400 in 87.1086 ms
2025-07-25 15:02:07.094 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/register - 400 null text/plain; charset=utf-8 90.3846ms
2025-07-25 15:08:10.599 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:08:10.600 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:08:10.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.2975ms
2025-07-25 15:08:10.608 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 45
2025-07-25 15:08:10.609 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:08:10.611 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:08:10.615 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:08:10.658 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:08:11.495 +05:30 [WRN] Failed login attempt for email: ruby@raishin.com, 123
2025-07-25 15:08:11.495 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-07-25 15:08:11.495 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 880.5631ms
2025-07-25 15:08:11.496 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:08:11.496 +05:30 [INF] HTTP POST /api/auth/login responded 401 in 885.1873 ms
2025-07-25 15:08:11.496 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 401 null text/plain; charset=utf-8 888.6461ms
2025-07-25 15:08:23.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:08:23.533 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:08:23.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9822ms
2025-07-25 15:08:23.535 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 45
2025-07-25 15:08:23.536 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:08:23.537 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:08:23.537 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:08:23.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:08:24.168 +05:30 [WRN] Failed login attempt for email: ruby@raishin.com, 123
2025-07-25 15:08:24.169 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-07-25 15:08:24.170 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 632.5382ms
2025-07-25 15:08:24.172 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:08:24.173 +05:30 [INF] HTTP POST /api/auth/login responded 401 in 636.6079 ms
2025-07-25 15:08:24.175 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 401 null text/plain; charset=utf-8 640.6873ms
2025-07-25 15:10:15.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:10:15.170 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:15.171 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0885ms
2025-07-25 15:10:15.173 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:10:15.174 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:15.174 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:10:15.174 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:10:15.187 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:10:15.800 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:10:15.800 +05:30 [INF] Role: Admin
2025-07-25 15:10:15.800 +05:30 [INF] Role: Admin
2025-07-25 15:10:15.801 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:10:15.872 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:10:15.900 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:10:15.923 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 749.1779ms
2025-07-25 15:10:15.924 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:10:15.926 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 751.9804 ms
2025-07-25 15:10:15.928 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 754.8898ms
2025-07-25 15:10:15.929 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:10:15.930 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:15.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.6686ms
2025-07-25 15:10:15.933 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:10:15.937 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:15.986 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:16.004 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:10:16.022 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:10:16.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:10:16.075 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:10:16.076 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:10:16.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:10:16.085 +05:30 [INF] Found 1 users among search
2025-07-25 15:10:16.086 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:10:16.100 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 95.7208ms
2025-07-25 15:10:16.101 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:16.101 +05:30 [INF] HTTP GET /api/user/search responded 200 in 114.8079 ms
2025-07-25 15:10:16.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 168.244ms
2025-07-25 15:10:16.105 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:10:16.105 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:16.105 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8212ms
2025-07-25 15:10:16.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:10:16.108 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:16.109 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:16.109 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:10:16.114 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:10:16.125 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:10:16.128 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:10:16.130 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:10:16.143 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:10:16.145 +05:30 [INF] Found 1 users among search
2025-07-25 15:10:16.147 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:10:16.149 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 39.3982ms
2025-07-25 15:10:16.150 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:16.150 +05:30 [INF] HTTP GET /api/user/search responded 200 in 41.4722 ms
2025-07-25 15:10:16.151 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 43.5874ms
2025-07-25 15:10:19.156 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:10:19.157 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:19.163 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:10:19.166 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:10:19.167 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 10.9829ms
2025-07-25 15:10:20.630 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:10:20.631 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:20.634 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:10:20.635 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:10:20.636 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 5.6153ms
2025-07-25 15:10:27.124 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:10:27.125 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.125 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5697ms
2025-07-25 15:10:27.126 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:10:27.127 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.127 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:10:27.127 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:10:27.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:10:27.716 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:10:27.717 +05:30 [INF] Role: Admin
2025-07-25 15:10:27.717 +05:30 [INF] Role: Admin
2025-07-25 15:10:27.717 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:10:27.722 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:10:27.723 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:10:27.723 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 595.7206ms
2025-07-25 15:10:27.724 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:10:27.724 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 596.9223 ms
2025-07-25 15:10:27.724 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 597.7417ms
2025-07-25 15:10:27.727 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:10:27.728 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 3.3242ms
2025-07-25 15:10:27.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:10:27.733 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.735 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:27.735 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:10:27.738 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:10:27.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:10:27.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:10:27.746 +05:30 [INF] Found 1 users among search
2025-07-25 15:10:27.748 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:10:27.749 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.0818ms
2025-07-25 15:10:27.751 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:27.751 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.7602 ms
2025-07-25 15:10:27.752 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 19.1132ms
2025-07-25 15:10:27.760 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:10:27.761 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.4788ms
2025-07-25 15:10:27.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:10:27.765 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:10:27.765 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:27.766 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:10:27.766 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:10:27.768 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:10:27.770 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:10:27.770 +05:30 [INF] Found 1 users among search
2025-07-25 15:10:27.770 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:10:27.771 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.3086ms
2025-07-25 15:10:27.771 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:10:27.771 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.2096 ms
2025-07-25 15:10:27.772 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.1588ms
2025-07-25 15:11:49.477 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:49.478 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:49.481 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:49.481 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:49.482 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 4.6031ms
2025-07-25 15:11:52.359 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:52.359 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:52.360 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:52.360 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:52.361 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5353ms
2025-07-25 15:11:52.364 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:52.365 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:52.365 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:52.366 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:52.367 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0989ms
2025-07-25 15:11:55.713 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:55.713 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:55.713 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:55.714 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:55.714 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.2814ms
2025-07-25 15:11:55.717 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:55.717 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:55.718 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:55.718 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:55.718 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4908ms
2025-07-25 15:11:59.130 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:59.131 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:59.131 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:59.131 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:59.132 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.8146ms
2025-07-25 15:11:59.135 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:11:59.135 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:11:59.136 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:11:59.136 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:11:59.136 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0933ms
2025-07-25 15:12:01.336 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:12:01.337 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.337 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8971ms
2025-07-25 15:12:01.341 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:12:01.341 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.341 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:12:01.341 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:12:01.355 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:12:01.921 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:12:01.921 +05:30 [INF] Role: Admin
2025-07-25 15:12:01.921 +05:30 [INF] Role: Admin
2025-07-25 15:12:01.921 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:12:01.930 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:12:01.931 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:12:01.932 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 589.6646ms
2025-07-25 15:12:01.932 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:12:01.932 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 590.9667 ms
2025-07-25 15:12:01.932 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 591.8642ms
2025-07-25 15:12:01.935 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:12:01.936 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.936 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9716ms
2025-07-25 15:12:01.938 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:12:01.939 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.941 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:01.941 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:12:01.943 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:12:01.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:12:01.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:12:01.953 +05:30 [INF] Found 1 users among search
2025-07-25 15:12:01.953 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:12:01.954 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.197ms
2025-07-25 15:12:01.954 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:01.954 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.2633 ms
2025-07-25 15:12:01.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 16.4943ms
2025-07-25 15:12:01.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:12:01.962 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0455ms
2025-07-25 15:12:01.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:12:01.965 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:01.966 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:01.966 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:12:01.967 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:12:01.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:12:01.974 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:12:01.976 +05:30 [INF] Found 1 users among search
2025-07-25 15:12:01.976 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:12:01.977 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.4765ms
2025-07-25 15:12:01.977 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:01.977 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.5014 ms
2025-07-25 15:12:01.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 12.7801ms
2025-07-25 15:12:08.292 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:12:08.292 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:08.293 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:12:08.293 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:12:08.294 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4369ms
2025-07-25 15:12:19.617 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:12:19.618 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:19.618 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:12:19.619 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:12:19.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5629ms
2025-07-25 15:12:25.950 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:12:25.951 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:25.951 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:12:25.951 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:12:25.952 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.312ms
2025-07-25 15:12:34.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:12:34.216 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.216 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7732ms
2025-07-25 15:12:34.217 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:12:34.217 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.218 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:12:34.218 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:12:34.223 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:12:34.817 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:12:34.817 +05:30 [INF] Role: Admin
2025-07-25 15:12:34.817 +05:30 [INF] Role: Admin
2025-07-25 15:12:34.818 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:12:34.823 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:12:34.824 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:12:34.825 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 607.0063ms
2025-07-25 15:12:34.826 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:12:34.826 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 608.7118 ms
2025-07-25 15:12:34.827 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 609.7737ms
2025-07-25 15:12:34.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:12:34.830 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7618ms
2025-07-25 15:12:34.833 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:12:34.834 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.835 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:34.836 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:12:34.837 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:12:34.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:12:34.846 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:12:34.847 +05:30 [INF] Found 1 users among search
2025-07-25 15:12:34.848 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:12:34.849 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.5623ms
2025-07-25 15:12:34.850 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:34.850 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.5954 ms
2025-07-25 15:12:34.851 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 17.8265ms
2025-07-25 15:12:34.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:12:34.868 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.7818ms
2025-07-25 15:12:34.873 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:12:34.873 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:34.874 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:34.874 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:12:34.875 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:12:34.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:12:34.879 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:12:34.879 +05:30 [INF] Found 1 users among search
2025-07-25 15:12:34.880 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:12:34.880 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.7839ms
2025-07-25 15:12:34.881 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:12:34.881 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3617 ms
2025-07-25 15:12:34.881 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.8175ms
2025-07-25 15:12:36.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:12:36.431 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:36.431 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.932ms
2025-07-25 15:12:36.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:12:36.436 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:36.440 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:12:36.443 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:12:36.474 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:12:36.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:12:36.483 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 39.8261ms
2025-07-25 15:12:36.483 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:12:36.484 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 44.2825 ms
2025-07-25 15:12:36.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 48.8093ms
2025-07-25 15:12:57.037 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:12:57.038 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:57.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6948ms
2025-07-25 15:12:57.042 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:12:57.042 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:57.043 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 15:12:57.044 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:12:57.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 2.7355ms
2025-07-25 15:12:58.945 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:12:58.946 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:12:58.948 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:12:58.950 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:12:58.958 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 13.2228ms
2025-07-25 15:13:00.298 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:13:00.299 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.299 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5257ms
2025-07-25 15:13:00.300 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:13:00.300 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.301 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:13:00.301 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:13:00.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:13:00.900 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:13:00.900 +05:30 [INF] Role: Admin
2025-07-25 15:13:00.900 +05:30 [INF] Role: Admin
2025-07-25 15:13:00.900 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:13:00.906 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:13:00.907 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:13:00.907 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 606.2906ms
2025-07-25 15:13:00.908 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:13:00.908 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 607.1801 ms
2025-07-25 15:13:00.908 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 607.8939ms
2025-07-25 15:13:00.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:13:00.914 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.2988ms
2025-07-25 15:13:00.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:13:00.918 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.919 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:13:00.920 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:13:00.922 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:13:00.927 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:13:00.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:13:00.937 +05:30 [INF] Found 1 users among search
2025-07-25 15:13:00.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:13:00.939 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 17.9869ms
2025-07-25 15:13:00.939 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:13:00.940 +05:30 [INF] HTTP GET /api/user/search responded 200 in 20.8115 ms
2025-07-25 15:13:00.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 23.5223ms
2025-07-25 15:13:00.955 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:13:00.955 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.956 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.5873ms
2025-07-25 15:13:00.959 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:13:00.960 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:00.960 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:13:00.961 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:13:00.962 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:13:00.964 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:13:00.965 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:13:00.966 +05:30 [INF] Found 1 users among search
2025-07-25 15:13:00.966 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:13:00.967 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.5504ms
2025-07-25 15:13:00.967 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:13:00.967 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.5858 ms
2025-07-25 15:13:00.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.8927ms
2025-07-25 15:13:02.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:13:02.038 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:13:02.040 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:13:02.041 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:13:02.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:13:02.047 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:13:02.047 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.9406ms
2025-07-25 15:13:02.047 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:13:02.048 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 8.3475 ms
2025-07-25 15:13:02.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 10.4397ms
2025-07-25 15:15:04.579 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:15:04.579 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:15:04.579 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.9289ms
2025-07-25 15:15:04.582 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:15:04.584 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:15:04.585 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:15:04.590 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:15:04.606 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:15:04.607 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:15:04.610 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 19.3783ms
2025-07-25 15:15:04.610 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:15:04.610 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 25.7634 ms
2025-07-25 15:15:04.611 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 1034 application/json; charset=utf-8 28.145ms
2025-07-25 15:16:00.317 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:16:00.318 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:16:00.318 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.9887ms
2025-07-25 15:16:00.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:16:00.322 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:16:00.323 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:16:00.324 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:16:00.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:16:00.328 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:16:00.328 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.5394ms
2025-07-25 15:16:00.329 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:16:00.329 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 6.1691 ms
2025-07-25 15:16:00.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 1034 application/json; charset=utf-8 7.872ms
2025-07-25 15:16:13.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:16:13.851 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:16:13.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.8756ms
2025-07-25 15:16:13.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:16:13.855 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:16:13.856 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:16:13.856 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:16:13.860 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:16:13.861 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:16:13.861 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.5076ms
2025-07-25 15:16:13.862 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:16:13.862 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.5119 ms
2025-07-25 15:16:13.862 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 8.2707ms
2025-07-25 15:19:11.960 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:19:11.961 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:11.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/proc?doctorId=NaN - 204 null null 0.5718ms
2025-07-25 15:19:11.963 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-25 15:19:11.963 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:11.964 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:19:11.964 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:19:11.971 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:19:11.973 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:19:11.973 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 9.2842ms
2025-07-25 15:19:11.974 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-25 15:19:11.974 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 10.2387 ms
2025-07-25 15:19:11.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 1034 application/json; charset=utf-8 11.2737ms
2025-07-25 15:19:25.949 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:19:25.949 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:25.950 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:19:25.951 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:19:25.951 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.5264ms
2025-07-25 15:19:27.146 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:19:27.146 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.146 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3851ms
2025-07-25 15:19:27.148 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:19:27.148 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.148 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:19:27.149 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:19:27.163 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:19:27.756 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:19:27.756 +05:30 [INF] Role: Admin
2025-07-25 15:19:27.756 +05:30 [INF] Role: Admin
2025-07-25 15:19:27.756 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:19:27.765 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:19:27.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:19:27.766 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 616.6327ms
2025-07-25 15:19:27.766 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:19:27.766 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 617.6309 ms
2025-07-25 15:19:27.766 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 618.4599ms
2025-07-25 15:19:27.769 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:19:27.769 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.770 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.098ms
2025-07-25 15:19:27.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-25 15:19:27.772 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.773 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:19:27.774 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:19:27.775 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:19:27.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:19:27.782 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:19:27.782 +05:30 [INF] Found 1 users among search
2025-07-25 15:19:27.784 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:19:27.786 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.0602ms
2025-07-25 15:19:27.786 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:19:27.787 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.8353 ms
2025-07-25 15:19:27.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 14.9613ms
2025-07-25 15:19:27.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:19:27.820 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.4806ms
2025-07-25 15:19:27.823 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-25 15:19:27.824 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:27.825 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:19:27.825 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:19:27.826 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:19:27.829 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-25 15:19:27.832 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:19:27.833 +05:30 [INF] Found 1 users among search
2025-07-25 15:19:27.833 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:19:27.833 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3989ms
2025-07-25 15:19:27.833 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:19:27.834 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.7189 ms
2025-07-25 15:19:27.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 10.7772ms
2025-07-25 15:19:41.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:19:41.157 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:41.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.0185ms
2025-07-25 15:19:41.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:19:41.161 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:19:41.162 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:19:41.163 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:19:41.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:19:41.167 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:19:41.168 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.058ms
2025-07-25 15:19:41.168 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:19:41.168 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.3714 ms
2025-07-25 15:19:41.172 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 10.8583ms
2025-07-25 15:20:02.028 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:20:02.029 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:02.031 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:20:02.031 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:20:02.031 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.9293ms
2025-07-25 15:20:05.916 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:20:05.916 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:05.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7351ms
2025-07-25 15:20:05.919 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:20:05.919 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:05.919 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:05.919 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:20:05.925 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:20:06.499 +05:30 [INF] User logged in: test@patient.com
2025-07-25 15:20:06.499 +05:30 [INF] Role: Patient
2025-07-25 15:20:06.499 +05:30 [INF] Role: Patient
2025-07-25 15:20:06.499 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 15:20:06.506 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:20:06.507 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:20:06.507 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 587.8885ms
2025-07-25 15:20:06.508 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:06.508 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 589.1432 ms
2025-07-25 15:20:06.509 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 645 application/json; charset=utf-8 589.8782ms
2025-07-25 15:20:06.511 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 15:20:06.512 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:06.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 1.5013ms
2025-07-25 15:20:06.515 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 15:20:06.515 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:06.516 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:06.516 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:20:06.518 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:20:06.522 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:20:06.526 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:20:06.527 +05:30 [INF] Found 1 users among search
2025-07-25 15:20:06.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:06.528 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.9404ms
2025-07-25 15:20:06.529 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:06.529 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.6847 ms
2025-07-25 15:20:06.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 519 application/json; charset=utf-8 15.2462ms
2025-07-25 15:20:06.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 15:20:06.543 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:06.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.9196ms
2025-07-25 15:20:06.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 15:20:06.545 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:06.546 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:06.551 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:20:06.556 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 15:20:06.572 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 15:20:06.573 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:20:06.574 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:20:06.585 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:20:06.585 +05:30 [INF] Found 0 patients matching search
2025-07-25 15:20:06.586 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:06.588 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 36.0192ms
2025-07-25 15:20:06.588 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:06.588 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 42.6087 ms
2025-07-25 15:20:06.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 43.6834ms
2025-07-25 15:20:28.131 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:20:28.131 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:28.132 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:20:28.132 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:20:28.132 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5559ms
2025-07-25 15:20:31.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:20:31.369 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.369 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6702ms
2025-07-25 15:20:31.371 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-25 15:20:31.371 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.372 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:31.372 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:20:31.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:20:31.938 +05:30 [INF] User logged in: test@doctor.com
2025-07-25 15:20:31.939 +05:30 [INF] Role: Doctor
2025-07-25 15:20:31.939 +05:30 [INF] Role: Doctor
2025-07-25 15:20:31.940 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-25 15:20:31.945 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:20:31.946 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:20:31.946 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 573.9529ms
2025-07-25 15:20:31.946 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:31.946 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 575.0682 ms
2025-07-25 15:20:31.947 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 639 application/json; charset=utf-8 575.8248ms
2025-07-25 15:20:31.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 15:20:31.950 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.951 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.6788ms
2025-07-25 15:20:31.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-25 15:20:31.953 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.953 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:31.953 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:20:31.954 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:20:31.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:20:31.962 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:20:31.964 +05:30 [INF] Found 1 users among search
2025-07-25 15:20:31.965 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:31.966 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.131ms
2025-07-25 15:20:31.966 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:31.967 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.6870 ms
2025-07-25 15:20:31.969 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 16.6168ms
2025-07-25 15:20:31.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 15:20:31.980 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.980 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.469ms
2025-07-25 15:20:31.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-25 15:20:31.982 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:31.983 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:20:31.986 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:20:32.002 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-25 15:20:32.003 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:20:32.004 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:20:32.013 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:20:32.014 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:32.015 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 29.1966ms
2025-07-25 15:20:32.015 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:20:32.016 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 32.8878 ms
2025-07-25 15:20:32.016 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 33.7101ms
2025-07-25 15:20:47.519 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 15:20:47.520 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:47.520 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 15:20:47.520 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:20:47.521 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3707ms
2025-07-25 15:20:51.163 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-25 15:20:51.163 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.164 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4612ms
2025-07-25 15:20:51.165 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-25 15:20:51.166 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.166 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:51.166 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:20:51.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:20:51.750 +05:30 [INF] User logged in: test@patient.com
2025-07-25 15:20:51.750 +05:30 [INF] Role: Patient
2025-07-25 15:20:51.750 +05:30 [INF] Role: Patient
2025-07-25 15:20:51.750 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-25 15:20:51.756 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:20:51.757 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:20:51.758 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 591.164ms
2025-07-25 15:20:51.758 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:20:51.758 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 592.2051 ms
2025-07-25 15:20:51.758 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 645 application/json; charset=utf-8 593.1134ms
2025-07-25 15:20:51.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 15:20:51.763 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.763 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.8143ms
2025-07-25 15:20:51.766 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-25 15:20:51.766 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.767 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:51.767 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-25 15:20:51.768 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-25 15:20:51.777 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-25 15:20:51.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-25 15:20:51.780 +05:30 [INF] Found 1 users among search
2025-07-25 15:20:51.780 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:51.781 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.0248ms
2025-07-25 15:20:51.783 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:51.784 +05:30 [INF] HTTP GET /api/user/search responded 200 in 17.2587 ms
2025-07-25 15:20:51.784 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 18.6425ms
2025-07-25 15:20:51.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 15:20:51.789 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.789 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5652ms
2025-07-25 15:20:51.792 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-25 15:20:51.792 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:51.793 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:51.793 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:20:51.794 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-25 15:20:51.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-25 15:20:51.798 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:20:51.799 +05:30 [INF] Found 0 patients matching search
2025-07-25 15:20:51.799 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:51.800 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 6.457ms
2025-07-25 15:20:51.800 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-25 15:20:51.800 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 7.3961 ms
2025-07-25 15:20:51.800 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 8.7315ms
2025-07-25 15:20:53.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:20:53.449 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:53.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 2.9813ms
2025-07-25 15:20:53.452 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:20:53.452 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:20:53.453 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:20:53.453 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:20:53.456 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:20:53.458 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:20:53.459 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.7993ms
2025-07-25 15:20:53.460 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:20:53.460 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 7.0647 ms
2025-07-25 15:20:53.460 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1184 application/json; charset=utf-8 8.1434ms
2025-07-25 15:21:14.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:21:14.451 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:21:14.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.4863ms
2025-07-25 15:21:14.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:21:14.454 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:21:14.454 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:21:14.455 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:21:14.459 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 15:21:14.461 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:21:14.461 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-25 15:21:14.479 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:21:14.480 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:21:14.483 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 28.402ms
2025-07-25 15:21:14.483 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:21:14.484 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 29.1082 ms
2025-07-25 15:21:14.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 29.9536ms
2025-07-25 15:22:51.387 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:22:51.388 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:22:51.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 1.4883ms
2025-07-25 15:22:51.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:22:51.392 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:22:51.393 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:22:51.393 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:22:51.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 15:22:51.404 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:22:51.405 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:22:51.406 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 12.6395ms
2025-07-25 15:22:51.406 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:22:51.407 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 13.8178 ms
2025-07-25 15:22:51.407 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 15.0476ms
2025-07-25 15:22:57.395 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=General%20Medicine - null null
2025-07-25 15:22:57.395 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:22:57.395 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=General%20Medicine - 204 null null 0.3599ms
2025-07-25 15:22:57.398 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=General%20Medicine - null null
2025-07-25 15:22:57.398 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:22:57.400 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:22:57.400 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:22:57.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 15:22:57.404 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:22:57.406 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:22:57.406 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 5.9723ms
2025-07-25 15:22:57.407 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:22:57.407 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 7.2468 ms
2025-07-25 15:22:57.407 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=General%20Medicine - 200 401 application/json; charset=utf-8 9.3367ms
2025-07-25 15:23:01.413 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Neurology - null null
2025-07-25 15:23:01.413 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:23:01.413 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Neurology - 204 null null 0.3987ms
2025-07-25 15:23:01.414 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Neurology - null null
2025-07-25 15:23:01.415 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:23:01.415 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:23:01.416 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:23:01.417 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 15:23:01.419 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:23:01.420 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:23:01.422 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 6.0923ms
2025-07-25 15:23:01.423 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:23:01.423 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 7.9566 ms
2025-07-25 15:23:01.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Neurology - 200 388 application/json; charset=utf-8 10.079ms
2025-07-25 15:23:06.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:23:06.065 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:23:06.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.6872ms
2025-07-25 15:23:06.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-25 15:23:06.071 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:23:06.072 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:23:06.073 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:23:06.074 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-25 15:23:06.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-25 15:23:06.077 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:23:06.077 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 4.4866ms
2025-07-25 15:23:06.078 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-25 15:23:06.078 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 5.8437 ms
2025-07-25 15:23:06.078 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 7.8311ms
2025-07-25 15:24:16.738 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-25 15:24:16.739 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:24:16.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 1.0589ms
2025-07-25 15:24:16.741 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 154
2025-07-25 15:24:16.742 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:24:16.743 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 15:24:16.747 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-25 15:24:16.812 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 1000) (DbType = AnsiString), @p5='?' (DbType = Int32), @p6='?' (Size = 255) (DbType = AnsiString), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppointmentDate], [CreatedAt], [DoctorID], [ModifiedAt], [Notes], [PatientID], [Reason], [Status], [isActive])
OUTPUT INSERTED.[AppointmentID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-07-25 15:24:16.932 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'HealthcareApi.Models.Appointment'.
2025-07-25 15:24:16.952 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 204.8784ms
2025-07-25 15:24:16.952 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-25 15:24:16.953 +05:30 [INF] HTTP POST /api/appointment responded 201 in 210.9021 ms
2025-07-25 15:24:16.954 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 201 252 application/json; charset=utf-8 213.113ms
2025-07-25 15:24:16.967 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:24:16.968 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:24:16.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.2493ms
2025-07-25 15:24:16.971 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:24:16.971 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:24:16.972 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:24:16.972 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-25 15:24:16.977 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-25 15:24:16.977 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-25 15:24:16.978 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.3288ms
2025-07-25 15:24:16.978 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-25 15:24:16.978 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.5567 ms
2025-07-25 15:24:16.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 1299 application/json; charset=utf-8 7.669ms
2025-07-25 15:29:29.804 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 65
2025-07-25 15:29:29.805 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:29:29.806 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-25 15:29:29.858 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-25 15:29:30.966 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-25 15:29:30.966 +05:30 [INF] Role: Admin
2025-07-25 15:29:30.967 +05:30 [INF] Role: Admin
2025-07-25 15:29:30.967 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-25 15:29:30.976 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-25 15:29:30.977 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-25 15:29:30.978 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1171.6624ms
2025-07-25 15:29:30.978 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-25 15:29:30.979 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1173.2826 ms
2025-07-25 15:29:30.979 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 1174.575ms
2025-07-25 15:30:57.179 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit)
2025-07-25 15:30:58.401 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentID], [a].[AppointmentDate], [a].[CreatedAt], [a].[DoctorID], [a].[ModifiedAt], [a].[Notes], [a].[PatientID], [a].[Reason], [a].[Status], [a].[isActive], [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive], [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Appointment] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientID] = [p].[PatientID]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorID] = [d].[DoctorID]
WHERE [a].[isActive] = CAST(1 AS bit)
2025-07-25 15:31:00.970 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit)
2025-07-25 15:31:02.240 +05:30 [INF] User profile is available. Using 'C:\Users\aakarsh.batra\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-25 15:31:02.502 +05:30 [INF] Now listening on: http://localhost:5122
2025-07-25 15:31:02.508 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-25 15:31:02.509 +05:30 [INF] Hosting environment: Development
2025-07-25 15:31:02.510 +05:30 [INF] Content root path: C:\Users\aakarsh.batra\Assignment\Week2\HealthcareApi
2025-07-25 15:31:18.364 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/doctor - null 0
2025-07-25 15:31:18.400 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-25 15:31:18.594 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:31:18.619 +05:30 [INF] Route matched with {action = "Post", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Doctor) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:31:18.665 +05:30 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-07-25 15:31:18.786 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Post (HealthcareApi) in 161.2307ms
2025-07-25 15:31:18.787 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:31:18.790 +05:30 [INF] HTTP POST /api/doctor responded 415 in 200.8782 ms
2025-07-25 15:31:18.795 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/doctor - 415 176 application/problem+json; charset=utf-8 431.1111ms
2025-07-25 15:32:06.066 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/doctor - application/json 10
2025-07-25 15:32:06.085 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:32:06.086 +05:30 [INF] Route matched with {action = "Post", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Doctor) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:32:06.120 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-25 15:32:06.139 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Post (HealthcareApi) in 53.1538ms
2025-07-25 15:32:06.140 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:32:06.141 +05:30 [INF] HTTP POST /api/doctor responded 400 in 56.1018 ms
2025-07-25 15:32:06.142 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/doctor - 400 479 application/problem+json; charset=utf-8 75.5618ms
2025-07-25 15:32:14.066 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/doctor - null 0
2025-07-25 15:32:14.071 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:32:14.071 +05:30 [INF] Route matched with {action = "Post", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Doctor) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-25 15:32:14.076 +05:30 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-07-25 15:32:14.077 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Post (HealthcareApi) in 5.2812ms
2025-07-25 15:32:14.078 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Post (HealthcareApi)'
2025-07-25 15:32:14.078 +05:30 [INF] HTTP POST /api/doctor responded 415 in 7.4642 ms
2025-07-25 15:32:14.079 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/doctor - 415 176 application/problem+json; charset=utf-8 12.2106ms
2025-07-25 15:56:21.074 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 15:56:21.076 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:56:21.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 6.5774ms
2025-07-25 15:56:21.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 15:56:21.096 +05:30 [INF] CORS policy execution successful.
2025-07-25 15:56:21.098 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 15:56:21.102 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 15:56:21.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 19.3795ms
2025-07-25 16:06:10.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-25 16:06:10.965 +05:30 [INF] CORS policy execution successful.
2025-07-25 16:06:10.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.3324ms
2025-07-25 16:06:10.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-25 16:06:10.970 +05:30 [INF] CORS policy execution successful.
2025-07-25 16:06:10.971 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-25 16:06:10.973 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 16:06:10.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 5.4409ms
2025-07-25 16:06:58.679 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-25 16:06:58.687 +05:30 [INF] CORS policy execution successful.
2025-07-25 16:06:58.691 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-25 16:06:58.691 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-25 16:06:58.692 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 12.3113ms
