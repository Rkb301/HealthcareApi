2025-07-30 11:44:43.443 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:44:43.458 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:43.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 16.2086ms
2025-07-30 11:44:43.461 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:44:43.461 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:43.475 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:44:43.476 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:44:43.506 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:44:44.098 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:44:44.098 +05:30 [INF] Role: Admin
2025-07-30 11:44:44.098 +05:30 [INF] Role: Admin
2025-07-30 11:44:44.098 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:44:44.105 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:44:44.107 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:44:44.108 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 631.817ms
2025-07-30 11:44:44.108 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:44:44.109 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 647.2791 ms
2025-07-30 11:44:44.109 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 648.492ms
2025-07-30 11:44:44.112 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:44:44.113 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:44.113 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4568ms
2025-07-30 11:44:44.115 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:44:44.115 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:44.116 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:44:44.116 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:44:44.120 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:44:44.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:44:44.134 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:44:44.134 +05:30 [INF] Found 1 users among search
2025-07-30 11:44:44.138 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:44:44.140 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 22.8335ms
2025-07-30 11:44:44.140 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:44:44.140 +05:30 [INF] HTTP GET /api/user/search responded 200 in 24.8391 ms
2025-07-30 11:44:44.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 25.8897ms
2025-07-30 11:44:44.211 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:44:44.212 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:44.212 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.6985ms
2025-07-30 11:44:44.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:44:44.217 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:44.220 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:44:44.221 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:44:44.222 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:44:44.234 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:44:44.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:44:44.241 +05:30 [INF] Found 1 users among search
2025-07-30 11:44:44.242 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:44:44.243 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 21.6654ms
2025-07-30 11:44:44.243 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:44:44.243 +05:30 [INF] HTTP GET /api/user/search responded 200 in 25.4166 ms
2025-07-30 11:44:44.244 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 27.3777ms
2025-07-30 11:44:45.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:44:45.613 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:45.613 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.5525ms
2025-07-30 11:44:45.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:44:45.615 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:44:45.616 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:44:45.617 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:44:45.617 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:44:45.621 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:44:45.622 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 4.6486ms
2025-07-30 11:44:45.622 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:44:45.622 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 6.3757 ms
2025-07-30 11:44:45.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 7.5961ms
2025-07-30 11:47:07.441 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:47:07.441 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:47:07.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.9527ms
2025-07-30 11:47:07.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:47:07.450 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:47:07.450 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:47:07.451 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:47:07.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.7082ms
2025-07-30 11:48:22.538 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:48:22.539 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:22.539 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:48:22.539 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:48:22.540 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.1575ms
2025-07-30 11:48:23.372 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:48:23.373 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.373 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9967ms
2025-07-30 11:48:23.374 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:48:23.375 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.375 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:48:23.376 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:48:23.388 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:48:23.949 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:48:23.950 +05:30 [INF] Role: Admin
2025-07-30 11:48:23.951 +05:30 [INF] Role: Admin
2025-07-30 11:48:23.952 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:48:23.957 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:48:23.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:48:23.958 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 582.0304ms
2025-07-30 11:48:23.958 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:48:23.958 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 583.1074 ms
2025-07-30 11:48:23.958 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 583.9772ms
2025-07-30 11:48:23.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:48:23.963 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.2601ms
2025-07-30 11:48:23.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:48:23.966 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.966 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:48:23.967 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:48:23.968 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:48:23.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:48:23.975 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:48:23.976 +05:30 [INF] Found 1 users among search
2025-07-30 11:48:23.978 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:48:23.978 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.3241ms
2025-07-30 11:48:23.981 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:48:23.982 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.5503 ms
2025-07-30 11:48:23.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 17.2004ms
2025-07-30 11:48:23.994 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:48:23.994 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.994 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.6004ms
2025-07-30 11:48:23.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:48:23.997 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:23.997 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:48:23.997 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:48:23.998 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:48:24.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:48:24.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:48:24.006 +05:30 [INF] Found 1 users among search
2025-07-30 11:48:24.007 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:48:24.007 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.8116ms
2025-07-30 11:48:24.008 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:48:24.008 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.9414 ms
2025-07-30 11:48:24.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 11.8881ms
2025-07-30 11:48:26.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:48:26.516 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:26.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.6115ms
2025-07-30 11:48:26.518 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:48:26.519 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:48:26.520 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:48:26.521 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:48:26.521 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:48:26.522 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:48:26.524 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.5415ms
2025-07-30 11:48:26.524 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:48:26.524 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.0599 ms
2025-07-30 11:48:26.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 6.1915ms
2025-07-30 11:51:38.648 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:51:38.648 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:38.649 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.3814ms
2025-07-30 11:51:38.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:51:38.654 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:38.655 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:51:38.657 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:51:38.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.7504ms
2025-07-30 11:51:39.877 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:51:39.877 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:39.878 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:51:39.878 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:51:39.878 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.413ms
2025-07-30 11:51:40.513 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:51:40.514 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:40.514 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8336ms
2025-07-30 11:51:40.517 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:51:40.518 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:40.518 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:51:40.519 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:51:40.571 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:51:41.237 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:51:41.237 +05:30 [INF] Role: Admin
2025-07-30 11:51:41.237 +05:30 [INF] Role: Admin
2025-07-30 11:51:41.237 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:51:41.247 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:51:41.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:51:41.247 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 727.9438ms
2025-07-30 11:51:41.247 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:51:41.248 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 729.2843 ms
2025-07-30 11:51:41.248 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 730.4613ms
2025-07-30 11:51:41.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:51:41.253 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:41.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5732ms
2025-07-30 11:51:41.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:51:41.256 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:41.256 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:51:41.256 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:51:41.257 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:51:41.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:51:41.261 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:51:41.262 +05:30 [INF] Found 1 users among search
2025-07-30 11:51:41.263 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:51:41.263 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.0259ms
2025-07-30 11:51:41.263 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:51:41.264 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.1213 ms
2025-07-30 11:51:41.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.9435ms
2025-07-30 11:51:41.272 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:51:41.272 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:41.273 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.7409ms
2025-07-30 11:51:41.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:51:41.276 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:41.276 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:51:41.277 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:51:41.278 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:51:41.281 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:51:41.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:51:41.284 +05:30 [INF] Found 1 users among search
2025-07-30 11:51:41.285 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:51:41.286 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.0918ms
2025-07-30 11:51:41.286 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:51:41.287 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.4665 ms
2025-07-30 11:51:41.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 12.0425ms
2025-07-30 11:51:42.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:51:42.736 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:51:42.737 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:51:42.737 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:51:42.737 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:51:42.738 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:51:42.738 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.4676ms
2025-07-30 11:51:42.739 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:51:42.739 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.4615 ms
2025-07-30 11:51:42.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 3.3288ms
2025-07-30 11:53:43.501 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:53:43.502 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:43.502 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7626ms
2025-07-30 11:53:43.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:53:43.506 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:43.507 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:53:43.507 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:53:43.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.9893ms
2025-07-30 11:53:44.373 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:53:44.374 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:44.374 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:53:44.374 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:53:44.375 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6548ms
2025-07-30 11:53:45.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:53:45.014 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4352ms
2025-07-30 11:53:45.015 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:53:45.016 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.016 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:53:45.016 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:53:45.036 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:53:45.663 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:53:45.663 +05:30 [INF] Role: Admin
2025-07-30 11:53:45.664 +05:30 [INF] Role: Admin
2025-07-30 11:53:45.664 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:53:45.670 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:53:45.671 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:53:45.671 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 654.6492ms
2025-07-30 11:53:45.671 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:53:45.671 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 655.6501 ms
2025-07-30 11:53:45.672 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 656.677ms
2025-07-30 11:53:45.676 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:53:45.676 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.676 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5928ms
2025-07-30 11:53:45.678 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:53:45.678 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.679 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:53:45.679 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:53:45.680 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:53:45.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:53:45.685 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:53:45.685 +05:30 [INF] Found 1 users among search
2025-07-30 11:53:45.686 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:53:45.686 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.0128ms
2025-07-30 11:53:45.686 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:53:45.686 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.9556 ms
2025-07-30 11:53:45.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.8065ms
2025-07-30 11:53:45.701 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:53:45.702 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.703 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0969ms
2025-07-30 11:53:45.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:53:45.705 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:45.705 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:53:45.706 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:53:45.706 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:53:45.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:53:45.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:53:45.712 +05:30 [INF] Found 1 users among search
2025-07-30 11:53:45.713 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:53:45.714 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.7937ms
2025-07-30 11:53:45.714 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:53:45.714 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.6644 ms
2025-07-30 11:53:45.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.537ms
2025-07-30 11:53:46.745 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:53:46.746 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:53:46.746 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:53:46.747 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:53:46.747 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:53:46.748 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:53:46.748 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.5419ms
2025-07-30 11:53:46.749 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:53:46.749 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.6429 ms
2025-07-30 11:53:46.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3769 application/json; charset=utf-8 3.6729ms
2025-07-30 11:54:09.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:09.245 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:09.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 3.7627ms
2025-07-30 11:54:09.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:09.249 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:09.249 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:54:09.249 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:09.249 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 0.8373ms
2025-07-30 11:54:09.658 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:54:09.659 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:09.661 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:54:09.662 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:09.663 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 4.7861ms
2025-07-30 11:54:10.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:54:10.384 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:10.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6485ms
2025-07-30 11:54:10.386 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:54:10.387 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:10.387 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:10.387 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:54:10.389 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:54:11.020 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:54:11.020 +05:30 [INF] Role: Admin
2025-07-30 11:54:11.020 +05:30 [INF] Role: Admin
2025-07-30 11:54:11.020 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:54:11.023 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:54:11.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:54:11.023 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 636.0782ms
2025-07-30 11:54:11.023 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:11.024 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 636.8033 ms
2025-07-30 11:54:11.024 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 637.4971ms
2025-07-30 11:54:11.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:11.028 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:11.029 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.748ms
2025-07-30 11:54:11.031 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:11.031 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:11.031 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:11.032 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:11.032 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:11.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:54:11.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:54:11.043 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:11.044 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:11.045 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.2378ms
2025-07-30 11:54:11.046 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:11.046 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.4106 ms
2025-07-30 11:54:11.047 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 16.2289ms
2025-07-30 11:54:11.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:11.057 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:11.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.5023ms
2025-07-30 11:54:11.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:11.060 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:11.061 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:11.061 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:11.062 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:11.064 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:54:11.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:54:11.066 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:11.066 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:11.067 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.247ms
2025-07-30 11:54:11.067 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:11.067 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.7299 ms
2025-07-30 11:54:11.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.3254ms
2025-07-30 11:54:12.619 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:12.619 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:12.619 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:12.619 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:54:12.620 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:54:12.621 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:12.621 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.6323ms
2025-07-30 11:54:12.622 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:12.622 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.6424 ms
2025-07-30 11:54:12.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 3.4924ms
2025-07-30 11:54:25.365 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:25.365 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:25.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.5983ms
2025-07-30 11:54:25.367 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:25.367 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:25.368 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:54:25.368 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:25.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.1051ms
2025-07-30 11:54:27.567 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:54:27.567 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:27.568 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:54:27.568 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:27.568 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.368ms
2025-07-30 11:54:28.506 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:54:28.507 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:28.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5739ms
2025-07-30 11:54:28.509 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:54:28.509 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:28.509 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:28.509 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:54:28.517 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:54:29.133 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:54:29.133 +05:30 [INF] Role: Admin
2025-07-30 11:54:29.133 +05:30 [INF] Role: Admin
2025-07-30 11:54:29.133 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:54:29.139 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:54:29.140 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:54:29.140 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 630.6691ms
2025-07-30 11:54:29.140 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:29.141 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 631.4702 ms
2025-07-30 11:54:29.141 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 632.2281ms
2025-07-30 11:54:29.145 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:29.146 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:29.146 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8652ms
2025-07-30 11:54:29.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:29.148 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:29.149 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:29.149 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:29.149 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:29.152 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:54:29.156 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:54:29.156 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:29.156 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:29.157 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.8865ms
2025-07-30 11:54:29.158 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:29.158 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.6236 ms
2025-07-30 11:54:29.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.8234ms
2025-07-30 11:54:29.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:29.174 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:29.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0225ms
2025-07-30 11:54:29.182 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:29.183 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:29.183 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:29.184 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:29.185 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:29.187 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:54:29.188 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:54:29.188 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:29.189 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:29.189 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 4.8122ms
2025-07-30 11:54:29.189 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:29.189 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.1132 ms
2025-07-30 11:54:29.190 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.1926ms
2025-07-30 11:54:30.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:30.102 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:30.102 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:30.103 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:54:30.103 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:54:30.104 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:30.104 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.2539ms
2025-07-30 11:54:30.104 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:30.104 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.1654 ms
2025-07-30 11:54:30.105 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3775 application/json; charset=utf-8 2.8528ms
2025-07-30 11:54:37.598 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:37.600 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:37.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.542ms
2025-07-30 11:54:37.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:37.603 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:37.603 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 11:54:37.604 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:37.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.6699ms
2025-07-30 11:54:38.724 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 11:54:38.724 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:38.725 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 11:54:38.725 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 11:54:38.725 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3962ms
2025-07-30 11:54:39.640 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 11:54:39.640 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:39.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6647ms
2025-07-30 11:54:39.642 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 11:54:39.642 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:39.643 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:39.643 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 11:54:39.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 11:54:40.261 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 11:54:40.262 +05:30 [INF] Role: Admin
2025-07-30 11:54:40.262 +05:30 [INF] Role: Admin
2025-07-30 11:54:40.263 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 11:54:40.276 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 11:54:40.277 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 11:54:40.277 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 633.7593ms
2025-07-30 11:54:40.277 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 11:54:40.278 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 635.0233 ms
2025-07-30 11:54:40.278 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 635.9567ms
2025-07-30 11:54:40.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:40.283 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:40.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6654ms
2025-07-30 11:54:40.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 11:54:40.285 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:40.285 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:40.286 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:40.287 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:40.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 11:54:40.292 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 11:54:40.293 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:40.296 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:40.297 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.5535ms
2025-07-30 11:54:40.298 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:40.299 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.2463 ms
2025-07-30 11:54:40.299 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 14.5782ms
2025-07-30 11:54:40.305 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:40.305 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:40.306 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8114ms
2025-07-30 11:54:40.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 11:54:40.310 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:40.310 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:40.311 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 11:54:40.312 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 11:54:40.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 11:54:40.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 11:54:40.319 +05:30 [INF] Found 1 users among search
2025-07-30 11:54:40.319 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:40.320 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.8438ms
2025-07-30 11:54:40.320 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 11:54:40.320 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.2088 ms
2025-07-30 11:54:40.321 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.3237ms
2025-07-30 11:54:41.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 11:54:41.425 +05:30 [INF] CORS policy execution successful.
2025-07-30 11:54:41.426 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:41.426 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 11:54:41.427 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 11:54:41.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 11:54:41.428 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.2004ms
2025-07-30 11:54:41.428 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 11:54:41.428 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.4264 ms
2025-07-30 11:54:41.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 4.591ms
2025-07-30 12:13:50.605 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:13:50.606 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:13:50.607 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.7573ms
2025-07-30 12:13:50.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:13:50.617 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:13:50.618 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:13:50.618 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:13:50.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.4778ms
2025-07-30 12:14:25.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:14:25.389 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:14:25.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7448ms
2025-07-30 12:14:25.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:14:25.392 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:14:25.393 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:14:25.393 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:14:25.393 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.2377ms
2025-07-30 12:14:42.395 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:14:42.395 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:14:42.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.5628ms
2025-07-30 12:14:42.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:14:42.400 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:14:42.401 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:14:42.401 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:14:42.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.2774ms
2025-07-30 12:15:50.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:15:50.369 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:50.369 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.594ms
2025-07-30 12:15:50.372 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:15:50.373 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:50.373 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:15:50.373 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:15:50.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.5638ms
2025-07-30 12:15:53.238 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 12:15:53.239 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:53.239 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 12:15:53.239 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:15:53.239 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.6857ms
2025-07-30 12:15:54.188 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 12:15:54.189 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.189 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4038ms
2025-07-30 12:15:54.190 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 12:15:54.190 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.191 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:15:54.192 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 12:15:54.215 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 12:15:54.821 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 12:15:54.821 +05:30 [INF] Role: Admin
2025-07-30 12:15:54.821 +05:30 [INF] Role: Admin
2025-07-30 12:15:54.821 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 12:15:54.827 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 12:15:54.828 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 12:15:54.829 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 637.1385ms
2025-07-30 12:15:54.829 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:15:54.830 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 639.0758 ms
2025-07-30 12:15:54.830 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 639.904ms
2025-07-30 12:15:54.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:15:54.835 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6457ms
2025-07-30 12:15:54.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:15:54.838 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.838 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:54.838 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:15:54.839 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:15:54.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 12:15:54.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 12:15:54.846 +05:30 [INF] Found 1 users among search
2025-07-30 12:15:54.846 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:15:54.848 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.9914ms
2025-07-30 12:15:54.849 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:54.850 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.9803 ms
2025-07-30 12:15:54.851 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 13.7319ms
2025-07-30 12:15:54.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:15:54.859 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.859 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8483ms
2025-07-30 12:15:54.861 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:15:54.862 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:54.862 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:54.863 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:15:54.864 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:15:54.868 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 12:15:54.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 12:15:54.872 +05:30 [INF] Found 1 users among search
2025-07-30 12:15:54.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:15:54.872 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.9695ms
2025-07-30 12:15:54.872 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:54.873 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.4424 ms
2025-07-30 12:15:54.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.4992ms
2025-07-30 12:15:56.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:15:56.002 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:56.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.5783ms
2025-07-30 12:15:56.004 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:15:56.005 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:56.005 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:15:56.005 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 12:15:56.006 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 12:15:56.007 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:15:56.007 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.4766ms
2025-07-30 12:15:56.007 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:15:56.008 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.5996 ms
2025-07-30 12:15:56.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3772 application/json; charset=utf-8 3.298ms
2025-07-30 12:15:56.711 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:15:56.711 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:56.712 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.6807ms
2025-07-30 12:15:56.714 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:15:56.714 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:15:56.717 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:56.718 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:15:56.718 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:15:56.759 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 12:15:56.809 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 12:15:56.810 +05:30 [INF] Found 1 users among search
2025-07-30 12:15:56.810 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:15:56.810 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 92.2197ms
2025-07-30 12:15:56.810 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:15:56.811 +05:30 [INF] HTTP GET /api/user/search responded 200 in 93.8725 ms
2025-07-30 12:15:56.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 97.3638ms
2025-07-30 12:24:12.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:24:12.794 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:24:12.795 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 4.2046ms
2025-07-30 12:24:12.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:24:12.803 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:24:12.803 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:24:12.804 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:24:12.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.4018ms
2025-07-30 12:27:28.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:27:28.677 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:28.678 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.2178ms
2025-07-30 12:27:28.685 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:27:28.686 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:28.686 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:27:28.686 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:27:28.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.9677ms
2025-07-30 12:27:29.603 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 12:27:29.603 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:29.604 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 12:27:29.604 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:27:29.605 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6017ms
2025-07-30 12:27:30.345 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 12:27:30.346 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:30.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0406ms
2025-07-30 12:27:30.349 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 12:27:30.349 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:30.350 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:27:30.350 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 12:27:30.382 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 12:27:30.998 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 12:27:30.998 +05:30 [INF] Role: Admin
2025-07-30 12:27:30.998 +05:30 [INF] Role: Admin
2025-07-30 12:27:30.999 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 12:27:31.004 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 12:27:31.004 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 12:27:31.006 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 654.8365ms
2025-07-30 12:27:31.007 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:27:31.007 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 657.4003 ms
2025-07-30 12:27:31.008 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 658.9437ms
2025-07-30 12:27:31.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:27:31.014 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:31.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7298ms
2025-07-30 12:27:31.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:27:31.018 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:31.018 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:31.018 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:27:31.019 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:27:31.025 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 12:27:31.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 12:27:31.029 +05:30 [INF] Found 1 users among search
2025-07-30 12:27:31.031 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:27:31.031 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.9615ms
2025-07-30 12:27:31.032 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:31.032 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.1304 ms
2025-07-30 12:27:31.033 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.1599ms
2025-07-30 12:27:31.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:27:31.064 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:31.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.7198ms
2025-07-30 12:27:31.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:27:31.069 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:31.070 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:31.070 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:27:31.071 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:27:31.076 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 12:27:31.078 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 12:27:31.079 +05:30 [INF] Found 1 users among search
2025-07-30 12:27:31.080 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:27:31.080 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.6296ms
2025-07-30 12:27:31.080 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:31.081 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.9889 ms
2025-07-30 12:27:31.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 12.1647ms
2025-07-30 12:27:33.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:27:33.037 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:33.038 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:27:33.040 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 12:27:33.041 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 12:27:33.042 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:27:33.043 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.3341ms
2025-07-30 12:27:33.043 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:27:33.044 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 5.8380 ms
2025-07-30 12:27:33.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3770 application/json; charset=utf-8 8.176ms
2025-07-30 12:27:35.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:27:35.304 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:35.305 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.5909ms
2025-07-30 12:27:35.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:27:35.308 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:27:35.309 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:35.309 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:27:35.310 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:27:35.337 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 12:27:35.381 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 12:27:35.381 +05:30 [INF] Found 1 users among search
2025-07-30 12:27:35.382 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:27:35.382 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 72.5746ms
2025-07-30 12:27:35.382 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:27:35.382 +05:30 [INF] HTTP GET /api/user/search responded 200 in 73.7805 ms
2025-07-30 12:27:35.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 74.939ms
2025-07-30 12:31:15.879 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:31:15.879 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:15.880 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7181ms
2025-07-30 12:31:15.885 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:31:15.886 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:15.887 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:31:15.887 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:31:15.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.0544ms
2025-07-30 12:31:16.942 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 12:31:16.942 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:16.943 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 12:31:16.943 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:31:16.944 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9558ms
2025-07-30 12:31:18.440 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 12:31:18.441 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:18.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.4345ms
2025-07-30 12:31:18.444 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 12:31:18.444 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:18.445 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:31:18.445 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 12:31:18.463 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 12:31:19.082 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 12:31:19.083 +05:30 [INF] Role: Admin
2025-07-30 12:31:19.083 +05:30 [INF] Role: Admin
2025-07-30 12:31:19.083 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 12:31:19.087 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 12:31:19.088 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 12:31:19.089 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 643.947ms
2025-07-30 12:31:19.090 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:31:19.091 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 646.0637 ms
2025-07-30 12:31:19.092 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 647.8026ms
2025-07-30 12:31:19.098 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:31:19.098 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:19.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.0864ms
2025-07-30 12:31:19.101 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:31:19.101 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:19.102 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:19.102 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:31:19.103 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:31:19.109 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 12:31:19.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 12:31:19.113 +05:30 [INF] Found 1 users among search
2025-07-30 12:31:19.114 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:31:19.116 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.6391ms
2025-07-30 12:31:19.116 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:19.117 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.4190 ms
2025-07-30 12:31:19.119 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.2535ms
2025-07-30 12:31:19.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:31:19.154 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:19.155 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.8777ms
2025-07-30 12:31:19.159 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:31:19.159 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:19.160 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:19.161 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:31:19.162 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:31:19.165 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 12:31:19.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 12:31:19.167 +05:30 [INF] Found 1 users among search
2025-07-30 12:31:19.167 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:31:19.168 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6318ms
2025-07-30 12:31:19.168 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:19.168 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.1936 ms
2025-07-30 12:31:19.168 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.6768ms
2025-07-30 12:31:22.949 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:31:22.950 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:22.950 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.8969ms
2025-07-30 12:31:22.953 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:31:22.953 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:22.954 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:31:22.954 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 12:31:22.955 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 12:31:22.957 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:31:22.968 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 14.0326ms
2025-07-30 12:31:22.969 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:31:22.970 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 16.0925 ms
2025-07-30 12:31:22.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 17.3048ms
2025-07-30 12:31:24.162 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:31:24.163 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:24.163 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.5679ms
2025-07-30 12:31:24.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:31:24.166 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:31:24.167 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:24.167 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:31:24.168 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:31:24.214 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 12:31:24.254 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 12:31:24.255 +05:30 [INF] Found 1 users among search
2025-07-30 12:31:24.256 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:31:24.257 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 89.4904ms
2025-07-30 12:31:24.258 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:31:24.258 +05:30 [INF] HTTP GET /api/user/search responded 200 in 91.4012 ms
2025-07-30 12:31:24.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 92.6448ms
2025-07-30 12:33:54.272 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:33:54.274 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:54.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 3.4203ms
2025-07-30 12:33:54.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:33:54.280 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:54.281 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 12:33:54.282 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:33:54.283 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.1442ms
2025-07-30 12:33:55.046 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 12:33:55.046 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:55.047 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 12:33:55.047 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 12:33:55.048 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.987ms
2025-07-30 12:33:57.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 12:33:57.903 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:57.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5934ms
2025-07-30 12:33:57.905 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 12:33:57.906 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:57.906 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:33:57.906 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 12:33:57.925 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 12:33:58.772 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 12:33:58.772 +05:30 [INF] Role: Admin
2025-07-30 12:33:58.773 +05:30 [INF] Role: Admin
2025-07-30 12:33:58.773 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 12:33:58.779 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 12:33:58.779 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 12:33:58.779 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 872.7528ms
2025-07-30 12:33:58.780 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 12:33:58.780 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 873.5586 ms
2025-07-30 12:33:58.780 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 875.0234ms
2025-07-30 12:33:58.786 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:33:58.787 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:58.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9815ms
2025-07-30 12:33:58.789 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 12:33:58.790 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:58.790 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:33:58.791 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:33:58.791 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:33:58.794 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 12:33:58.799 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 12:33:58.802 +05:30 [INF] Found 1 users among search
2025-07-30 12:33:58.803 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:33:58.803 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.5463ms
2025-07-30 12:33:58.804 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:33:58.804 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.7952 ms
2025-07-30 12:33:58.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.0304ms
2025-07-30 12:33:58.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:33:58.827 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:58.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.3856ms
2025-07-30 12:33:58.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 12:33:58.831 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:33:58.832 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:33:58.834 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:33:58.834 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:33:58.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 12:33:58.838 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 12:33:58.839 +05:30 [INF] Found 1 users among search
2025-07-30 12:33:58.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:33:58.840 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8569ms
2025-07-30 12:33:58.841 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:33:58.841 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.1477 ms
2025-07-30 12:33:58.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.5982ms
2025-07-30 12:34:00.291 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:34:00.292 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:34:00.292 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.618ms
2025-07-30 12:34:00.294 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 12:34:00.294 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:34:00.295 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:34:00.295 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 12:34:00.296 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 12:34:00.297 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:34:00.297 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.5761ms
2025-07-30 12:34:00.298 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 12:34:00.298 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.9594 ms
2025-07-30 12:34:00.298 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 4.412ms
2025-07-30 12:34:01.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:34:01.182 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:34:01.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.6904ms
2025-07-30 12:34:01.185 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 12:34:01.186 +05:30 [INF] CORS policy execution successful.
2025-07-30 12:34:01.186 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:34:01.186 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 12:34:01.187 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 12:34:01.232 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 12:34:01.275 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 12:34:01.275 +05:30 [INF] Found 1 users among search
2025-07-30 12:34:01.276 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 12:34:01.276 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 89.2172ms
2025-07-30 12:34:01.276 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 12:34:01.277 +05:30 [INF] HTTP GET /api/user/search responded 200 in 90.4118 ms
2025-07-30 12:34:01.277 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 91.4851ms
2025-07-30 13:13:05.145 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:13:05.147 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:13:05.147 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.6806ms
2025-07-30 13:13:05.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:13:05.151 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:13:05.152 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 13:13:05.152 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 13:13:05.152 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.6306ms
2025-07-30 13:29:24.294 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 13:29:24.295 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:24.297 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 13:29:24.298 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 13:29:24.298 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.771ms
2025-07-30 13:29:26.196 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 13:29:26.197 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.197 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6987ms
2025-07-30 13:29:26.199 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 13:29:26.200 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.200 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 13:29:26.200 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 13:29:26.227 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 13:29:26.838 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 13:29:26.838 +05:30 [INF] Role: Admin
2025-07-30 13:29:26.839 +05:30 [INF] Role: Admin
2025-07-30 13:29:26.839 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 13:29:26.858 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 13:29:26.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 13:29:26.859 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 658.8352ms
2025-07-30 13:29:26.860 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 13:29:26.860 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 659.9477 ms
2025-07-30 13:29:26.860 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 660.9386ms
2025-07-30 13:29:26.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 13:29:26.866 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.867 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9203ms
2025-07-30 13:29:26.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 13:29:26.870 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.871 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:26.871 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 13:29:26.872 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 13:29:26.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 13:29:26.880 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 13:29:26.884 +05:30 [INF] Found 1 users among search
2025-07-30 13:29:26.884 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 13:29:26.885 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.697ms
2025-07-30 13:29:26.885 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:26.886 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.4679 ms
2025-07-30 13:29:26.886 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 17.2186ms
2025-07-30 13:29:26.927 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 13:29:26.928 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.928 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.8789ms
2025-07-30 13:29:26.936 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 13:29:26.937 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:26.939 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:26.939 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 13:29:26.940 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 13:29:26.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 13:29:26.946 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 13:29:26.947 +05:30 [INF] Found 1 users among search
2025-07-30 13:29:26.948 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 13:29:26.949 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.8318ms
2025-07-30 13:29:26.950 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:26.950 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.8599 ms
2025-07-30 13:29:26.951 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 14.8405ms
2025-07-30 13:29:28.067 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:29:28.068 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:28.068 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.6583ms
2025-07-30 13:29:28.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:29:28.071 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:28.071 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 13:29:28.072 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 13:29:28.072 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 13:29:28.074 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 13:29:28.076 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 3.7098ms
2025-07-30 13:29:28.077 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 13:29:28.077 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 5.8673 ms
2025-07-30 13:29:28.077 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3775 application/json; charset=utf-8 6.8341ms
2025-07-30 13:29:29.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 13:29:29.186 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:29.186 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.591ms
2025-07-30 13:29:29.188 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 13:29:29.189 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:29:29.189 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:29.190 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 13:29:29.190 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 13:29:29.238 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 13:29:29.283 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 13:29:29.284 +05:30 [INF] Found 1 users among search
2025-07-30 13:29:29.284 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 13:29:29.284 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 94.4045ms
2025-07-30 13:29:29.287 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 13:29:29.287 +05:30 [INF] HTTP GET /api/user/search responded 200 in 98.2612 ms
2025-07-30 13:29:29.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 508 application/json; charset=utf-8 99.6275ms
2025-07-30 13:30:13.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:30:13.530 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:30:13.531 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.0976ms
2025-07-30 13:30:13.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:30:13.534 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:30:13.535 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 13:30:13.536 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 13:30:13.537 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.8593ms
2025-07-30 13:46:24.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:46:24.613 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:46:24.614 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.9695ms
2025-07-30 13:46:24.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 13:46:24.617 +05:30 [INF] CORS policy execution successful.
2025-07-30 13:46:24.618 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 13:46:24.618 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 13:46:24.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.0682ms
2025-07-30 14:05:53.228 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:05:53.228 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:53.229 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:05:53.229 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:05:53.230 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2088ms
2025-07-30 14:05:55.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:05:55.210 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.210 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9912ms
2025-07-30 14:05:55.213 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:05:55.213 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.213 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:05:55.214 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:05:55.246 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:05:55.838 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:05:55.838 +05:30 [INF] Role: Admin
2025-07-30 14:05:55.838 +05:30 [INF] Role: Admin
2025-07-30 14:05:55.838 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:05:55.843 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:05:55.844 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:05:55.845 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 630.4981ms
2025-07-30 14:05:55.845 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:05:55.846 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 632.4401 ms
2025-07-30 14:05:55.846 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 633.406ms
2025-07-30 14:05:55.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:05:55.851 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4926ms
2025-07-30 14:05:55.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:05:55.854 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.855 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:55.856 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:05:55.857 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:05:55.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:05:55.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:05:55.867 +05:30 [INF] Found 1 users among search
2025-07-30 14:05:55.868 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:05:55.869 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.2762ms
2025-07-30 14:05:55.869 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:55.869 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.1062 ms
2025-07-30 14:05:55.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 15.7253ms
2025-07-30 14:05:55.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:05:55.902 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.902 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.2321ms
2025-07-30 14:05:55.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:05:55.907 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:55.908 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:55.909 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:05:55.909 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:05:55.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:05:55.913 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:05:55.914 +05:30 [INF] Found 1 users among search
2025-07-30 14:05:55.914 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:05:55.914 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.5824ms
2025-07-30 14:05:55.915 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:55.915 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.9203 ms
2025-07-30 14:05:55.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 8.7102ms
2025-07-30 14:05:56.974 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:05:56.975 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:56.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7162ms
2025-07-30 14:05:56.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:05:56.978 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:56.979 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:05:56.979 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:05:56.980 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:05:56.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:05:56.983 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 3.6282ms
2025-07-30 14:05:56.983 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:05:56.984 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.9396 ms
2025-07-30 14:05:56.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3775 application/json; charset=utf-8 6.746ms
2025-07-30 14:05:57.699 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:05:57.699 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:57.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.8804ms
2025-07-30 14:05:57.702 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:05:57.702 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:05:57.703 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:57.703 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:05:57.704 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:05:57.744 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:05:57.781 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:05:57.782 +05:30 [INF] Found 1 users among search
2025-07-30 14:05:57.782 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:05:57.783 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 79.2843ms
2025-07-30 14:05:57.783 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:05:57.784 +05:30 [INF] HTTP GET /api/user/search responded 200 in 80.7730 ms
2025-07-30 14:05:57.784 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 508 application/json; charset=utf-8 82.0299ms
2025-07-30 14:10:15.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:10:15.724 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:15.724 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7261ms
2025-07-30 14:10:15.728 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:10:15.728 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:15.729 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:10:15.729 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:10:15.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.7141ms
2025-07-30 14:10:17.598 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:10:17.598 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:17.599 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:10:17.599 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:10:17.599 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1055ms
2025-07-30 14:10:18.401 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:10:18.401 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:18.401 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7024ms
2025-07-30 14:10:18.403 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:10:18.403 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:18.403 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:10:18.403 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:10:18.422 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:10:19.004 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:10:19.004 +05:30 [INF] Role: Admin
2025-07-30 14:10:19.004 +05:30 [INF] Role: Admin
2025-07-30 14:10:19.004 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:10:19.014 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:10:19.015 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:10:19.015 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 611.3909ms
2025-07-30 14:10:19.015 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:10:19.015 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 612.3390 ms
2025-07-30 14:10:19.016 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 613.1532ms
2025-07-30 14:10:19.022 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:10:19.022 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:19.023 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9403ms
2025-07-30 14:10:19.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:10:19.027 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:19.027 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:19.027 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:10:19.028 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:10:19.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:10:19.034 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:10:19.034 +05:30 [INF] Found 1 users among search
2025-07-30 14:10:19.035 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:10:19.036 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.5286ms
2025-07-30 14:10:19.037 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:19.038 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.0222 ms
2025-07-30 14:10:19.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 508 application/json; charset=utf-8 13.454ms
2025-07-30 14:10:19.063 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:10:19.064 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:19.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.5166ms
2025-07-30 14:10:19.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:10:19.068 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:19.069 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:19.069 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:10:19.070 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:10:19.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:10:19.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:10:19.078 +05:30 [INF] Found 1 users among search
2025-07-30 14:10:19.078 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:10:19.079 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.514ms
2025-07-30 14:10:19.080 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:19.080 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.2002 ms
2025-07-30 14:10:19.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 508 application/json; charset=utf-8 12.7533ms
2025-07-30 14:10:21.237 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:10:21.237 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:21.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.0843ms
2025-07-30 14:10:21.241 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:10:21.242 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:21.243 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:10:21.243 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:10:21.244 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:10:21.245 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:10:21.245 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.7346ms
2025-07-30 14:10:21.245 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:10:21.246 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.9197 ms
2025-07-30 14:10:21.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 4.6403ms
2025-07-30 14:10:21.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:10:21.904 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:21.904 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7093ms
2025-07-30 14:10:21.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:10:21.906 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:10:21.907 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:21.907 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:10:21.908 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:10:21.939 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:10:21.974 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:10:21.980 +05:30 [INF] Found 1 users among search
2025-07-30 14:10:21.980 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:10:21.981 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 73.5594ms
2025-07-30 14:10:21.981 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:10:21.982 +05:30 [INF] HTTP GET /api/user/search responded 200 in 75.2799 ms
2025-07-30 14:10:21.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 508 application/json; charset=utf-8 76.6746ms
2025-07-30 14:12:06.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:12:06.556 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:06.557 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.8253ms
2025-07-30 14:12:06.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:12:06.572 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:06.573 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:12:06.574 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:12:06.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 6.7468ms
2025-07-30 14:12:07.353 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:12:07.354 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:07.355 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:12:07.355 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:12:07.356 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.5793ms
2025-07-30 14:12:09.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:12:09.182 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4299ms
2025-07-30 14:12:09.184 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:12:09.184 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.185 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:12:09.185 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:12:09.206 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:12:09.789 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:12:09.789 +05:30 [INF] Role: Admin
2025-07-30 14:12:09.789 +05:30 [INF] Role: Admin
2025-07-30 14:12:09.790 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:12:09.794 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:12:09.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:12:09.796 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 609.9844ms
2025-07-30 14:12:09.796 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:12:09.796 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 611.6203 ms
2025-07-30 14:12:09.797 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 613.2239ms
2025-07-30 14:12:09.803 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:12:09.803 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8922ms
2025-07-30 14:12:09.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:12:09.807 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.807 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:09.808 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:12:09.808 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:12:09.812 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:12:09.821 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:12:09.823 +05:30 [INF] Found 1 users among search
2025-07-30 14:12:09.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:12:09.824 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 16.1425ms
2025-07-30 14:12:09.825 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:09.825 +05:30 [INF] HTTP GET /api/user/search responded 200 in 17.7112 ms
2025-07-30 14:12:09.826 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 19.2543ms
2025-07-30 14:12:09.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:12:09.843 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.844 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.9366ms
2025-07-30 14:12:09.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:12:09.848 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:09.849 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:09.849 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:12:09.850 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:12:09.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:12:09.857 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:12:09.859 +05:30 [INF] Found 1 users among search
2025-07-30 14:12:09.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:12:09.861 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.6877ms
2025-07-30 14:12:09.861 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:09.862 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.9374 ms
2025-07-30 14:12:09.862 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 14.6129ms
2025-07-30 14:12:10.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:12:10.910 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:10.911 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:12:10.912 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:12:10.913 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:12:10.914 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:12:10.914 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.7835ms
2025-07-30 14:12:10.915 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:12:10.916 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.5952 ms
2025-07-30 14:12:10.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 6.9165ms
2025-07-30 14:12:11.739 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:12:11.739 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:11.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7181ms
2025-07-30 14:12:11.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:12:11.742 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:12:11.743 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:11.743 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:12:11.744 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:12:11.794 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:12:12.007 +05:30 [INF] Executed DbCommand (212ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:12:12.011 +05:30 [INF] Found 1 users among search
2025-07-30 14:12:12.013 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:12:12.014 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 270.1996ms
2025-07-30 14:12:12.016 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:12:12.016 +05:30 [INF] HTTP GET /api/user/search responded 200 in 273.3428 ms
2025-07-30 14:12:12.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 276.06ms
2025-07-30 14:13:41.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:13:41.474 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:13:41.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.4554ms
2025-07-30 14:13:41.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:13:41.488 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:13:41.488 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:13:41.489 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:13:41.490 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.603ms
2025-07-30 14:14:06.443 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:14:06.443 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:06.445 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.9737ms
2025-07-30 14:14:06.470 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:14:06.471 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:06.472 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:14:06.473 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:14:06.476 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 5.5986ms
2025-07-30 14:14:10.790 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:14:10.790 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:10.791 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:14:10.791 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:14:10.791 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3197ms
2025-07-30 14:14:12.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:14:12.597 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:12.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0087ms
2025-07-30 14:14:12.600 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:14:12.601 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:12.601 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:14:12.601 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:14:12.618 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:14:13.458 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:14:13.459 +05:30 [INF] Role: Admin
2025-07-30 14:14:13.459 +05:30 [INF] Role: Admin
2025-07-30 14:14:13.459 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:14:13.468 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:14:13.469 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:14:13.469 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 867.7561ms
2025-07-30 14:14:13.470 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:14:13.470 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 868.9071 ms
2025-07-30 14:14:13.470 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 870.07ms
2025-07-30 14:14:13.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:14:13.477 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:13.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7433ms
2025-07-30 14:14:13.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:14:13.481 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:13.482 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:13.482 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:14:13.483 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:14:13.487 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:14:13.491 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:14:13.493 +05:30 [INF] Found 1 users among search
2025-07-30 14:14:13.494 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:14:13.495 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.4241ms
2025-07-30 14:14:13.496 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:13.497 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.7190 ms
2025-07-30 14:14:13.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 17.8207ms
2025-07-30 14:14:13.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:14:13.534 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:13.535 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 5.5952ms
2025-07-30 14:14:13.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:14:13.548 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:13.548 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:13.549 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:14:13.549 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:14:13.556 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:14:13.564 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:14:13.564 +05:30 [INF] Found 1 users among search
2025-07-30 14:14:13.564 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:14:13.565 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 15.7746ms
2025-07-30 14:14:13.565 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:13.565 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.7388 ms
2025-07-30 14:14:13.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 17.9006ms
2025-07-30 14:14:14.815 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:14:14.815 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:14.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.0589ms
2025-07-30 14:14:14.818 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:14:14.819 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:14.819 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:14:14.820 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:14:14.821 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:14:14.822 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:14:14.822 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.1035ms
2025-07-30 14:14:14.823 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:14:14.823 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 3.4765 ms
2025-07-30 14:14:14.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 5.0073ms
2025-07-30 14:14:15.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:14:15.751 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:15.751 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.0817ms
2025-07-30 14:14:15.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:14:15.754 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:14:15.754 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:15.755 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:14:15.755 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:14:15.789 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:14:15.822 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:14:15.823 +05:30 [INF] Found 1 users among search
2025-07-30 14:14:15.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:14:15.824 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 68.9524ms
2025-07-30 14:14:15.824 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:14:15.824 +05:30 [INF] HTTP GET /api/user/search responded 200 in 70.1128 ms
2025-07-30 14:14:15.825 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 71.3308ms
2025-07-30 14:19:13.526 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:19:13.529 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:13.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 3.2173ms
2025-07-30 14:19:13.537 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:19:13.538 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:13.539 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:19:13.539 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:19:13.540 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.5137ms
2025-07-30 14:19:14.617 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:19:14.617 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:14.618 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:19:14.619 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:19:14.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.4539ms
2025-07-30 14:19:15.781 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:19:15.781 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:15.782 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.3151ms
2025-07-30 14:19:15.784 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:19:15.784 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:15.785 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:19:15.785 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:19:15.810 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:19:16.403 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:19:16.403 +05:30 [INF] Role: Admin
2025-07-30 14:19:16.403 +05:30 [INF] Role: Admin
2025-07-30 14:19:16.403 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:19:16.408 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:19:16.409 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:19:16.409 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 623.9465ms
2025-07-30 14:19:16.410 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:19:16.410 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 625.2519 ms
2025-07-30 14:19:16.410 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 626.1001ms
2025-07-30 14:19:16.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:19:16.417 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:16.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7689ms
2025-07-30 14:19:16.420 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:19:16.421 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:16.422 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:16.422 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:19:16.423 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:19:16.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:19:16.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:19:16.435 +05:30 [INF] Found 1 users among search
2025-07-30 14:19:16.435 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:19:16.436 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.8872ms
2025-07-30 14:19:16.437 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:16.437 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.9135 ms
2025-07-30 14:19:16.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.1932ms
2025-07-30 14:19:16.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:19:16.461 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:16.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.9971ms
2025-07-30 14:19:16.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:19:16.468 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:16.469 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:16.471 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:19:16.472 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:19:16.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:19:16.477 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:19:16.478 +05:30 [INF] Found 1 users among search
2025-07-30 14:19:16.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:19:16.479 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.1601ms
2025-07-30 14:19:16.479 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:16.480 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.8031 ms
2025-07-30 14:19:16.480 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 12.5313ms
2025-07-30 14:19:17.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:19:17.794 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:17.795 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:19:17.795 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:19:17.796 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:19:17.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:19:17.799 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.9408ms
2025-07-30 14:19:17.799 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:19:17.799 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.7467 ms
2025-07-30 14:19:17.800 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3773 application/json; charset=utf-8 6.6508ms
2025-07-30 14:19:18.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:19:18.833 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:18.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.0738ms
2025-07-30 14:19:18.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:19:18.836 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:19:18.837 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:18.837 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:19:18.838 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:19:18.864 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:19:18.913 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:19:18.914 +05:30 [INF] Found 1 users among search
2025-07-30 14:19:18.914 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:19:18.915 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 77.3361ms
2025-07-30 14:19:18.915 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:19:18.916 +05:30 [INF] HTTP GET /api/user/search responded 200 in 79.0469 ms
2025-07-30 14:19:18.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 80.1116ms
2025-07-30 14:21:03.984 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:21:03.986 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:03.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 3.4511ms
2025-07-30 14:21:04.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:21:04.015 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:04.017 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:21:04.017 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:21:04.017 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 5.5812ms
2025-07-30 14:21:05.193 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:21:05.194 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:05.194 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:21:05.194 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:21:05.195 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1602ms
2025-07-30 14:21:06.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:21:06.765 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:06.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4444ms
2025-07-30 14:21:06.767 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:21:06.767 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:06.768 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:21:06.768 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:21:06.783 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:21:07.374 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:21:07.374 +05:30 [INF] Role: Admin
2025-07-30 14:21:07.374 +05:30 [INF] Role: Admin
2025-07-30 14:21:07.378 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:21:07.383 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:21:07.384 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:21:07.384 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 616.2411ms
2025-07-30 14:21:07.384 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:21:07.384 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 616.9928 ms
2025-07-30 14:21:07.385 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 617.732ms
2025-07-30 14:21:07.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:21:07.392 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:07.393 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8809ms
2025-07-30 14:21:07.396 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:21:07.396 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:07.397 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:07.398 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:21:07.399 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:21:07.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:21:07.407 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:21:07.409 +05:30 [INF] Found 1 users among search
2025-07-30 14:21:07.410 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:21:07.412 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.6211ms
2025-07-30 14:21:07.412 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:07.413 +05:30 [INF] HTTP GET /api/user/search responded 200 in 16.3491 ms
2025-07-30 14:21:07.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.6402ms
2025-07-30 14:21:07.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:21:07.435 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:07.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.3575ms
2025-07-30 14:21:07.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:21:07.438 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:07.439 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:07.440 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:21:07.441 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:21:07.444 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:21:07.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:21:07.447 +05:30 [INF] Found 1 users among search
2025-07-30 14:21:07.447 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:21:07.448 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.1923ms
2025-07-30 14:21:07.448 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:07.449 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.6492 ms
2025-07-30 14:21:07.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 10.8642ms
2025-07-30 14:21:08.639 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:21:08.640 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:08.641 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:21:08.643 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:21:08.644 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:21:08.646 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:21:08.646 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.8381ms
2025-07-30 14:21:08.647 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:21:08.647 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 6.5465 ms
2025-07-30 14:21:08.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3775 application/json; charset=utf-8 8.3648ms
2025-07-30 14:21:09.419 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:21:09.420 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:09.420 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.9098ms
2025-07-30 14:21:09.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:21:09.423 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:09.424 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:09.424 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:21:09.425 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:21:09.466 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:21:09.501 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:21:09.502 +05:30 [INF] Found 1 users among search
2025-07-30 14:21:09.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:21:09.503 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 77.905ms
2025-07-30 14:21:09.503 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:09.504 +05:30 [INF] HTTP GET /api/user/search responded 200 in 79.7787 ms
2025-07-30 14:21:09.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 81.923ms
2025-07-30 14:21:56.615 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:21:56.615 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:56.616 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.851ms
2025-07-30 14:21:56.618 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:21:56.618 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:21:56.618 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:56.619 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:21:56.619 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:21:56.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:21:56.627 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:21:56.628 +05:30 [INF] Found 1 users among search
2025-07-30 14:21:56.628 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:21:56.629 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.7271ms
2025-07-30 14:21:56.629 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:21:56.629 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.7398 ms
2025-07-30 14:21:56.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 11.8882ms
2025-07-30 14:35:43.522 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:35:43.523 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:35:43.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.8606ms
2025-07-30 14:35:43.526 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:35:43.527 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:35:43.528 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:35:43.528 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:35:43.529 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:35:43.597 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:35:43.650 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:35:43.651 +05:30 [INF] Found 1 users among search
2025-07-30 14:35:43.652 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:35:43.653 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 124.4564ms
2025-07-30 14:35:43.653 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:35:43.653 +05:30 [INF] HTTP GET /api/user/search responded 200 in 126.0294 ms
2025-07-30 14:35:43.654 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 128.0393ms
2025-07-30 14:38:30.500 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:38:30.501 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:38:30.501 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.766ms
2025-07-30 14:38:30.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:38:30.503 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:38:30.504 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:38:30.504 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:38:30.505 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:38:30.560 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:38:30.599 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:38:30.599 +05:30 [INF] Found 1 users among search
2025-07-30 14:38:30.600 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:38:30.600 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 95.7085ms
2025-07-30 14:38:30.600 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:38:30.600 +05:30 [INF] HTTP GET /api/user/search responded 200 in 96.8246 ms
2025-07-30 14:38:30.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 97.6722ms
2025-07-30 14:44:12.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:44:12.723 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:44:12.723 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7367ms
2025-07-30 14:44:12.730 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:44:12.733 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:44:12.733 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:44:12.734 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:44:12.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.2721ms
2025-07-30 14:46:14.379 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:46:14.380 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:14.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.5546ms
2025-07-30 14:46:14.388 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:46:14.389 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:14.390 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 14:46:14.390 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:46:14.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.9123ms
2025-07-30 14:46:14.815 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 14:46:14.816 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:14.817 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 14:46:14.817 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 14:46:14.817 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.8822ms
2025-07-30 14:46:16.116 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 14:46:16.117 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.117 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5519ms
2025-07-30 14:46:16.119 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 14:46:16.119 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.120 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:46:16.120 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 14:46:16.143 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 14:46:16.693 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 14:46:16.693 +05:30 [INF] Role: Admin
2025-07-30 14:46:16.693 +05:30 [INF] Role: Admin
2025-07-30 14:46:16.693 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 14:46:16.698 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 14:46:16.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 14:46:16.699 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 579.5138ms
2025-07-30 14:46:16.700 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 14:46:16.700 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 580.4988 ms
2025-07-30 14:46:16.700 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 581.3331ms
2025-07-30 14:46:16.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:46:16.706 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.706 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7686ms
2025-07-30 14:46:16.708 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 14:46:16.709 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.709 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:16.709 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:46:16.710 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:46:16.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 14:46:16.720 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 14:46:16.722 +05:30 [INF] Found 1 users among search
2025-07-30 14:46:16.723 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:46:16.724 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.0661ms
2025-07-30 14:46:16.724 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:16.725 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.7458 ms
2025-07-30 14:46:16.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 16.9781ms
2025-07-30 14:46:16.747 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:46:16.748 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.749 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.5519ms
2025-07-30 14:46:16.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 14:46:16.755 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:16.756 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:16.756 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:46:16.759 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:46:16.764 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 14:46:16.768 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 14:46:16.769 +05:30 [INF] Found 1 users among search
2025-07-30 14:46:16.769 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:46:16.770 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.0569ms
2025-07-30 14:46:16.770 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:16.771 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.8280 ms
2025-07-30 14:46:16.772 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 18.3872ms
2025-07-30 14:46:29.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:46:29.728 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:29.729 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.9898ms
2025-07-30 14:46:29.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 14:46:29.733 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:29.734 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:46:29.735 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 14:46:29.735 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 14:46:29.736 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:46:29.737 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.5882ms
2025-07-30 14:46:29.737 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 14:46:29.737 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 3.5176 ms
2025-07-30 14:46:29.738 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 5.2724ms
2025-07-30 14:46:30.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:46:30.465 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:30.465 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7025ms
2025-07-30 14:46:30.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:46:30.468 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:46:30.469 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:30.469 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:46:30.470 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:46:30.507 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:46:30.539 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:46:30.539 +05:30 [INF] Found 1 users among search
2025-07-30 14:46:30.540 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:46:30.540 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 70.786ms
2025-07-30 14:46:30.540 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:46:30.541 +05:30 [INF] HTTP GET /api/user/search responded 200 in 72.2953 ms
2025-07-30 14:46:30.542 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 74.1744ms
2025-07-30 14:50:59.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:50:59.384 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:50:59.384 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7354ms
2025-07-30 14:50:59.386 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 14:50:59.387 +05:30 [INF] CORS policy execution successful.
2025-07-30 14:50:59.387 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:50:59.387 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 14:50:59.389 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 14:50:59.445 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 14:50:59.485 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 14:50:59.485 +05:30 [INF] Found 1 users among search
2025-07-30 14:50:59.486 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 14:50:59.486 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 98.3132ms
2025-07-30 14:50:59.486 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 14:50:59.487 +05:30 [INF] HTTP GET /api/user/search responded 200 in 99.3603 ms
2025-07-30 14:50:59.487 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 100.4188ms
2025-07-30 15:56:18.772 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 15:56:18.774 +05:30 [INF] CORS policy execution successful.
2025-07-30 15:56:18.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 3.3327ms
2025-07-30 15:56:18.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 15:56:18.800 +05:30 [INF] CORS policy execution successful.
2025-07-30 15:56:18.801 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 15:56:18.803 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 15:56:18.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.3021ms
2025-07-30 16:05:20.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:05:20.693 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:20.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 5.6286ms
2025-07-30 16:05:20.706 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:05:20.706 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:20.707 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:05:20.708 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:05:20.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.2087ms
2025-07-30 16:05:21.562 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 16:05:21.562 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:21.563 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 16:05:21.563 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:05:21.564 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7639ms
2025-07-30 16:05:23.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 16:05:23.175 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1717ms
2025-07-30 16:05:23.177 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 16:05:23.177 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.178 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:05:23.184 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 16:05:23.219 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 16:05:23.795 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 16:05:23.795 +05:30 [INF] Role: Admin
2025-07-30 16:05:23.795 +05:30 [INF] Role: Admin
2025-07-30 16:05:23.795 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 16:05:23.801 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 16:05:23.802 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 16:05:23.803 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 618.8785ms
2025-07-30 16:05:23.803 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:05:23.803 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 625.6175 ms
2025-07-30 16:05:23.804 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 626.8986ms
2025-07-30 16:05:23.809 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:05:23.809 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.594ms
2025-07-30 16:05:23.812 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:05:23.812 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.813 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:23.813 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:05:23.814 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:05:23.818 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 16:05:23.825 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 16:05:23.826 +05:30 [INF] Found 1 users among search
2025-07-30 16:05:23.827 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:05:23.827 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.4732ms
2025-07-30 16:05:23.828 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:23.829 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.6961 ms
2025-07-30 16:05:23.830 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.068ms
2025-07-30 16:05:23.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:05:23.859 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.6736ms
2025-07-30 16:05:23.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:05:23.864 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:23.865 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:23.865 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:05:23.867 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:05:23.870 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 16:05:23.873 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 16:05:23.874 +05:30 [INF] Found 1 users among search
2025-07-30 16:05:23.875 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:05:23.875 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.1302ms
2025-07-30 16:05:23.876 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:23.876 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.2285 ms
2025-07-30 16:05:23.876 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 12.4101ms
2025-07-30 16:05:24.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:05:24.997 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:24.998 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:05:24.998 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 16:05:24.999 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 16:05:25.002 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:05:25.002 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 3.4329ms
2025-07-30 16:05:25.002 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:05:25.003 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.8109 ms
2025-07-30 16:05:25.003 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 6.3651ms
2025-07-30 16:05:25.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:05:25.776 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:25.776 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.5114ms
2025-07-30 16:05:25.778 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:05:25.778 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:05:25.779 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:25.779 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:05:25.780 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:05:25.807 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:05:25.838 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:05:25.838 +05:30 [INF] Found 1 users among search
2025-07-30 16:05:25.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:05:25.840 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 60.7456ms
2025-07-30 16:05:25.841 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:05:25.842 +05:30 [INF] HTTP GET /api/user/search responded 200 in 62.7707 ms
2025-07-30 16:05:25.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 64.084ms
2025-07-30 16:06:36.280 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:06:36.281 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:06:36.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.9715ms
2025-07-30 16:06:36.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:06:36.283 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:06:36.283 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:06:36.284 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:06:36.284 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:06:36.334 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:06:36.378 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:06:36.378 +05:30 [INF] Found 1 users among search
2025-07-30 16:06:36.378 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:06:36.378 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 94.454ms
2025-07-30 16:06:36.378 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:06:36.380 +05:30 [INF] HTTP GET /api/user/search responded 200 in 96.6386 ms
2025-07-30 16:06:36.381 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 97.8997ms
2025-07-30 16:13:12.814 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:13:12.815 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:12.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.5893ms
2025-07-30 16:13:12.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:13:12.906 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:12.906 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:13:12.907 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:13:12.907 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.6736ms
2025-07-30 16:13:16.351 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 16:13:16.351 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:16.351 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 16:13:16.351 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:13:16.351 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9164ms
2025-07-30 16:13:17.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 16:13:17.716 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:17.717 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1857ms
2025-07-30 16:13:17.720 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 16:13:17.721 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:17.722 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:13:17.722 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 16:13:17.753 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 16:13:18.340 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 16:13:18.341 +05:30 [INF] Role: Admin
2025-07-30 16:13:18.341 +05:30 [INF] Role: Admin
2025-07-30 16:13:18.341 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 16:13:18.349 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 16:13:18.350 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 16:13:18.350 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 627.6396ms
2025-07-30 16:13:18.351 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:13:18.351 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 629.5120 ms
2025-07-30 16:13:18.351 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 631.3378ms
2025-07-30 16:13:18.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:13:18.357 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:18.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7959ms
2025-07-30 16:13:18.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:13:18.361 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:18.362 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:18.362 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:13:18.363 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:13:18.374 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 16:13:18.381 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 16:13:18.382 +05:30 [INF] Found 1 users among search
2025-07-30 16:13:18.382 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:13:18.383 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 20.6942ms
2025-07-30 16:13:18.383 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:18.384 +05:30 [INF] HTTP GET /api/user/search responded 200 in 22.3261 ms
2025-07-30 16:13:18.385 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 24.5692ms
2025-07-30 16:13:18.419 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:13:18.421 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:18.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 4.3005ms
2025-07-30 16:13:18.434 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:13:18.434 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:18.435 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:18.436 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:13:18.437 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:13:18.440 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 16:13:18.445 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 16:13:18.446 +05:30 [INF] Found 1 users among search
2025-07-30 16:13:18.447 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:13:18.448 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.6505ms
2025-07-30 16:13:18.448 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:18.449 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.7348 ms
2025-07-30 16:13:18.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 15.9281ms
2025-07-30 16:13:19.538 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:13:19.538 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:19.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.8509ms
2025-07-30 16:13:19.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:13:19.543 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:19.543 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:13:19.544 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 16:13:19.545 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 16:13:19.546 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:13:19.546 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.2978ms
2025-07-30 16:13:19.547 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:13:19.547 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 3.7300 ms
2025-07-30 16:13:19.548 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 5.4375ms
2025-07-30 16:13:20.280 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:13:20.280 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:20.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.705ms
2025-07-30 16:13:20.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:13:20.284 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:13:20.284 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:20.284 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:13:20.285 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:13:20.320 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:13:20.356 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:13:20.357 +05:30 [INF] Found 1 users among search
2025-07-30 16:13:20.357 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:13:20.358 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 73.6081ms
2025-07-30 16:13:20.358 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:13:20.359 +05:30 [INF] HTTP GET /api/user/search responded 200 in 74.9294 ms
2025-07-30 16:13:20.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 76.0931ms
2025-07-30 16:16:17.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:16:17.707 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:17.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.3157ms
2025-07-30 16:16:17.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:16:17.712 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:17.714 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:16:17.715 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:16:17.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.9632ms
2025-07-30 16:16:18.786 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 16:16:18.787 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:18.787 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 16:16:18.788 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:16:18.788 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.504ms
2025-07-30 16:16:20.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 16:16:20.290 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:20.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.943ms
2025-07-30 16:16:20.292 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 16:16:20.292 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:20.293 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:16:20.293 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 16:16:20.312 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 16:16:20.900 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 16:16:20.901 +05:30 [INF] Role: Admin
2025-07-30 16:16:20.901 +05:30 [INF] Role: Admin
2025-07-30 16:16:20.901 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 16:16:20.909 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 16:16:20.910 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 16:16:20.910 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 616.8445ms
2025-07-30 16:16:20.910 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:16:20.910 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 617.8755 ms
2025-07-30 16:16:20.911 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 618.7763ms
2025-07-30 16:16:20.992 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:16:20.992 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:20.993 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9662ms
2025-07-30 16:16:20.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:16:20.997 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:20.998 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:20.999 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:16:21.000 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:16:21.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 16:16:21.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 16:16:21.006 +05:30 [INF] Found 1 users among search
2025-07-30 16:16:21.006 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:16:21.006 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.0616ms
2025-07-30 16:16:21.007 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:21.007 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.7724 ms
2025-07-30 16:16:21.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 13.8938ms
2025-07-30 16:16:21.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:16:21.021 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:21.021 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.7317ms
2025-07-30 16:16:21.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:16:21.024 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:21.024 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:21.025 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:16:21.026 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:16:21.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 16:16:21.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 16:16:21.030 +05:30 [INF] Found 1 users among search
2025-07-30 16:16:21.031 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:16:21.031 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8938ms
2025-07-30 16:16:21.031 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:21.031 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.0224 ms
2025-07-30 16:16:21.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.8677ms
2025-07-30 16:16:22.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:16:22.103 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:22.103 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:16:22.104 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 16:16:22.106 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 16:16:22.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:16:22.108 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 3.8271ms
2025-07-30 16:16:22.109 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:16:22.110 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 6.3249 ms
2025-07-30 16:16:22.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 8.6261ms
2025-07-30 16:16:22.780 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:16:22.781 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:22.781 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7244ms
2025-07-30 16:16:22.783 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:16:22.784 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:16:22.784 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:22.785 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:16:22.785 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:16:22.819 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:16:22.860 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:16:22.861 +05:30 [INF] Found 1 users among search
2025-07-30 16:16:22.862 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:16:22.863 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 77.8823ms
2025-07-30 16:16:22.863 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:16:22.863 +05:30 [INF] HTTP GET /api/user/search responded 200 in 79.1345 ms
2025-07-30 16:16:22.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 80.5536ms
2025-07-30 16:21:34.666 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:21:34.667 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:21:34.667 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.9113ms
2025-07-30 16:21:34.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:21:34.680 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:21:34.680 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:21:34.681 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:21:34.681 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.1275ms
2025-07-30 16:25:05.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:25:05.686 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:05.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.2288ms
2025-07-30 16:25:05.699 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:25:05.700 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:05.700 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:25:05.700 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:25:05.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.2682ms
2025-07-30 16:25:18.665 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 16:25:18.665 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:18.666 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 16:25:18.666 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:25:18.666 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.076ms
2025-07-30 16:25:20.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 16:25:20.142 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.143 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4947ms
2025-07-30 16:25:20.145 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 16:25:20.146 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.146 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:25:20.146 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 16:25:20.172 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 16:25:20.780 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 16:25:20.780 +05:30 [INF] Role: Admin
2025-07-30 16:25:20.780 +05:30 [INF] Role: Admin
2025-07-30 16:25:20.780 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 16:25:20.787 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 16:25:20.788 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 16:25:20.788 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 642.0272ms
2025-07-30 16:25:20.788 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:25:20.789 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 642.6837 ms
2025-07-30 16:25:20.789 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 643.3769ms
2025-07-30 16:25:20.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:25:20.794 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.794 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5673ms
2025-07-30 16:25:20.796 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:25:20.796 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.797 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:20.797 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:25:20.798 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:25:20.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 16:25:20.805 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 16:25:20.806 +05:30 [INF] Found 1 users among search
2025-07-30 16:25:20.806 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:25:20.809 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.2334ms
2025-07-30 16:25:20.811 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:20.811 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.1090 ms
2025-07-30 16:25:20.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.507ms
2025-07-30 16:25:20.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:25:20.833 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.3407ms
2025-07-30 16:25:20.839 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:25:20.840 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:20.840 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:20.841 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:25:20.841 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:25:20.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 16:25:20.848 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 16:25:20.848 +05:30 [INF] Found 1 users among search
2025-07-30 16:25:20.848 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:25:20.849 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.6894ms
2025-07-30 16:25:20.849 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:20.849 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.8410 ms
2025-07-30 16:25:20.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 10.2698ms
2025-07-30 16:25:22.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:25:22.288 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:22.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.1302ms
2025-07-30 16:25:22.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:25:22.292 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:22.294 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:25:22.294 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 16:25:22.295 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 16:25:22.296 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:25:22.297 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.1258ms
2025-07-30 16:25:22.297 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:25:22.297 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 3.6465 ms
2025-07-30 16:25:22.298 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3769 application/json; charset=utf-8 6.8097ms
2025-07-30 16:25:22.883 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:25:22.883 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:22.884 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.9097ms
2025-07-30 16:25:22.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:25:22.886 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:25:22.887 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:22.887 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:25:22.888 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:25:22.925 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:25:22.966 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:25:22.966 +05:30 [INF] Found 1 users among search
2025-07-30 16:25:22.967 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:25:22.967 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 80.0553ms
2025-07-30 16:25:22.971 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:25:22.971 +05:30 [INF] HTTP GET /api/user/search responded 200 in 84.5884 ms
2025-07-30 16:25:22.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 86.722ms
2025-07-30 16:26:07.864 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:26:07.865 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:07.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.6655ms
2025-07-30 16:26:07.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:26:07.897 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:07.898 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:26:07.899 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:26:07.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 7.0708ms
2025-07-30 16:26:09.287 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 16:26:09.288 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:09.288 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 16:26:09.288 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:26:09.289 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5352ms
2025-07-30 16:26:11.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 16:26:11.125 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.125 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4468ms
2025-07-30 16:26:11.127 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 16:26:11.127 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.128 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:26:11.128 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 16:26:11.148 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 16:26:11.917 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 16:26:11.918 +05:30 [INF] Role: Admin
2025-07-30 16:26:11.918 +05:30 [INF] Role: Admin
2025-07-30 16:26:11.918 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 16:26:11.926 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 16:26:11.926 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 16:26:11.927 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 798.5074ms
2025-07-30 16:26:11.927 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 16:26:11.927 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 799.9309 ms
2025-07-30 16:26:11.928 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 800.8088ms
2025-07-30 16:26:11.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:26:11.933 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.934 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7199ms
2025-07-30 16:26:11.935 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 16:26:11.936 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.937 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:11.937 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:26:11.938 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:26:11.941 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 16:26:11.944 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 16:26:11.945 +05:30 [INF] Found 1 users among search
2025-07-30 16:26:11.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:26:11.949 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.9069ms
2025-07-30 16:26:11.949 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:11.949 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.3156 ms
2025-07-30 16:26:11.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 14.2251ms
2025-07-30 16:26:11.974 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:26:11.975 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.1085ms
2025-07-30 16:26:11.992 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 16:26:11.993 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:11.994 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:11.994 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:26:11.995 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:26:12.009 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 16:26:12.019 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 16:26:12.020 +05:30 [INF] Found 1 users among search
2025-07-30 16:26:12.020 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:26:12.021 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 26.7192ms
2025-07-30 16:26:12.021 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:12.023 +05:30 [INF] HTTP GET /api/user/search responded 200 in 29.6416 ms
2025-07-30 16:26:12.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 31.5353ms
2025-07-30 16:26:12.906 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:26:12.906 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:12.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.2711ms
2025-07-30 16:26:12.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:26:12.911 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:12.911 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:26:12.914 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 16:26:12.915 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 16:26:12.916 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:26:12.916 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.1124ms
2025-07-30 16:26:12.917 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 16:26:12.917 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 5.9875 ms
2025-07-30 16:26:12.918 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3775 application/json; charset=utf-8 8.4609ms
2025-07-30 16:26:13.889 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:26:13.889 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:13.890 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7354ms
2025-07-30 16:26:13.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 16:26:13.892 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:26:13.893 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:13.893 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 16:26:13.894 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 16:26:13.926 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 16:26:13.958 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 16:26:13.958 +05:30 [INF] Found 1 users among search
2025-07-30 16:26:13.959 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 16:26:13.959 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 65.4317ms
2025-07-30 16:26:13.959 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 16:26:13.960 +05:30 [INF] HTTP GET /api/user/search responded 200 in 66.8857 ms
2025-07-30 16:26:13.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 68.1126ms
2025-07-30 16:46:30.587 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:46:30.588 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:46:30.588 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.6958ms
2025-07-30 16:46:30.593 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:46:30.596 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:46:30.597 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:46:30.597 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:46:30.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.7035ms
2025-07-30 16:58:23.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:58:23.532 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:58:23.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.9843ms
2025-07-30 16:58:23.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:58:23.543 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:58:23.543 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:58:23.545 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:58:23.545 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.0376ms
2025-07-30 16:59:15.546 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:59:15.546 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:59:15.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.1839ms
2025-07-30 16:59:15.554 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 16:59:15.555 +05:30 [INF] CORS policy execution successful.
2025-07-30 16:59:15.556 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 16:59:15.556 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 16:59:15.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.4849ms
2025-07-30 17:00:29.367 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:00:29.367 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:29.368 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.6433ms
2025-07-30 17:00:29.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:00:29.376 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:29.378 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:00:29.379 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:00:29.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.8132ms
2025-07-30 17:00:30.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:00:30.345 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:30.346 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:00:30.346 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:00:30.346 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1757ms
2025-07-30 17:00:31.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:00:31.759 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:31.759 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4982ms
2025-07-30 17:00:31.761 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:00:31.761 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:31.761 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:00:31.762 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:00:31.793 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:00:32.372 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:00:32.372 +05:30 [INF] Role: Admin
2025-07-30 17:00:32.373 +05:30 [INF] Role: Admin
2025-07-30 17:00:32.373 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:00:32.379 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:00:32.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:00:32.381 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 619.0129ms
2025-07-30 17:00:32.381 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:00:32.381 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 620.0967 ms
2025-07-30 17:00:32.382 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 620.8932ms
2025-07-30 17:00:32.387 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:00:32.387 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:32.388 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.4988ms
2025-07-30 17:00:32.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:00:32.390 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:32.391 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:00:32.391 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:00:32.392 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:00:32.396 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:00:32.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:00:32.401 +05:30 [INF] Found 1 users among search
2025-07-30 17:00:32.402 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:00:32.404 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.3595ms
2025-07-30 17:00:32.405 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:00:32.406 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.6770 ms
2025-07-30 17:00:32.407 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 17.146ms
2025-07-30 17:00:32.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:00:32.438 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:32.438 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 3.8886ms
2025-07-30 17:00:32.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:00:32.443 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:32.444 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:00:32.445 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:00:32.446 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:00:32.451 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:00:32.454 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:00:32.454 +05:30 [INF] Found 1 users among search
2025-07-30 17:00:32.455 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:00:32.455 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.8558ms
2025-07-30 17:00:32.455 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:00:32.456 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.9870 ms
2025-07-30 17:00:32.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 14.046ms
2025-07-30 17:00:33.590 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:00:33.590 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:00:33.591 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:00:33.591 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:00:33.592 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:00:33.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:00:33.594 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.8095ms
2025-07-30 17:00:33.595 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:00:33.595 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.4953 ms
2025-07-30 17:00:33.596 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3771 application/json; charset=utf-8 6.6ms
2025-07-30 17:01:03.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:01:03.351 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:01:03.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.1159ms
2025-07-30 17:01:03.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:01:03.354 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:01:03.356 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:01:03.356 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:01:03.356 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:01:03.389 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:01:03.431 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:01:03.433 +05:30 [INF] Found 1 users among search
2025-07-30 17:01:03.435 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:01:03.436 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 79.9113ms
2025-07-30 17:01:03.437 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:01:03.437 +05:30 [INF] HTTP GET /api/user/search responded 200 in 82.0270 ms
2025-07-30 17:01:03.438 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 83.7399ms
2025-07-30 17:01:51.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:01:51.333 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:01:51.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.9965ms
2025-07-30 17:01:51.335 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:01:51.336 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:01:51.336 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:01:51.337 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:01:51.338 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:01:51.388 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:01:51.428 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:01:51.428 +05:30 [INF] Found 1 users among search
2025-07-30 17:01:51.429 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:01:51.429 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 91.9237ms
2025-07-30 17:01:51.429 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:01:51.430 +05:30 [INF] HTTP GET /api/user/search responded 200 in 93.3595 ms
2025-07-30 17:01:51.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 94.6776ms
2025-07-30 17:24:41.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:24:41.530 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:41.531 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.1766ms
2025-07-30 17:24:41.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:24:41.535 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:41.537 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:24:41.538 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:24:41.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 4.6264ms
2025-07-30 17:24:45.388 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:24:45.389 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:45.389 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:24:45.389 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:24:45.390 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5358ms
2025-07-30 17:24:46.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:24:46.834 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:46.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5297ms
2025-07-30 17:24:46.835 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:24:46.836 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:46.836 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:24:46.837 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:24:46.864 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:24:47.588 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:24:47.588 +05:30 [INF] Role: Admin
2025-07-30 17:24:47.588 +05:30 [INF] Role: Admin
2025-07-30 17:24:47.588 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:24:47.596 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:24:47.596 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:24:47.597 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 759.7007ms
2025-07-30 17:24:47.597 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:24:47.597 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 761.3272 ms
2025-07-30 17:24:47.598 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 762.3642ms
2025-07-30 17:24:47.602 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:24:47.603 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:47.604 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 1.1703ms
2025-07-30 17:24:47.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:24:47.606 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:47.607 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:47.607 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:24:47.608 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:24:47.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:24:47.615 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:24:47.615 +05:30 [INF] Found 1 users among search
2025-07-30 17:24:47.617 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:24:47.618 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.5364ms
2025-07-30 17:24:47.619 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:47.620 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.0665 ms
2025-07-30 17:24:47.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 14.6393ms
2025-07-30 17:24:47.641 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:24:47.642 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:47.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.5682ms
2025-07-30 17:24:47.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:24:47.649 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:47.650 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:47.650 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:24:47.652 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:24:47.655 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:24:47.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:24:47.658 +05:30 [INF] Found 1 users among search
2025-07-30 17:24:47.659 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:24:47.660 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.5643ms
2025-07-30 17:24:47.661 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:47.662 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.7016 ms
2025-07-30 17:24:47.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 15.7708ms
2025-07-30 17:24:48.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:24:48.962 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:48.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.5834ms
2025-07-30 17:24:48.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:24:48.965 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:48.967 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:24:48.967 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:24:48.967 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:24:48.969 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:24:48.969 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.4273ms
2025-07-30 17:24:48.970 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:24:48.971 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 4.9015 ms
2025-07-30 17:24:48.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3770 application/json; charset=utf-8 6.8446ms
2025-07-30 17:24:49.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:24:49.650 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:49.650 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.1329ms
2025-07-30 17:24:49.655 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:24:49.656 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:24:49.657 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:49.657 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:24:49.658 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:24:49.695 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:24:49.726 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:24:49.726 +05:30 [INF] Found 1 users among search
2025-07-30 17:24:49.727 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:24:49.727 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 69.7244ms
2025-07-30 17:24:49.727 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:24:49.727 +05:30 [INF] HTTP GET /api/user/search responded 200 in 71.0186 ms
2025-07-30 17:24:49.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 73.2749ms
2025-07-30 17:25:33.006 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:25:33.007 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:25:33.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.4954ms
2025-07-30 17:25:33.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:25:33.010 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:25:33.011 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:25:33.011 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:25:33.012 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:25:33.056 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:25:33.111 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:25:33.111 +05:30 [INF] Found 1 users among search
2025-07-30 17:25:33.113 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:25:33.114 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 103.0422ms
2025-07-30 17:25:33.115 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:25:33.116 +05:30 [INF] HTTP GET /api/user/search responded 200 in 105.1014 ms
2025-07-30 17:25:33.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 106.3735ms
2025-07-30 17:26:56.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:26:56.810 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:26:56.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 5.4471ms
2025-07-30 17:26:56.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:26:56.855 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:26:56.856 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:26:56.857 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:26:56.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.6653ms
2025-07-30 17:26:58.140 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:26:58.141 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:26:58.141 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:26:58.141 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:26:58.142 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4368ms
2025-07-30 17:26:59.338 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:26:59.339 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:26:59.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1162ms
2025-07-30 17:26:59.341 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:26:59.341 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:26:59.341 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:26:59.342 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:26:59.359 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:26:59.985 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:26:59.985 +05:30 [INF] Role: Admin
2025-07-30 17:26:59.985 +05:30 [INF] Role: Admin
2025-07-30 17:26:59.985 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:26:59.993 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:26:59.993 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:26:59.993 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 651.3667ms
2025-07-30 17:26:59.993 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:26:59.994 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 652.2538 ms
2025-07-30 17:26:59.994 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 653.0738ms
2025-07-30 17:26:59.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:27:00.000 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:00.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5646ms
2025-07-30 17:27:00.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:27:00.003 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:00.003 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:00.004 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:27:00.004 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:27:00.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:27:00.014 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:27:00.016 +05:30 [INF] Found 1 users among search
2025-07-30 17:27:00.017 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:27:00.018 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.6095ms
2025-07-30 17:27:00.018 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:00.019 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.4077 ms
2025-07-30 17:27:00.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 16.5503ms
2025-07-30 17:27:00.042 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:27:00.043 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:00.044 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.4912ms
2025-07-30 17:27:00.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:27:00.053 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:00.054 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:00.054 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:27:00.055 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:27:00.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:27:00.063 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:27:00.065 +05:30 [INF] Found 1 users among search
2025-07-30 17:27:00.066 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:27:00.067 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.3558ms
2025-07-30 17:27:00.067 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:00.068 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.1808 ms
2025-07-30 17:27:00.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 15.4724ms
2025-07-30 17:27:01.462 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:27:01.463 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:01.464 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:27:01.466 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:27:01.468 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:27:01.469 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:27:01.469 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.1667ms
2025-07-30 17:27:01.470 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:27:01.470 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 6.1203 ms
2025-07-30 17:27:01.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 8.3723ms
2025-07-30 17:27:03.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:27:03.452 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:03.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.5841ms
2025-07-30 17:27:03.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:27:03.455 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:03.455 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:03.455 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:27:03.456 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:27:03.487 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:27:03.528 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:27:03.540 +05:30 [INF] Found 1 users among search
2025-07-30 17:27:03.542 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:27:03.542 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 86.8885ms
2025-07-30 17:27:03.543 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:03.544 +05:30 [INF] HTTP GET /api/user/search responded 200 in 88.5491 ms
2025-07-30 17:27:03.544 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 89.6111ms
2025-07-30 17:27:49.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:27:49.184 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:49.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.0505ms
2025-07-30 17:27:49.188 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:27:49.188 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:27:49.189 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:49.189 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:27:49.190 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:27:49.245 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:27:49.285 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:27:49.286 +05:30 [INF] Found 1 users among search
2025-07-30 17:27:49.286 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:27:49.286 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 97.2256ms
2025-07-30 17:27:49.287 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:27:49.287 +05:30 [INF] HTTP GET /api/user/search responded 200 in 98.3601 ms
2025-07-30 17:27:49.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 99.5587ms
2025-07-30 17:29:41.331 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:29:41.331 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:29:41.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7228ms
2025-07-30 17:29:41.335 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:29:41.335 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:29:41.335 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:29:41.335 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:29:41.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 0.6642ms
2025-07-30 17:30:52.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:30:52.195 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:52.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.2843ms
2025-07-30 17:30:52.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:30:52.217 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:52.219 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:30:52.222 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:30:52.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 13.0611ms
2025-07-30 17:30:52.426 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:30:52.430 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:52.436 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:30:52.437 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:30:52.439 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 12.8889ms
2025-07-30 17:30:53.920 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:30:53.921 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:53.921 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4019ms
2025-07-30 17:30:53.923 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:30:53.923 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:53.923 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:30:53.924 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:30:53.940 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:30:54.533 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:30:54.533 +05:30 [INF] Role: Admin
2025-07-30 17:30:54.533 +05:30 [INF] Role: Admin
2025-07-30 17:30:54.533 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:30:54.537 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:30:54.537 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:30:54.538 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 614.0926ms
2025-07-30 17:30:54.538 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:30:54.538 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 615.1093 ms
2025-07-30 17:30:54.539 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 615.884ms
2025-07-30 17:30:54.543 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:30:54.544 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:54.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.9776ms
2025-07-30 17:30:54.546 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:30:54.547 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:54.548 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:54.548 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:30:54.549 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:30:54.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:30:54.555 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:30:54.556 +05:30 [INF] Found 1 users among search
2025-07-30 17:30:54.556 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:30:54.561 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.1516ms
2025-07-30 17:30:54.561 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:54.561 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.7000 ms
2025-07-30 17:30:54.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.3162ms
2025-07-30 17:30:54.582 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:30:54.583 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:54.585 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.2398ms
2025-07-30 17:30:54.587 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:30:54.588 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:54.588 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:54.588 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:30:54.589 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:30:54.592 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:30:54.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:30:54.595 +05:30 [INF] Found 1 users among search
2025-07-30 17:30:54.595 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:30:54.595 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6879ms
2025-07-30 17:30:54.596 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:54.596 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.3225 ms
2025-07-30 17:30:54.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.538ms
2025-07-30 17:30:55.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:30:55.725 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:55.725 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:30:55.726 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:30:55.728 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:30:55.729 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:30:55.730 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 2.8843ms
2025-07-30 17:30:55.730 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:30:55.731 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 5.7022 ms
2025-07-30 17:30:55.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3771 application/json; charset=utf-8 7.1588ms
2025-07-30 17:30:56.521 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:30:56.522 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:56.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.7491ms
2025-07-30 17:30:56.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:30:56.525 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:30:56.525 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:56.526 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:30:56.526 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:30:56.561 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:30:56.598 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:30:56.600 +05:30 [INF] Found 1 users among search
2025-07-30 17:30:56.601 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:30:56.601 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 75.4162ms
2025-07-30 17:30:56.602 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:30:56.602 +05:30 [INF] HTTP GET /api/user/search responded 200 in 76.5319 ms
2025-07-30 17:30:56.602 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 77.491ms
2025-07-30 17:31:21.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:31:21.804 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:31:21.805 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.6847ms
2025-07-30 17:31:21.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:31:21.807 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:31:21.808 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:31:21.808 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:31:21.809 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:31:21.817 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:31:21.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:31:21.821 +05:30 [INF] Found 1 users among search
2025-07-30 17:31:21.821 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:31:21.821 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.5856ms
2025-07-30 17:31:21.822 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:31:21.822 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.8793 ms
2025-07-30 17:31:21.822 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 15.3141ms
2025-07-30 17:31:55.391 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:31:55.391 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:31:55.391 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.7347ms
2025-07-30 17:31:55.394 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:31:55.395 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:31:55.395 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:31:55.396 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:31:55.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.5872ms
2025-07-30 17:32:13.357 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:32:13.358 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:32:13.358 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:32:13.358 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:32:13.358 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.2476ms
2025-07-30 17:36:31.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:36:31.174 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9573ms
2025-07-30 17:36:31.176 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:36:31.177 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.177 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:36:31.228 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:36:31.250 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:36:31.821 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:36:31.822 +05:30 [INF] Role: Admin
2025-07-30 17:36:31.822 +05:30 [INF] Role: Admin
2025-07-30 17:36:31.822 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:36:31.830 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:36:31.831 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:36:31.831 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 602.0666ms
2025-07-30 17:36:31.832 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:36:31.832 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 654.6778 ms
2025-07-30 17:36:31.833 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 656.0067ms
2025-07-30 17:36:31.838 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:36:31.838 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5257ms
2025-07-30 17:36:31.841 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:36:31.841 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.841 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:31.842 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:36:31.842 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:36:31.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:36:31.849 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:36:31.849 +05:30 [INF] Found 1 users among search
2025-07-30 17:36:31.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:36:31.851 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.5722ms
2025-07-30 17:36:31.851 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:31.852 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.4466 ms
2025-07-30 17:36:31.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 11.4863ms
2025-07-30 17:36:31.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:36:31.886 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.887 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.1047ms
2025-07-30 17:36:31.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:36:31.892 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:31.893 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:31.894 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:36:31.895 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:36:31.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:36:31.899 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:36:31.899 +05:30 [INF] Found 1 users among search
2025-07-30 17:36:31.900 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:36:31.900 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.7398ms
2025-07-30 17:36:31.900 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:31.900 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3949 ms
2025-07-30 17:36:31.901 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.3626ms
2025-07-30 17:36:34.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:36:34.086 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:34.086 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.8316ms
2025-07-30 17:36:34.090 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:36:34.090 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:34.091 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:36:34.091 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:36:34.091 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:36:34.092 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:36:34.093 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.9242ms
2025-07-30 17:36:34.093 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:36:34.094 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.9188 ms
2025-07-30 17:36:34.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3771 application/json; charset=utf-8 4.3878ms
2025-07-30 17:36:34.803 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:36:34.804 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:34.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.8601ms
2025-07-30 17:36:34.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:36:34.807 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:36:34.807 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:34.808 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:36:34.808 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:36:34.847 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:36:34.893 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:36:34.893 +05:30 [INF] Found 1 users among search
2025-07-30 17:36:34.894 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:36:34.894 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 86.3908ms
2025-07-30 17:36:34.894 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:36:34.895 +05:30 [INF] HTTP GET /api/user/search responded 200 in 88.0649 ms
2025-07-30 17:36:34.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 89.5111ms
2025-07-30 17:37:17.948 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:37:17.949 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:37:17.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.8144ms
2025-07-30 17:37:17.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:37:17.952 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:37:17.952 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:37:17.953 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:37:17.953 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:37:17.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:37:17.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:37:17.961 +05:30 [INF] Found 1 users among search
2025-07-30 17:37:17.961 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:37:17.962 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.6723ms
2025-07-30 17:37:17.962 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:37:17.962 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.8673 ms
2025-07-30 17:37:17.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 11.0016ms
2025-07-30 17:39:26.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:39:26.288 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:26.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.067ms
2025-07-30 17:39:26.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:39:26.292 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:26.292 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:39:26.293 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:39:26.293 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 1.2772ms
2025-07-30 17:39:32.127 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:39:32.127 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:32.128 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:39:32.128 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:39:32.128 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3151ms
2025-07-30 17:39:33.188 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:39:33.188 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.188 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8446ms
2025-07-30 17:39:33.191 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:39:33.191 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.191 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:39:33.192 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:39:33.207 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:39:33.805 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:39:33.805 +05:30 [INF] Role: Admin
2025-07-30 17:39:33.805 +05:30 [INF] Role: Admin
2025-07-30 17:39:33.806 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:39:33.815 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:39:33.815 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:39:33.816 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 623.9976ms
2025-07-30 17:39:33.816 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:39:33.816 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 624.8459 ms
2025-07-30 17:39:33.816 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 625.6754ms
2025-07-30 17:39:33.821 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:39:33.822 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.779ms
2025-07-30 17:39:33.824 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:39:33.825 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.825 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:39:33.825 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:39:33.826 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:39:33.828 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:39:33.831 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:39:33.832 +05:30 [INF] Found 1 users among search
2025-07-30 17:39:33.832 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:39:33.835 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.1033ms
2025-07-30 17:39:33.838 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:39:33.839 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.1557 ms
2025-07-30 17:39:33.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.4139ms
2025-07-30 17:39:33.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:39:33.859 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.1703ms
2025-07-30 17:39:33.862 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:39:33.863 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:33.863 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:39:33.864 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:39:33.865 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:39:33.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:39:33.871 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:39:33.872 +05:30 [INF] Found 1 users among search
2025-07-30 17:39:33.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:39:33.873 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.357ms
2025-07-30 17:39:33.873 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:39:33.873 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.9392 ms
2025-07-30 17:39:33.874 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 11.2596ms
2025-07-30 17:39:35.480 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:39:35.481 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:35.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 1.9575ms
2025-07-30 17:39:35.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:39:35.487 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:39:35.487 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:39:35.487 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:39:35.488 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:39:35.489 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:39:35.490 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.8643ms
2025-07-30 17:39:35.490 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:39:35.490 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 3.2794 ms
2025-07-30 17:39:35.491 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3771 application/json; charset=utf-8 4.5229ms
2025-07-30 17:40:12.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:40:12.506 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:40:12.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.879ms
2025-07-30 17:40:12.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:40:12.544 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:40:12.546 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:40:12.549 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:40:12.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 18.1607ms
2025-07-30 17:40:13.344 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:40:13.344 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:40:13.345 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:40:13.345 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:40:13.346 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7257ms
2025-07-30 17:45:38.986 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-30 17:45:38.987 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:38.987 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.3867ms
2025-07-30 17:45:38.991 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-30 17:45:38.991 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:38.992 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:45:38.992 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-30 17:45:39.018 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-30 17:45:39.605 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-30 17:45:39.605 +05:30 [INF] Role: Admin
2025-07-30 17:45:39.605 +05:30 [INF] Role: Admin
2025-07-30 17:45:39.605 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-30 17:45:39.612 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-30 17:45:39.613 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-30 17:45:39.613 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 620.8296ms
2025-07-30 17:45:39.613 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-30 17:45:39.614 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 622.1847 ms
2025-07-30 17:45:39.614 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 631 application/json; charset=utf-8 623.3439ms
2025-07-30 17:45:39.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:45:39.620 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:39.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4907ms
2025-07-30 17:45:39.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-30 17:45:39.624 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:39.625 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:39.625 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:45:39.626 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:45:39.630 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-30 17:45:39.634 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-30 17:45:39.635 +05:30 [INF] Found 1 users among search
2025-07-30 17:45:39.636 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:45:39.637 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.6173ms
2025-07-30 17:45:39.638 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:39.639 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.5476 ms
2025-07-30 17:45:39.640 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.6973ms
2025-07-30 17:45:39.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:45:39.685 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:39.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.7623ms
2025-07-30 17:45:39.689 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-30 17:45:39.689 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:39.690 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:39.690 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:45:39.692 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:45:39.694 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-30 17:45:39.698 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-30 17:45:39.698 +05:30 [INF] Found 1 users among search
2025-07-30 17:45:39.698 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:45:39.699 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.4946ms
2025-07-30 17:45:39.699 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:39.699 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.5258 ms
2025-07-30 17:45:39.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 10.5429ms
2025-07-30 17:45:41.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:45:41.267 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:41.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 0.6442ms
2025-07-30 17:45:41.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:45:41.269 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:41.270 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:45:41.270 +05:30 [INF] Route matched with {action = "SearchLucene", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]] SearchLucene(System.String, System.String, System.String, Int32, Int32) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-30 17:45:41.271 +05:30 [INF] Lucene search for query 'null' with sort 'null' order 'null'
2025-07-30 17:45:41.272 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:45:41.272 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi) in 1.7815ms
2025-07-30 17:45:41.272 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.SearchLucene (HealthcareApi)'
2025-07-30 17:45:41.273 +05:30 [INF] HTTP GET /api/patient/search-lucene responded 200 in 2.9000 ms
2025-07-30 17:45:41.273 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 200 3774 application/json; charset=utf-8 3.7626ms
2025-07-30 17:45:42.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:45:42.090 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:42.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 0.3905ms
2025-07-30 17:45:42.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:45:42.093 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:45:42.093 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:42.093 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:45:42.094 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:45:42.132 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:45:42.171 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:45:42.172 +05:30 [INF] Found 1 users among search
2025-07-30 17:45:42.173 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:45:42.173 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 79.4682ms
2025-07-30 17:45:42.173 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:45:42.173 +05:30 [INF] HTTP GET /api/user/search responded 200 in 80.5033 ms
2025-07-30 17:45:42.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 81.5641ms
2025-07-30 17:46:40.717 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:46:40.717 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:46:40.718 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 204 null null 1.2885ms
2025-07-30 17:46:40.720 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - null null
2025-07-30 17:46:40.720 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:46:40.720 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:46:40.721 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-30 17:46:40.721 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":["Admin"],"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-30 17:46:40.763 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
2025-07-30 17:46:40.808 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Role_1='?' (Size = 4000), @__param_Email_2='?' (Size = 4000), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Role] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Role_1) WITH ([value] nvarchar(20) '$') AS [p0]
) AND [u].[Email] IN (
    SELECT [p1].[value]
    FROM OPENJSON(@__param_Email_2) WITH ([value] nvarchar(100) '$') AS [p1]
)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2025-07-30 17:46:40.809 +05:30 [INF] Found 1 users among search
2025-07-30 17:46:40.809 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-30 17:46:40.809 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 88.3232ms
2025-07-30 17:46:40.810 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-30 17:46:40.810 +05:30 [INF] HTTP GET /api/user/search responded 200 in 89.4083 ms
2025-07-30 17:46:40.810 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com&role=Admin - 200 509 application/json; charset=utf-8 90.3534ms
2025-07-30 17:47:50.518 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:47:50.520 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:47:50.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 204 null null 2.5341ms
2025-07-30 17:47:50.544 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:47:50.545 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:47:50.546 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:47:50.547 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:47:50.547 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 3.2111ms
2025-07-30 17:47:54.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - null null
2025-07-30 17:47:54.061 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:47:54.061 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-30 17:47:54.062 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:47:54.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search-lucene?pageNumber=1&pageSize=10 - 401 0 null 2.2002ms
2025-07-30 17:47:54.650 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-30 17:47:54.651 +05:30 [INF] CORS policy execution successful.
2025-07-30 17:47:54.652 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-30 17:47:54.653 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-30 17:47:54.654 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.4518ms
