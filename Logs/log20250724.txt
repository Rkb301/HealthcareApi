2025-07-24 09:45:28.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 09:45:28.696 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:45:28.697 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 09:45:28.697 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 09:45:28.790 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 09:45:28.791 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 09:45:28.791 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 93.315ms
2025-07-24 09:45:28.792 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 09:45:28.792 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 95.5692 ms
2025-07-24 09:45:28.792 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 122.824ms
2025-07-24 09:56:02.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 09:56:02.822 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:02.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.3666ms
2025-07-24 09:56:02.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 09:56:02.827 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:02.828 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 09:56:02.830 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 09:56:02.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 3.9607ms
2025-07-24 09:56:08.476 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 09:56:08.476 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:08.478 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 09:56:08.479 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 09:56:08.480 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 4.3951ms
2025-07-24 09:56:11.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 09:56:11.662 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:11.663 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7102ms
2025-07-24 09:56:11.665 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 09:56:11.666 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:11.666 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 09:56:11.666 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 09:56:11.701 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 09:56:12.559 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 09:56:12.560 +05:30 [INF] Role: Patient
2025-07-24 09:56:12.560 +05:30 [INF] Role: Patient
2025-07-24 09:56:12.560 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 09:56:12.576 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 09:56:12.580 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 09:56:12.580 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 913.3747ms
2025-07-24 09:56:12.581 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 09:56:12.581 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 915.1483 ms
2025-07-24 09:56:12.581 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 916.0471ms
2025-07-24 09:56:12.585 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 09:56:12.586 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:12.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6227ms
2025-07-24 09:56:12.588 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 09:56:12.588 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:12.590 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 09:56:12.591 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 09:56:12.594 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 09:56:12.602 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 09:56:12.612 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 09:56:12.613 +05:30 [INF] Found 1 users among search
2025-07-24 09:56:12.613 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 09:56:12.614 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 23.2257ms
2025-07-24 09:56:12.614 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 09:56:12.615 +05:30 [INF] HTTP GET /api/user/search responded 200 in 24.8744 ms
2025-07-24 09:56:12.615 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 27.3264ms
2025-07-24 09:56:12.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 09:56:12.620 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:12.621 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.5225ms
2025-07-24 09:56:12.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 09:56:12.623 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:12.623 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 09:56:12.624 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 09:56:12.625 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 09:56:12.637 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 09:56:12.646 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 09:56:12.647 +05:30 [INF] Found 1 patients matching search
2025-07-24 09:56:12.647 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 09:56:12.648 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 23.4962ms
2025-07-24 09:56:12.648 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 09:56:12.648 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 24.8113 ms
2025-07-24 09:56:12.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 25.8767ms
2025-07-24 09:56:24.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 09:56:24.763 +05:30 [INF] CORS policy execution successful.
2025-07-24 09:56:24.764 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 09:56:24.764 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 09:56:24.787 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 09:56:24.787 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 09:56:24.788 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 23.3882ms
2025-07-24 09:56:24.789 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 09:56:24.789 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 24.8739 ms
2025-07-24 09:56:24.789 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 26.3065ms
2025-07-24 11:02:08.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 11:02:08.268 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:02:08.269 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 11:02:08.270 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 11:02:08.308 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 11:02:08.309 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:02:08.309 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 39.2032ms
2025-07-24 11:02:08.310 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 11:02:08.310 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 41.1628 ms
2025-07-24 11:02:08.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 43.2834ms
2025-07-24 11:02:13.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:02:13.495 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:02:13.495 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5875ms
2025-07-24 11:02:13.497 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:02:13.497 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:02:13.498 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:02:13.498 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:02:13.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.184ms
2025-07-24 11:04:45.841 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 11:04:45.842 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:04:45.842 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 11:04:45.842 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 11:04:45.861 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 11:04:45.862 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:04:45.862 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 19.682ms
2025-07-24 11:04:45.862 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 11:04:45.862 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 20.6294 ms
2025-07-24 11:04:45.863 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 21.5627ms
2025-07-24 11:04:49.821 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:04:49.821 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:04:49.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.518ms
2025-07-24 11:04:49.823 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:04:49.823 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:04:49.824 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:04:49.824 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:04:49.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.2253ms
2025-07-24 11:05:49.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:05:49.866 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:49.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6172ms
2025-07-24 11:05:49.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:05:49.869 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:49.869 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:05:49.869 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:05:49.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.4287ms
2025-07-24 11:05:56.421 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 11:05:56.421 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:56.421 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 11:05:56.421 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:05:56.422 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.7249ms
2025-07-24 11:05:57.449 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 11:05:57.450 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:57.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3995ms
2025-07-24 11:05:57.451 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 11:05:57.451 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:57.451 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:05:57.452 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 11:05:57.468 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 11:05:58.026 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 11:05:58.027 +05:30 [INF] Role: Patient
2025-07-24 11:05:58.027 +05:30 [INF] Role: Patient
2025-07-24 11:05:58.027 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 11:05:58.031 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 11:05:58.032 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 11:05:58.033 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 581.4116ms
2025-07-24 11:05:58.034 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:05:58.034 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 582.4291 ms
2025-07-24 11:05:58.034 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 583.2088ms
2025-07-24 11:05:58.037 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:05:58.038 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:58.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6354ms
2025-07-24 11:05:58.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:05:58.041 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:58.042 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:05:58.043 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 11:05:58.044 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 11:05:58.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 11:05:58.053 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 11:05:58.054 +05:30 [INF] Found 1 users among search
2025-07-24 11:05:58.055 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:05:58.058 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.3824ms
2025-07-24 11:05:58.058 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:05:58.058 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.7731 ms
2025-07-24 11:05:58.059 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 17.5259ms
2025-07-24 11:05:58.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:05:58.064 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:58.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7198ms
2025-07-24 11:05:58.066 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:05:58.067 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:05:58.067 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:05:58.067 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:05:58.068 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 11:05:58.077 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 11:05:58.083 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 11:05:58.084 +05:30 [INF] Found 1 patients matching search
2025-07-24 11:05:58.085 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:05:58.086 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 18.0653ms
2025-07-24 11:05:58.086 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:05:58.086 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 19.2936 ms
2025-07-24 11:05:58.087 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 20.3403ms
2025-07-24 11:06:01.598 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:06:01.598 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:06:01.599 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4816ms
2025-07-24 11:06:01.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:06:01.602 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:06:01.603 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:06:01.603 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:06:01.608 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 11:06:01.609 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:06:01.610 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 6.2997ms
2025-07-24 11:06:01.610 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:06:01.610 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 7.5275 ms
2025-07-24 11:06:01.611 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 9.2345ms
2025-07-24 11:08:33.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:08:33.724 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:08:33.724 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7331ms
2025-07-24 11:08:33.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:08:33.727 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:08:33.727 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:08:33.727 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:08:33.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.3826ms
2025-07-24 11:11:35.943 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:11:35.943 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:11:35.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6994ms
2025-07-24 11:11:35.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:11:35.946 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:11:35.946 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:11:35.947 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:11:35.947 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.9198ms
2025-07-24 11:23:32.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:23:32.868 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:23:32.868 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.95ms
2025-07-24 11:23:32.871 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:23:32.871 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:23:32.871 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:23:32.872 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:23:32.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.2192ms
2025-07-24 11:25:34.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:25:34.970 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:25:34.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.8234ms
2025-07-24 11:25:34.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:25:34.973 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:25:34.974 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:25:34.974 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:25:34.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.6733ms
2025-07-24 11:26:38.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:26:38.851 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:26:38.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.595ms
2025-07-24 11:26:38.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:26:38.853 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:26:38.853 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:26:38.854 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:26:38.854 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.2099ms
2025-07-24 11:26:40.529 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:26:40.530 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:26:40.530 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:26:40.530 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:26:40.531 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.358ms
2025-07-24 11:26:46.276 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:26:46.276 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:26:46.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4598ms
2025-07-24 11:26:46.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:26:46.279 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:26:46.279 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:26:46.279 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:26:46.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.1521ms
2025-07-24 11:27:41.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:27:41.619 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:27:41.619 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5056ms
2025-07-24 11:27:41.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:27:41.621 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:27:41.622 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:27:41.622 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:27:41.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.0773ms
2025-07-24 11:28:05.605 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:28:05.605 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:28:05.605 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6655ms
2025-07-24 11:28:05.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:28:05.607 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:28:05.608 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:28:05.608 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:28:05.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9657ms
2025-07-24 11:32:59.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:32:59.249 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:32:59.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9311ms
2025-07-24 11:32:59.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:32:59.251 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:32:59.252 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:32:59.252 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:32:59.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.1214ms
2025-07-24 11:35:10.857 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:10.858 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:10.858 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4458ms
2025-07-24 11:35:10.859 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:10.860 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:10.860 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:35:10.860 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:35:10.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.0791ms
2025-07-24 11:35:30.771 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:30.772 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:30.772 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6769ms
2025-07-24 11:35:30.775 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:30.775 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:30.776 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:35:30.777 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:35:30.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 2.5187ms
2025-07-24 11:35:34.640 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 11:35:34.641 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:34.641 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 11:35:34.642 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:35:34.642 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.8075ms
2025-07-24 11:35:36.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 11:35:36.027 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:36.028 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5718ms
2025-07-24 11:35:36.029 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 11:35:36.029 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:36.030 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:35:36.030 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 11:35:36.060 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 11:35:37.094 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 11:35:37.094 +05:30 [INF] Role: Patient
2025-07-24 11:35:37.095 +05:30 [INF] Role: Patient
2025-07-24 11:35:37.095 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 11:35:37.102 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 11:35:37.103 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 11:35:37.104 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1074.1245ms
2025-07-24 11:35:37.104 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:35:37.105 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1075.2774 ms
2025-07-24 11:35:37.105 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 1075.9711ms
2025-07-24 11:35:37.108 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:35:37.108 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:37.108 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6656ms
2025-07-24 11:35:37.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:35:37.111 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:37.111 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:35:37.112 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 11:35:37.112 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 11:35:37.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 11:35:37.117 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 11:35:37.118 +05:30 [INF] Found 1 users among search
2025-07-24 11:35:37.118 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:35:37.119 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3499ms
2025-07-24 11:35:37.122 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:35:37.123 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.2738 ms
2025-07-24 11:35:37.123 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 12.898ms
2025-07-24 11:35:37.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:35:37.128 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:37.128 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.9422ms
2025-07-24 11:35:37.130 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:35:37.131 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:37.131 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:35:37.131 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:35:37.133 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 11:35:37.141 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 11:35:37.148 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 11:35:37.148 +05:30 [INF] Found 1 patients matching search
2025-07-24 11:35:37.149 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:35:37.149 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.2712ms
2025-07-24 11:35:37.149 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:35:37.149 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 18.3390 ms
2025-07-24 11:35:37.150 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 19.4624ms
2025-07-24 11:35:41.729 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:41.730 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:41.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4444ms
2025-07-24 11:35:41.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:41.732 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:41.734 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:35:41.734 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:35:41.740 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 11:35:41.741 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:35:41.741 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 7.0326ms
2025-07-24 11:35:41.742 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:35:41.742 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 8.5098 ms
2025-07-24 11:35:41.743 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 10.5101ms
2025-07-24 11:35:51.652 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:51.652 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:51.652 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5209ms
2025-07-24 11:35:51.654 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:35:51.655 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:35:51.655 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:35:51.655 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:35:51.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.2421ms
2025-07-24 11:40:31.874 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:40:31.874 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:40:31.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7883ms
2025-07-24 11:40:31.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:40:31.877 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:40:31.877 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:40:31.877 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:40:31.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.1423ms
2025-07-24 11:43:39.575 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:43:39.576 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:39.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4173ms
2025-07-24 11:43:39.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:43:39.578 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:39.578 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:43:39.578 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:43:39.578 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.6467ms
2025-07-24 11:43:46.997 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 11:43:46.997 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:46.998 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 11:43:46.998 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:43:46.998 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0278ms
2025-07-24 11:43:48.148 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 11:43:48.149 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:48.149 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4383ms
2025-07-24 11:43:48.151 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 11:43:48.152 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:48.153 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:43:48.154 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 11:43:48.173 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 11:43:49.076 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 11:43:49.076 +05:30 [INF] Role: Patient
2025-07-24 11:43:49.077 +05:30 [INF] Role: Patient
2025-07-24 11:43:49.077 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 11:43:49.084 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 11:43:49.085 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 11:43:49.086 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 931.2139ms
2025-07-24 11:43:49.086 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:43:49.086 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 933.3781 ms
2025-07-24 11:43:49.086 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 935.0446ms
2025-07-24 11:43:49.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:43:49.090 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:49.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6182ms
2025-07-24 11:43:49.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:43:49.092 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:49.093 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:43:49.094 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 11:43:49.095 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 11:43:49.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 11:43:49.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 11:43:49.104 +05:30 [INF] Found 1 users among search
2025-07-24 11:43:49.105 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:43:49.106 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.8716ms
2025-07-24 11:43:49.107 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:43:49.107 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.3660 ms
2025-07-24 11:43:49.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 15.7315ms
2025-07-24 11:43:49.113 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:43:49.113 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:49.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.9903ms
2025-07-24 11:43:49.115 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:43:49.116 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:49.116 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:43:49.116 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:43:49.117 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 11:43:49.124 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 11:43:49.130 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 11:43:49.130 +05:30 [INF] Found 1 patients matching search
2025-07-24 11:43:49.131 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:43:49.131 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 14.424ms
2025-07-24 11:43:49.131 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:43:49.131 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 15.3747 ms
2025-07-24 11:43:49.131 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 16.2044ms
2025-07-24 11:43:57.643 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:43:57.643 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:57.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.417ms
2025-07-24 11:43:57.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:43:57.646 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:43:57.646 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:43:57.646 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:43:57.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9006ms
2025-07-24 11:49:04.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:49:04.922 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:04.922 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6821ms
2025-07-24 11:49:04.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:49:04.924 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:04.924 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:49:04.924 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:49:04.925 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.841ms
2025-07-24 11:49:11.291 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 11:49:11.291 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:11.291 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 11:49:11.291 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:49:11.292 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9716ms
2025-07-24 11:49:12.261 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 11:49:12.262 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:12.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1469ms
2025-07-24 11:49:12.264 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 11:49:12.264 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:12.265 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:49:12.265 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 11:49:12.281 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 11:49:13.204 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 11:49:13.204 +05:30 [INF] Role: Patient
2025-07-24 11:49:13.204 +05:30 [INF] Role: Patient
2025-07-24 11:49:13.205 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 11:49:13.215 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 11:49:13.216 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 11:49:13.217 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 952.1641ms
2025-07-24 11:49:13.218 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 11:49:13.218 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 953.6513 ms
2025-07-24 11:49:13.219 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 955.0713ms
2025-07-24 11:49:13.222 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:49:13.222 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:13.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6026ms
2025-07-24 11:49:13.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 11:49:13.224 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:13.225 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:49:13.225 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 11:49:13.226 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 11:49:13.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 11:49:13.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 11:49:13.232 +05:30 [INF] Found 1 users among search
2025-07-24 11:49:13.233 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:49:13.233 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.9499ms
2025-07-24 11:49:13.233 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 11:49:13.234 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.9459 ms
2025-07-24 11:49:13.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 10.984ms
2025-07-24 11:49:13.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:49:13.242 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:13.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7145ms
2025-07-24 11:49:13.246 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 11:49:13.246 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:13.247 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:49:13.247 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:49:13.248 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 11:49:13.255 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 11:49:13.262 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 11:49:13.263 +05:30 [INF] Found 1 patients matching search
2025-07-24 11:49:13.264 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:49:13.264 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 16.6738ms
2025-07-24 11:49:13.264 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 11:49:13.264 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 17.8457 ms
2025-07-24 11:49:13.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 19.1509ms
2025-07-24 11:49:16.938 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 11:49:16.939 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:16.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7776ms
2025-07-24 11:49:16.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:49:16.941 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:16.942 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:49:16.942 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 11:49:16.949 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 11:49:16.950 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 11:49:16.950 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 8.1143ms
2025-07-24 11:49:16.951 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 11:49:16.951 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 9.0699 ms
2025-07-24 11:49:16.951 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 10.255ms
2025-07-24 11:49:21.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 11:49:21.652 +05:30 [INF] CORS policy execution successful.
2025-07-24 11:49:21.652 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 11:49:21.652 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 11:49:21.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9796ms
2025-07-24 12:05:38.859 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:05:38.860 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:05:38.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9954ms
2025-07-24 12:05:38.862 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:05:38.863 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:05:38.863 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:05:38.864 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:05:38.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.5175ms
2025-07-24 12:07:37.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:07:37.588 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:37.589 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5677ms
2025-07-24 12:07:37.590 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:07:37.590 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:37.591 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:07:37.591 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:07:37.591 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.8397ms
2025-07-24 12:07:48.068 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 12:07:48.068 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:48.069 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 12:07:48.069 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:07:48.070 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6942ms
2025-07-24 12:07:49.162 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 12:07:49.162 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:49.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6531ms
2025-07-24 12:07:49.164 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 12:07:49.164 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:49.165 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:07:49.165 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 12:07:49.200 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 12:07:50.073 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 12:07:50.073 +05:30 [INF] Role: Patient
2025-07-24 12:07:50.073 +05:30 [INF] Role: Patient
2025-07-24 12:07:50.074 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 12:07:50.082 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 12:07:50.082 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 12:07:50.083 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 917.3704ms
2025-07-24 12:07:50.083 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:07:50.083 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 918.8636 ms
2025-07-24 12:07:50.084 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 919.8114ms
2025-07-24 12:07:50.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:07:50.086 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:50.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5407ms
2025-07-24 12:07:50.089 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:07:50.090 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:50.091 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:07:50.092 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 12:07:50.093 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 12:07:50.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 12:07:50.103 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 12:07:50.105 +05:30 [INF] Found 1 users among search
2025-07-24 12:07:50.106 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:07:50.107 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 14.0086ms
2025-07-24 12:07:50.107 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:07:50.107 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.9883 ms
2025-07-24 12:07:50.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 20.2942ms
2025-07-24 12:07:50.113 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:07:50.114 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:50.116 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 2.8683ms
2025-07-24 12:07:50.118 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:07:50.118 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:07:50.119 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:07:50.119 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:07:50.120 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 12:07:50.127 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 12:07:50.134 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 12:07:50.134 +05:30 [INF] Found 1 patients matching search
2025-07-24 12:07:50.135 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:07:50.135 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 15.7887ms
2025-07-24 12:07:50.135 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:07:50.135 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 16.6832 ms
2025-07-24 12:07:50.136 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 17.9958ms
2025-07-24 12:08:47.302 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 12:08:47.303 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:47.303 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 12:08:47.303 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:08:47.304 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6024ms
2025-07-24 12:08:48.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 12:08:48.266 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:48.266 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5453ms
2025-07-24 12:08:48.269 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 12:08:48.269 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:48.270 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:08:48.270 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 12:08:48.289 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 12:08:49.117 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 12:08:49.118 +05:30 [INF] Role: Patient
2025-07-24 12:08:49.118 +05:30 [INF] Role: Patient
2025-07-24 12:08:49.118 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 12:08:49.128 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 12:08:49.129 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 12:08:49.129 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 858.3604ms
2025-07-24 12:08:49.129 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:08:49.129 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 859.6269 ms
2025-07-24 12:08:49.129 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 860.7568ms
2025-07-24 12:08:49.133 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:08:49.133 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:49.134 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5745ms
2025-07-24 12:08:49.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:08:49.136 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:49.137 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:08:49.137 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 12:08:49.138 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 12:08:49.141 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 12:08:49.145 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 12:08:49.145 +05:30 [INF] Found 1 users among search
2025-07-24 12:08:49.146 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:08:49.148 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.3639ms
2025-07-24 12:08:49.148 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:08:49.149 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.1414 ms
2025-07-24 12:08:49.149 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 13.3741ms
2025-07-24 12:08:49.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:08:49.157 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:49.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7554ms
2025-07-24 12:08:49.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:08:49.160 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:49.160 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:08:49.161 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:08:49.161 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 12:08:49.168 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 12:08:49.175 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 12:08:49.176 +05:30 [INF] Found 1 patients matching search
2025-07-24 12:08:49.176 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:08:49.176 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 15.5115ms
2025-07-24 12:08:49.177 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:08:49.177 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 16.4286 ms
2025-07-24 12:08:49.177 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 17.4053ms
2025-07-24 12:08:52.502 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:08:52.502 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:52.503 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.7441ms
2025-07-24 12:08:52.505 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:08:52.505 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:52.506 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 12:08:52.506 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:08:52.511 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 12:08:52.511 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:08:52.511 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.1454ms
2025-07-24 12:08:52.512 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 12:08:52.512 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.4119 ms
2025-07-24 12:08:52.513 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 7.8746ms
2025-07-24 12:08:53.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:08:53.696 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:53.696 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:08:53.697 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:08:53.697 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.2877ms
2025-07-24 12:08:55.921 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:08:55.922 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:08:55.922 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:08:55.922 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:08:55.922 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.3053ms
2025-07-24 12:09:59.603 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:09:59.603 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:09:59.604 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5945ms
2025-07-24 12:09:59.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:09:59.607 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:09:59.607 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:09:59.607 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:09:59.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9121ms
2025-07-24 12:09:59.690 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 12:09:59.691 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:09:59.691 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 12:09:59.691 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:09:59.691 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9372ms
2025-07-24 12:16:52.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 12:16:52.635 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:52.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6135ms
2025-07-24 12:16:52.637 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 12:16:52.637 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:52.637 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:16:52.638 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 12:16:52.663 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 12:16:53.236 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 12:16:53.236 +05:30 [INF] Role: Patient
2025-07-24 12:16:53.237 +05:30 [INF] Role: Patient
2025-07-24 12:16:53.237 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 12:16:53.245 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 12:16:53.246 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 12:16:53.246 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 608.0284ms
2025-07-24 12:16:53.246 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:16:53.246 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 608.9237 ms
2025-07-24 12:16:53.246 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 609.6986ms
2025-07-24 12:16:53.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:16:53.251 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:53.251 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.4284ms
2025-07-24 12:16:53.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:16:53.254 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:53.254 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:16:53.254 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 12:16:53.255 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 12:16:53.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 12:16:53.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 12:16:53.260 +05:30 [INF] Found 1 users among search
2025-07-24 12:16:53.261 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:16:53.261 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.3917ms
2025-07-24 12:16:53.261 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:16:53.262 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.6882 ms
2025-07-24 12:16:53.262 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 8.5501ms
2025-07-24 12:16:53.280 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:16:53.280 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:53.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.663ms
2025-07-24 12:16:53.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:16:53.285 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:53.286 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:16:53.286 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:16:53.288 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 12:16:53.295 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 12:16:53.300 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 12:16:53.301 +05:30 [INF] Found 1 patients matching search
2025-07-24 12:16:53.301 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:16:53.301 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 14.428ms
2025-07-24 12:16:53.302 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:16:53.302 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 16.3618 ms
2025-07-24 12:16:53.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 19.3385ms
2025-07-24 12:16:56.748 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:16:56.748 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:56.748 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5587ms
2025-07-24 12:16:56.750 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:16:56.751 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:56.751 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 12:16:56.751 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:16:56.763 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 12:16:56.764 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:16:56.765 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 13.3136ms
2025-07-24 12:16:56.765 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 12:16:56.765 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 14.1947 ms
2025-07-24 12:16:56.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 15.1094ms
2025-07-24 12:16:58.243 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:16:58.243 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:58.244 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:16:58.244 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:16:58.244 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.0877ms
2025-07-24 12:16:59.526 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 12:16:59.527 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:16:59.528 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 12:16:59.528 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:16:59.528 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.5063ms
2025-07-24 12:22:58.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 12:22:58.236 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.236 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5148ms
2025-07-24 12:22:58.238 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 12:22:58.238 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.239 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:22:58.239 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 12:22:58.254 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 12:22:58.814 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 12:22:58.814 +05:30 [INF] Role: Patient
2025-07-24 12:22:58.814 +05:30 [INF] Role: Patient
2025-07-24 12:22:58.814 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 12:22:58.820 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 12:22:58.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 12:22:58.821 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 581.9569ms
2025-07-24 12:22:58.821 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:22:58.821 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 582.8451 ms
2025-07-24 12:22:58.822 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 583.6004ms
2025-07-24 12:22:58.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:22:58.826 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.826 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6497ms
2025-07-24 12:22:58.828 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:22:58.828 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.829 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:22:58.830 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 12:22:58.831 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 12:22:58.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 12:22:58.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 12:22:58.836 +05:30 [INF] Found 1 users among search
2025-07-24 12:22:58.836 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:22:58.837 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.8714ms
2025-07-24 12:22:58.837 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:22:58.838 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.8850 ms
2025-07-24 12:22:58.838 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 514 application/json; charset=utf-8 10.285ms
2025-07-24 12:22:58.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:22:58.878 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.879 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7656ms
2025-07-24 12:22:58.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:22:58.889 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:22:58.890 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:22:58.891 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:22:58.891 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 12:22:58.900 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 12:22:58.906 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 12:22:58.907 +05:30 [INF] Found 1 patients matching search
2025-07-24 12:22:58.907 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:22:58.907 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 16.3694ms
2025-07-24 12:22:58.908 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:22:58.908 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 17.9512 ms
2025-07-24 12:22:58.908 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 20.843ms
2025-07-24 12:23:03.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 12:23:03.909 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:03.910 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4783ms
2025-07-24 12:23:03.912 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 12:23:03.912 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:03.913 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 12:23:03.913 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:23:03.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.8409ms
2025-07-24 12:23:05.463 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 12:23:05.463 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:05.464 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 12:23:05.464 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 12:23:05.465 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0736ms
2025-07-24 12:23:06.736 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 12:23:06.737 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:06.737 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4517ms
2025-07-24 12:23:06.738 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 12:23:06.739 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:06.739 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:23:06.739 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 12:23:06.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 12:23:07.667 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 12:23:07.667 +05:30 [INF] Role: Patient
2025-07-24 12:23:07.667 +05:30 [INF] Role: Patient
2025-07-24 12:23:07.667 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 12:23:07.670 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 12:23:07.671 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 12:23:07.671 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 932.1269ms
2025-07-24 12:23:07.672 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 12:23:07.672 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 933.1942 ms
2025-07-24 12:23:07.672 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 934.325ms
2025-07-24 12:23:07.677 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:23:07.677 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:07.677 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.4537ms
2025-07-24 12:23:07.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 12:23:07.680 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:07.681 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:23:07.681 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 12:23:07.682 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 12:23:07.688 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 12:23:07.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 12:23:07.693 +05:30 [INF] Found 1 users among search
2025-07-24 12:23:07.693 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:23:07.694 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.3471ms
2025-07-24 12:23:07.695 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 12:23:07.695 +05:30 [INF] HTTP GET /api/user/search responded 200 in 14.5504 ms
2025-07-24 12:23:07.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 16.5062ms
2025-07-24 12:23:07.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:23:07.703 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:07.704 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7788ms
2025-07-24 12:23:07.706 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 12:23:07.706 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:07.707 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:23:07.707 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 12:23:07.708 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 12:23:07.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 12:23:07.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 12:23:07.713 +05:30 [INF] Found 1 patients matching search
2025-07-24 12:23:07.713 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:23:07.714 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 6.7299ms
2025-07-24 12:23:07.714 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 12:23:07.715 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 8.1917 ms
2025-07-24 12:23:07.715 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 9.3756ms
2025-07-24 12:23:10.685 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 12:23:10.685 +05:30 [INF] CORS policy execution successful.
2025-07-24 12:23:10.686 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 12:23:10.686 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 12:23:10.697 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 12:23:10.697 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 12:23:10.698 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 12.3313ms
2025-07-24 12:23:10.699 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 12:23:10.699 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 13.4869 ms
2025-07-24 12:23:10.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 14.2353ms
2025-07-24 13:27:46.938 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:27:46.939 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:46.939 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:27:46.940 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:27:46.940 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2849ms
2025-07-24 13:27:48.227 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 13:27:48.227 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3407ms
2025-07-24 13:27:48.229 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 13:27:48.229 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.229 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:27:48.229 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 13:27:48.241 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 13:27:48.822 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 13:27:48.822 +05:30 [INF] Role: Patient
2025-07-24 13:27:48.822 +05:30 [INF] Role: Patient
2025-07-24 13:27:48.822 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 13:27:48.827 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 13:27:48.828 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 13:27:48.828 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 598.4237ms
2025-07-24 13:27:48.828 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:27:48.828 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 599.2751 ms
2025-07-24 13:27:48.828 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 599.7331ms
2025-07-24 13:27:48.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:27:48.832 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.832 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5456ms
2025-07-24 13:27:48.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:27:48.834 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.835 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:48.835 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:27:48.836 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:27:48.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 13:27:48.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 13:27:48.845 +05:30 [INF] Found 1 users among search
2025-07-24 13:27:48.846 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:27:48.848 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 13.3522ms
2025-07-24 13:27:48.849 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:48.850 +05:30 [INF] HTTP GET /api/user/search responded 200 in 15.0921 ms
2025-07-24 13:27:48.850 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 16.0565ms
2025-07-24 13:27:48.853 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:27:48.854 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 1.1973ms
2025-07-24 13:27:48.857 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:27:48.857 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:48.858 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:48.858 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:27:48.859 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 13:27:48.865 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 13:27:48.870 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 13:27:48.871 +05:30 [INF] Found 1 patients matching search
2025-07-24 13:27:48.871 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:27:48.872 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 13.4368ms
2025-07-24 13:27:48.872 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:48.872 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 14.3354 ms
2025-07-24 13:27:48.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 15.3443ms
2025-07-24 13:27:55.631 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:27:55.631 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:55.631 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:27:55.632 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:27:55.632 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0467ms
2025-07-24 13:27:56.947 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 13:27:56.947 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:56.948 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3395ms
2025-07-24 13:27:56.950 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 13:27:56.950 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:56.950 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:27:56.950 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 13:27:56.952 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 13:27:57.498 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 13:27:57.499 +05:30 [INF] Role: Patient
2025-07-24 13:27:57.499 +05:30 [INF] Role: Patient
2025-07-24 13:27:57.499 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 13:27:57.504 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 13:27:57.504 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 13:27:57.505 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 554.425ms
2025-07-24 13:27:57.505 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:27:57.505 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 555.0062 ms
2025-07-24 13:27:57.505 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 555.6405ms
2025-07-24 13:27:57.508 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:27:57.508 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:57.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5908ms
2025-07-24 13:27:57.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:27:57.511 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:57.511 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:57.511 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:27:57.512 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:27:57.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 13:27:57.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 13:27:57.516 +05:30 [INF] Found 1 users among search
2025-07-24 13:27:57.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:27:57.516 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.1543ms
2025-07-24 13:27:57.517 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:57.517 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.1049 ms
2025-07-24 13:27:57.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 6.8722ms
2025-07-24 13:27:57.522 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:27:57.522 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:57.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.624ms
2025-07-24 13:27:57.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:27:57.525 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:27:57.525 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:57.525 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:27:57.526 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 13:27:57.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 13:27:57.530 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 13:27:57.530 +05:30 [INF] Found 1 patients matching search
2025-07-24 13:27:57.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:27:57.531 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 5.6424ms
2025-07-24 13:27:57.532 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:27:57.532 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 6.6180 ms
2025-07-24 13:27:57.532 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 7.3891ms
2025-07-24 13:28:00.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 13:28:00.750 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:28:00.751 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.0128ms
2025-07-24 13:28:00.752 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:28:00.753 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:28:00.753 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 13:28:00.753 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:28:00.762 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:28:00.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:28:00.764 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 9.5823ms
2025-07-24 13:28:00.764 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 13:28:00.764 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 11.2295 ms
2025-07-24 13:28:00.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 12.0111ms
2025-07-24 13:37:55.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 13:37:55.831 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:55.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9027ms
2025-07-24 13:37:55.832 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:37:55.832 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:55.832 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:37:55.833 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:37:55.833 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7556ms
2025-07-24 13:37:55.843 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:37:55.843 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:55.844 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 13:37:55.844 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:37:55.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.6317ms
2025-07-24 13:37:57.261 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:37:57.262 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:57.262 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:37:57.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:37:57.263 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:37:57.263 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:57.264 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0399ms
2025-07-24 13:37:57.264 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 13:37:57.264 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:37:57.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 2.2557ms
2025-07-24 13:37:58.791 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:37:58.792 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:37:58.792 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:37:58.792 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:37:58.792 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1004ms
2025-07-24 13:38:02.809 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:38:02.809 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:38:02.809 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:38:02.810 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:38:02.810 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.5909ms
2025-07-24 13:40:10.714 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 13:40:10.715 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:10.715 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5199ms
2025-07-24 13:40:10.717 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:40:10.718 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:10.718 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:40:10.718 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:10.718 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1337ms
2025-07-24 13:40:10.720 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:40:10.720 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:10.720 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 13:40:10.720 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:10.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.8503ms
2025-07-24 13:40:12.521 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:40:12.522 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:12.522 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:40:12.522 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:12.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9426ms
2025-07-24 13:40:22.979 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 13:40:22.979 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:22.979 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6003ms
2025-07-24 13:40:22.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:40:22.982 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:22.982 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 13:40:22.982 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:22.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.6559ms
2025-07-24 13:40:24.605 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:40:24.605 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:24.605 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:40:24.605 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:24.606 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0217ms
2025-07-24 13:40:25.916 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 13:40:25.917 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:25.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.43ms
2025-07-24 13:40:25.918 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 13:40:25.918 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:25.919 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:40:25.919 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 13:40:25.949 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 13:40:26.494 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 13:40:26.494 +05:30 [INF] Role: Patient
2025-07-24 13:40:26.494 +05:30 [INF] Role: Patient
2025-07-24 13:40:26.494 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 13:40:26.502 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 13:40:26.502 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 13:40:26.503 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 583.8004ms
2025-07-24 13:40:26.503 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:40:26.503 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 584.4494 ms
2025-07-24 13:40:26.503 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 585.1472ms
2025-07-24 13:40:26.506 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:40:26.506 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:26.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.4088ms
2025-07-24 13:40:26.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:40:26.509 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:26.509 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:40:26.509 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:40:26.510 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:40:26.512 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 13:40:26.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 13:40:26.515 +05:30 [INF] Found 1 users among search
2025-07-24 13:40:26.515 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:40:26.516 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.2015ms
2025-07-24 13:40:26.516 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:40:26.516 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3629 ms
2025-07-24 13:40:26.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 8.343ms
2025-07-24 13:40:26.521 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:40:26.522 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:26.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.5142ms
2025-07-24 13:40:26.524 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:40:26.525 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:26.525 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:40:26.525 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:40:26.526 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 13:40:26.534 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 13:40:26.539 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 13:40:26.540 +05:30 [INF] Found 1 patients matching search
2025-07-24 13:40:26.540 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:40:26.540 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 14.8506ms
2025-07-24 13:40:26.540 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:40:26.540 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 15.4840 ms
2025-07-24 13:40:26.541 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 16.2187ms
2025-07-24 13:40:52.713 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:40:52.714 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:40:52.714 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:40:52.715 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:40:52.715 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7806ms
2025-07-24 13:42:45.444 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:42:45.444 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:42:45.444 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:42:45.444 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:42:45.444 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.5322ms
2025-07-24 13:43:32.598 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:43:32.599 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:32.599 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:43:32.600 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:43:32.601 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.3408ms
2025-07-24 13:43:50.578 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:43:50.579 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:50.579 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:43:50.579 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:43:50.579 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9466ms
2025-07-24 13:43:56.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 13:43:56.207 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:56.208 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8768ms
2025-07-24 13:43:56.209 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 13:43:56.209 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:56.210 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:43:56.210 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 13:43:56.230 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 13:43:57.109 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 13:43:57.110 +05:30 [INF] Role: Admin
2025-07-24 13:43:57.110 +05:30 [INF] Role: Admin
2025-07-24 13:43:57.110 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 13:43:57.124 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 13:43:57.125 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 13:43:57.126 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 915.8203ms
2025-07-24 13:43:57.126 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:43:57.127 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 917.2950 ms
2025-07-24 13:43:57.127 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 917.9973ms
2025-07-24 13:43:57.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 13:43:57.130 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:57.131 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7977ms
2025-07-24 13:43:57.133 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 13:43:57.133 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:57.134 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:43:57.134 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:43:57.135 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:43:57.138 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 13:43:57.145 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 13:43:57.145 +05:30 [INF] Found 1 users among search
2025-07-24 13:43:57.146 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:43:57.147 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 11.9514ms
2025-07-24 13:43:57.147 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:43:57.148 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.9427 ms
2025-07-24 13:43:57.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 15.0825ms
2025-07-24 13:43:57.152 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 13:43:57.152 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:57.153 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.9561ms
2025-07-24 13:43:57.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 13:43:57.156 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:57.157 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:43:57.157 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:43:57.159 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:43:57.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 13:43:57.177 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 13:43:57.178 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 13:43:57.188 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 13:43:57.189 +05:30 [INF] Found 1 users among search
2025-07-24 13:43:57.189 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:43:57.189 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 32.0751ms
2025-07-24 13:43:57.190 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:43:57.190 +05:30 [INF] HTTP GET /api/user/search responded 200 in 33.2315 ms
2025-07-24 13:43:57.190 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 34.4172ms
2025-07-24 13:43:59.386 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:43:59.386 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:43:59.386 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:43:59.386 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:43:59.404 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:43:59.405 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:43:59.405 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 18.2432ms
2025-07-24 13:43:59.405 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:43:59.405 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 19.0609 ms
2025-07-24 13:43:59.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 19.7421ms
2025-07-24 13:44:37.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:44:37.499 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:44:37.499 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:44:37.500 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:44:37.515 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:44:37.515 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:44:37.515 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 15.5898ms
2025-07-24 13:44:37.516 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:44:37.516 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 16.6700 ms
2025-07-24 13:44:37.516 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 17.4945ms
2025-07-24 13:51:28.788 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:51:28.789 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:51:28.789 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:51:28.789 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:51:28.825 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:51:28.826 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:51:28.826 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 36.4452ms
2025-07-24 13:51:28.826 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:51:28.826 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 37.2412 ms
2025-07-24 13:51:28.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 38.1784ms
2025-07-24 13:51:52.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:51:52.511 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:51:52.511 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:51:52.511 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:51:52.541 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:51:52.542 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:51:52.542 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 31.1216ms
2025-07-24 13:51:52.543 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:51:52.543 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 32.1467 ms
2025-07-24 13:51:52.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 33.1115ms
2025-07-24 13:52:17.458 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:52:17.458 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:52:17.458 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:52:17.459 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:52:17.461 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:52:17.462 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:52:17.462 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.1919ms
2025-07-24 13:52:17.462 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:52:17.463 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 4.3320 ms
2025-07-24 13:52:17.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 5.4411ms
2025-07-24 13:53:26.509 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:53:26.509 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:53:26.511 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:53:26.511 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:53:26.522 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:53:26.523 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:53:26.523 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 11.2206ms
2025-07-24 13:53:26.523 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:53:26.523 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 12.3243 ms
2025-07-24 13:53:26.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 14.6164ms
2025-07-24 13:53:42.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 13:53:42.480 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:53:42.481 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:53:42.481 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 13:53:42.483 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:53:42.484 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:53:42.484 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 2.2231ms
2025-07-24 13:53:42.484 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 13:53:42.484 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 3.8084 ms
2025-07-24 13:53:42.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 5.2058ms
2025-07-24 13:54:53.018 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 13:54:53.019 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:54:53.019 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 13:54:53.019 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 13:54:53.019 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.2334ms
2025-07-24 13:54:59.592 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 13:54:59.593 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:54:59.593 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5456ms
2025-07-24 13:54:59.594 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 13:54:59.595 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:54:59.595 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:54:59.595 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 13:54:59.620 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 13:55:00.531 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 13:55:00.531 +05:30 [INF] Role: Patient
2025-07-24 13:55:00.532 +05:30 [INF] Role: Patient
2025-07-24 13:55:00.532 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 13:55:00.542 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 13:55:00.544 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 13:55:00.544 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 948.4859ms
2025-07-24 13:55:00.545 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 13:55:00.545 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 950.1748 ms
2025-07-24 13:55:00.546 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 951.195ms
2025-07-24 13:55:00.548 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:55:00.549 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:00.549 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5996ms
2025-07-24 13:55:00.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 13:55:00.552 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:00.552 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:55:00.553 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 13:55:00.554 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 13:55:00.556 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 13:55:00.559 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 13:55:00.560 +05:30 [INF] Found 1 users among search
2025-07-24 13:55:00.560 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:55:00.563 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.271ms
2025-07-24 13:55:00.564 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 13:55:00.564 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.6990 ms
2025-07-24 13:55:00.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 13.0738ms
2025-07-24 13:55:00.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:55:00.569 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:00.569 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.6719ms
2025-07-24 13:55:00.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 13:55:00.573 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:00.573 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:55:00.574 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:55:00.575 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 13:55:00.583 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 13:55:00.590 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 13:55:00.590 +05:30 [INF] Found 1 patients matching search
2025-07-24 13:55:00.591 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:55:00.591 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.165ms
2025-07-24 13:55:00.591 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 13:55:00.591 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 18.3566 ms
2025-07-24 13:55:00.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 19.3434ms
2025-07-24 13:55:04.683 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 13:55:04.683 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:04.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5536ms
2025-07-24 13:55:04.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 13:55:04.687 +05:30 [INF] CORS policy execution successful.
2025-07-24 13:55:04.688 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 13:55:04.688 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 13:55:04.697 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 13:55:04.698 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 13:55:04.698 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 10.4424ms
2025-07-24 13:55:04.699 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 13:55:04.699 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 11.7679 ms
2025-07-24 13:55:04.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 12.724ms
2025-07-24 14:01:55.019 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 14:01:55.019 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:55.020 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 14:01:55.020 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 14:01:55.021 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.8263ms
2025-07-24 14:01:57.261 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 14:01:57.261 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:57.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5737ms
2025-07-24 14:01:57.264 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 14:01:57.264 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:57.265 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 14:01:57.266 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 14:01:57.295 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 14:01:58.345 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 14:01:58.346 +05:30 [INF] Role: Patient
2025-07-24 14:01:58.346 +05:30 [INF] Role: Patient
2025-07-24 14:01:58.347 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 14:01:58.357 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 14:01:58.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 14:01:58.359 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1093.5231ms
2025-07-24 14:01:58.360 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 14:01:58.361 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1095.5527 ms
2025-07-24 14:01:58.361 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 1097.0556ms
2025-07-24 14:01:58.365 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 14:01:58.365 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:58.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.9563ms
2025-07-24 14:01:58.368 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 14:01:58.368 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:58.369 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 14:01:58.369 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 14:01:58.370 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 14:01:58.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 14:01:58.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 14:01:58.377 +05:30 [INF] Found 1 users among search
2025-07-24 14:01:58.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 14:01:58.378 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.6082ms
2025-07-24 14:01:58.378 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 14:01:58.378 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.0080 ms
2025-07-24 14:01:58.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 11.3596ms
2025-07-24 14:01:58.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 14:01:58.382 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:58.383 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.7926ms
2025-07-24 14:01:58.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 14:01:58.386 +05:30 [INF] CORS policy execution successful.
2025-07-24 14:01:58.386 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 14:01:58.387 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 14:01:58.388 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 14:01:58.395 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 14:01:58.401 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 14:01:58.402 +05:30 [INF] Found 1 patients matching search
2025-07-24 14:01:58.402 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 14:01:58.402 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 15.0113ms
2025-07-24 14:01:58.402 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 14:01:58.402 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 16.1692 ms
2025-07-24 14:01:58.403 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 17.6629ms
2025-07-24 15:21:28.806 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 15:21:28.807 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:28.807 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 15:21:28.807 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 15:21:28.808 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1379ms
2025-07-24 15:21:30.099 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 15:21:30.099 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7396ms
2025-07-24 15:21:30.101 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 15:21:30.101 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.102 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 15:21:30.102 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 15:21:30.130 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 15:21:30.717 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 15:21:30.717 +05:30 [INF] Role: Patient
2025-07-24 15:21:30.717 +05:30 [INF] Role: Patient
2025-07-24 15:21:30.718 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 15:21:30.729 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 15:21:30.729 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:21:30.730 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 627.6038ms
2025-07-24 15:21:30.730 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 15:21:30.730 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 628.6878 ms
2025-07-24 15:21:30.730 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 629.3642ms
2025-07-24 15:21:30.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 15:21:30.734 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.734 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.5328ms
2025-07-24 15:21:30.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 15:21:30.736 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.737 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 15:21:30.737 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 15:21:30.738 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 15:21:30.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 15:21:30.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 15:21:30.743 +05:30 [INF] Found 1 users among search
2025-07-24 15:21:30.743 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 15:21:30.745 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.4762ms
2025-07-24 15:21:30.746 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 15:21:30.746 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.5904 ms
2025-07-24 15:21:30.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 10.5701ms
2025-07-24 15:21:30.753 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 15:21:30.753 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.754 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.8776ms
2025-07-24 15:21:30.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 15:21:30.756 +05:30 [INF] CORS policy execution successful.
2025-07-24 15:21:30.756 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 15:21:30.757 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 15:21:30.757 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 15:21:30.766 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 15:21:30.773 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 15:21:30.774 +05:30 [INF] Found 1 patients matching search
2025-07-24 15:21:30.774 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 15:21:30.774 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.5766ms
2025-07-24 15:21:30.774 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 15:21:30.775 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 18.5277 ms
2025-07-24 15:21:30.775 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 19.2272ms
2025-07-24 15:55:06.539 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/1 - null null
2025-07-24 15:55:06.542 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '18-07-2025 11:21:45', Current time (UTC): '24-07-2025 10:25:06'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-24 15:55:06.545 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '18-07-2025 11:21:45', Current time (UTC): '24-07-2025 10:25:06'.
2025-07-24 15:55:06.572 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Get (HealthcareApi)'
2025-07-24 15:55:06.585 +05:30 [INF] Route matched with {action = "Get", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 15:55:06.627 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[DoctorID] = @__id_0
2025-07-24 15:55:06.630 +05:30 [INF] Executing OkObjectResult, writing value of type 'HealthcareApi.Models.Doctor'.
2025-07-24 15:55:06.630 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Get (HealthcareApi) in 45.192ms
2025-07-24 15:55:06.631 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Get (HealthcareApi)'
2025-07-24 15:55:06.631 +05:30 [INF] HTTP GET /api/doctor/1 responded 200 in 85.4821 ms
2025-07-24 15:55:06.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/1 - 200 316 application/json; charset=utf-8 92.8707ms
2025-07-24 16:14:13.451 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:14:13.452 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:13.453 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:14:13.453 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:14:13.453 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.887ms
2025-07-24 16:14:51.315 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:14:51.315 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.316 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.1808ms
2025-07-24 16:14:51.318 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 16:14:51.318 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.318 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:14:51.319 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:14:51.346 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:14:51.925 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 16:14:51.925 +05:30 [INF] Role: Admin
2025-07-24 16:14:51.925 +05:30 [INF] Role: Admin
2025-07-24 16:14:51.925 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 16:14:51.935 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:14:51.936 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:14:51.936 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 617.531ms
2025-07-24 16:14:51.936 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:14:51.937 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 618.3510 ms
2025-07-24 16:14:51.937 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 619.0115ms
2025-07-24 16:14:51.940 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:14:51.940 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.941 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6255ms
2025-07-24 16:14:51.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:14:51.943 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.943 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:14:51.943 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:14:51.944 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:14:51.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:14:51.951 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:14:51.951 +05:30 [INF] Found 1 users among search
2025-07-24 16:14:51.952 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:14:51.954 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.9788ms
2025-07-24 16:14:51.954 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:14:51.954 +05:30 [INF] HTTP GET /api/user/search responded 200 in 11.3340 ms
2025-07-24 16:14:51.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 12.3416ms
2025-07-24 16:14:51.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:14:51.965 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.9699ms
2025-07-24 16:14:51.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:14:51.968 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:14:51.969 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:14:51.969 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:14:51.970 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:14:51.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 16:14:51.976 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:14:51.976 +05:30 [INF] Found 1 users among search
2025-07-24 16:14:51.977 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:14:51.977 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.6197ms
2025-07-24 16:14:51.977 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:14:51.977 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.8228 ms
2025-07-24 16:14:51.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.6462ms
2025-07-24 16:25:17.520 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:25:17.521 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:17.521 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:25:17.521 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:25:17.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3096ms
2025-07-24 16:25:20.616 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:25:20.616 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:20.616 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4356ms
2025-07-24 16:25:20.618 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 16:25:20.618 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:20.618 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:25:20.619 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:25:20.644 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:25:21.256 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 16:25:21.256 +05:30 [INF] Role: Patient
2025-07-24 16:25:21.256 +05:30 [INF] Role: Patient
2025-07-24 16:25:21.256 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 16:25:21.260 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:25:21.261 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:25:21.262 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 642.922ms
2025-07-24 16:25:21.262 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:25:21.262 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 644.0287 ms
2025-07-24 16:25:21.263 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 644.6967ms
2025-07-24 16:25:21.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:25:21.266 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:21.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.7554ms
2025-07-24 16:25:21.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:25:21.269 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:21.269 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:25:21.269 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:25:21.270 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:25:21.273 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:25:21.276 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:25:21.276 +05:30 [INF] Found 1 users among search
2025-07-24 16:25:21.277 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:25:21.279 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.9124ms
2025-07-24 16:25:21.279 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:25:21.279 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.0609 ms
2025-07-24 16:25:21.280 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 11.2519ms
2025-07-24 16:25:21.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:25:21.289 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:21.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 1.1516ms
2025-07-24 16:25:21.292 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:25:21.293 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:25:21.294 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:25:21.294 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 16:25:21.295 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 16:25:21.302 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 16:25:21.310 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:25:21.310 +05:30 [INF] Found 1 patients matching search
2025-07-24 16:25:21.311 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:25:21.311 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.1678ms
2025-07-24 16:25:21.312 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:25:21.313 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 19.4229 ms
2025-07-24 16:25:21.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 20.8165ms
2025-07-24 16:28:39.303 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:28:39.303 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:39.303 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:28:39.303 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:28:39.304 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.7802ms
2025-07-24 16:28:42.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:28:42.716 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:42.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5869ms
2025-07-24 16:28:42.718 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 16:28:42.718 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:42.718 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:28:42.718 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:28:42.728 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:28:43.771 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 16:28:43.771 +05:30 [INF] Role: Admin
2025-07-24 16:28:43.771 +05:30 [INF] Role: Admin
2025-07-24 16:28:43.771 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 16:28:43.781 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:28:43.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:28:43.783 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1063.9783ms
2025-07-24 16:28:43.783 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:28:43.783 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1064.7175 ms
2025-07-24 16:28:43.783 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1065.6871ms
2025-07-24 16:28:43.787 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:28:43.787 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:43.788 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6147ms
2025-07-24 16:28:43.789 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:28:43.790 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:43.790 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:28:43.790 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:28:43.791 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:28:43.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:28:43.797 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:28:43.797 +05:30 [INF] Found 1 users among search
2025-07-24 16:28:43.797 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:28:43.798 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.2614ms
2025-07-24 16:28:43.798 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:28:43.798 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.2486 ms
2025-07-24 16:28:43.798 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 9.1095ms
2025-07-24 16:28:43.810 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:28:43.811 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:43.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.9072ms
2025-07-24 16:28:43.813 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:28:43.814 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:28:43.814 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:28:43.814 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:28:43.815 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:28:43.818 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 16:28:43.821 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:28:43.821 +05:30 [INF] Found 1 users among search
2025-07-24 16:28:43.821 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:28:43.822 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3193ms
2025-07-24 16:28:43.822 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:28:43.822 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.3616 ms
2025-07-24 16:28:43.822 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.2094ms
2025-07-24 16:29:55.802 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:29:55.803 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:55.803 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:29:55.803 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:29:55.804 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3855ms
2025-07-24 16:29:58.708 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:29:58.709 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:58.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5599ms
2025-07-24 16:29:58.711 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 16:29:58.712 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:58.712 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:29:58.713 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:29:58.723 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:29:59.746 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 16:29:59.746 +05:30 [INF] Role: Patient
2025-07-24 16:29:59.746 +05:30 [INF] Role: Patient
2025-07-24 16:29:59.747 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 16:29:59.755 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:29:59.756 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:29:59.756 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1043.2777ms
2025-07-24 16:29:59.757 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:29:59.757 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1044.5436 ms
2025-07-24 16:29:59.757 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 1045.7835ms
2025-07-24 16:29:59.760 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:29:59.760 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:59.760 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.7903ms
2025-07-24 16:29:59.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:29:59.763 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:59.763 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:29:59.764 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:29:59.764 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:29:59.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:29:59.770 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:29:59.770 +05:30 [INF] Found 1 users among search
2025-07-24 16:29:59.771 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:29:59.771 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3489ms
2025-07-24 16:29:59.771 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:29:59.772 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.3793 ms
2025-07-24 16:29:59.772 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 9.428ms
2025-07-24 16:29:59.782 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:29:59.783 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:59.784 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 1.7937ms
2025-07-24 16:29:59.788 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:29:59.788 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:29:59.788 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:29:59.789 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 16:29:59.789 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 16:29:59.797 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 16:29:59.804 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:29:59.805 +05:30 [INF] Found 1 patients matching search
2025-07-24 16:29:59.805 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:29:59.805 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 16.6293ms
2025-07-24 16:29:59.806 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:29:59.806 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 17.5199 ms
2025-07-24 16:29:59.806 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 18.3ms
2025-07-24 16:31:48.801 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:31:48.801 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:48.802 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:31:48.802 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:31:48.802 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.119ms
2025-07-24 16:31:52.023 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:31:52.023 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:52.023 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6188ms
2025-07-24 16:31:52.025 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 16:31:52.026 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:52.026 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:31:52.026 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:31:52.043 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:31:53.089 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 16:31:53.090 +05:30 [INF] Role: Admin
2025-07-24 16:31:53.090 +05:30 [INF] Role: Admin
2025-07-24 16:31:53.091 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 16:31:53.100 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:31:53.100 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:31:53.101 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1074.2183ms
2025-07-24 16:31:53.101 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:31:53.101 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1075.4540 ms
2025-07-24 16:31:53.102 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1076.4588ms
2025-07-24 16:31:53.105 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:31:53.105 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:53.106 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6738ms
2025-07-24 16:31:53.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 16:31:53.109 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:53.111 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:31:53.111 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:31:53.112 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:31:53.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:31:53.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:31:53.120 +05:30 [INF] Found 1 users among search
2025-07-24 16:31:53.120 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:31:53.121 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 9.2036ms
2025-07-24 16:31:53.121 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:31:53.121 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.8125 ms
2025-07-24 16:31:53.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 12.7504ms
2025-07-24 16:31:53.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:31:53.142 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:53.143 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.9437ms
2025-07-24 16:31:53.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 16:31:53.152 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:31:53.152 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:31:53.153 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:31:53.154 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:31:53.160 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 16:31:53.164 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:31:53.164 +05:30 [INF] Found 1 users among search
2025-07-24 16:31:53.165 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:31:53.165 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 12.2736ms
2025-07-24 16:31:53.166 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:31:53.166 +05:30 [INF] HTTP GET /api/user/search responded 200 in 13.6271 ms
2025-07-24 16:31:53.166 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 14.5377ms
2025-07-24 16:51:06.265 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 16:51:06.265 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:06.266 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 16:51:06.266 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 16:51:06.266 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5171ms
2025-07-24 16:51:09.043 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 16:51:09.044 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:09.044 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5583ms
2025-07-24 16:51:09.046 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 16:51:09.046 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:09.048 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:51:09.048 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 16:51:09.096 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 16:51:10.043 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 16:51:10.044 +05:30 [INF] Role: Patient
2025-07-24 16:51:10.044 +05:30 [INF] Role: Patient
2025-07-24 16:51:10.044 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 16:51:10.053 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 16:51:10.054 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 16:51:10.055 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1006.204ms
2025-07-24 16:51:10.055 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 16:51:10.055 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1008.1824 ms
2025-07-24 16:51:10.056 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 1009.9929ms
2025-07-24 16:51:10.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:51:10.059 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:10.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6579ms
2025-07-24 16:51:10.061 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 16:51:10.062 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:10.062 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:51:10.062 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 16:51:10.063 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 16:51:10.066 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 16:51:10.069 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 16:51:10.070 +05:30 [INF] Found 1 users among search
2025-07-24 16:51:10.070 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:51:10.071 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.4191ms
2025-07-24 16:51:10.071 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 16:51:10.071 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.4883 ms
2025-07-24 16:51:10.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 10.4436ms
2025-07-24 16:51:10.080 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:51:10.081 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:10.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.5351ms
2025-07-24 16:51:10.083 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 16:51:10.083 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:10.084 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:51:10.084 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 16:51:10.085 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 16:51:10.093 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 16:51:10.098 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 16:51:10.099 +05:30 [INF] Found 1 patients matching search
2025-07-24 16:51:10.099 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:51:10.099 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 14.9628ms
2025-07-24 16:51:10.100 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 16:51:10.100 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 15.8675 ms
2025-07-24 16:51:10.100 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 17.1689ms
2025-07-24 16:51:31.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 16:51:31.598 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:31.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5579ms
2025-07-24 16:51:31.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 16:51:31.601 +05:30 [INF] CORS policy execution successful.
2025-07-24 16:51:31.601 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 16:51:31.602 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 16:51:31.615 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 16:51:31.615 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 16:51:31.616 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 14.079ms
2025-07-24 16:51:31.616 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 16:51:31.616 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 14.9767 ms
2025-07-24 16:51:31.616 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 15.7045ms
2025-07-24 17:07:39.328 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-24 17:07:39.328 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:39.328 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.7696ms
2025-07-24 17:07:39.330 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-24 17:07:39.331 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:39.331 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:07:39.331 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 17:07:39.343 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-24 17:07:39.360 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:07:39.362 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:07:39.362 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 30.7888ms
2025-07-24 17:07:39.362 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:07:39.363 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 31.6958 ms
2025-07-24 17:07:39.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 32.721ms
2025-07-24 17:07:47.828 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-24 17:07:47.829 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:47.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 0.6371ms
2025-07-24 17:07:47.831 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 155
2025-07-24 17:07:47.831 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:47.832 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:07:47.832 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-24 17:07:47.838 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-24 17:07:47.839 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 7.1288ms
2025-07-24 17:07:47.840 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:07:47.840 +05:30 [INF] HTTP POST /api/appointment responded 400 in 8.2865 ms
2025-07-24 17:07:47.840 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 400 264 application/problem+json; charset=utf-8 9.2736ms
2025-07-24 17:07:51.440 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:07:51.441 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:51.441 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:07:51.441 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:07:51.442 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3131ms
2025-07-24 17:07:52.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:07:52.557 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:52.557 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5031ms
2025-07-24 17:07:52.558 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 17:07:52.558 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:52.558 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:07:52.559 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:07:52.572 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:07:53.345 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 17:07:53.345 +05:30 [INF] Role: Patient
2025-07-24 17:07:53.345 +05:30 [INF] Role: Patient
2025-07-24 17:07:53.345 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 17:07:53.355 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:07:53.355 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:07:53.356 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 796.8148ms
2025-07-24 17:07:53.356 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:07:53.356 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 797.4454 ms
2025-07-24 17:07:53.356 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 798.1605ms
2025-07-24 17:07:53.359 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:07:53.359 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:53.359 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.7883ms
2025-07-24 17:07:53.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:07:53.362 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:53.362 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:07:53.362 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:07:53.363 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:07:53.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:07:53.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:07:53.368 +05:30 [INF] Found 1 users among search
2025-07-24 17:07:53.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:07:53.369 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.035ms
2025-07-24 17:07:53.371 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:07:53.371 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.2577 ms
2025-07-24 17:07:53.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 10.2376ms
2025-07-24 17:07:53.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:07:53.385 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:53.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 2.8117ms
2025-07-24 17:07:53.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:07:53.390 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:53.391 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:07:53.391 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:07:53.392 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 17:07:53.401 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 17:07:53.409 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:07:53.410 +05:30 [INF] Found 1 patients matching search
2025-07-24 17:07:53.410 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:07:53.410 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 18.79ms
2025-07-24 17:07:53.410 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:07:53.410 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 19.8323 ms
2025-07-24 17:07:53.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 21.0375ms
2025-07-24 17:07:56.957 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:07:56.957 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:56.957 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6684ms
2025-07-24 17:07:56.960 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:07:56.960 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:56.961 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:07:56.962 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:07:56.967 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 17:07:56.968 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:07:56.968 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 5.8628ms
2025-07-24 17:07:56.969 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:07:56.969 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 7.7675 ms
2025-07-24 17:07:56.969 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 9.4755ms
2025-07-24 17:07:57.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:07:57.984 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:57.984 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 17:07:57.985 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:07:57.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 1.7411ms
2025-07-24 17:07:59.026 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:07:59.027 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:59.027 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:07:59.027 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:07:59.028 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.2533ms
2025-07-24 17:07:59.984 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:07:59.984 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:59.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5844ms
2025-07-24 17:07:59.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 17:07:59.986 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:07:59.987 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:07:59.987 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:07:59.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:08:00.831 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 17:08:00.831 +05:30 [INF] Role: Patient
2025-07-24 17:08:00.832 +05:30 [INF] Role: Patient
2025-07-24 17:08:00.832 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 17:08:00.841 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:08:00.841 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:08:00.842 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 854.0545ms
2025-07-24 17:08:00.842 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:08:00.842 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 855.4003 ms
2025-07-24 17:08:00.843 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 856.5808ms
2025-07-24 17:08:00.846 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:08:00.846 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:00.847 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6362ms
2025-07-24 17:08:00.848 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:08:00.849 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:00.849 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:00.849 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:08:00.850 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:08:00.852 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:08:00.854 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:08:00.855 +05:30 [INF] Found 1 users among search
2025-07-24 17:08:00.855 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:00.857 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.8384ms
2025-07-24 17:08:00.858 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:00.858 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.0921 ms
2025-07-24 17:08:00.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 515 application/json; charset=utf-8 9.844ms
2025-07-24 17:08:00.875 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:08:00.876 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:00.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.6859ms
2025-07-24 17:08:00.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:08:00.878 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:00.879 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:00.879 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:08:00.880 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 17:08:00.886 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 17:08:00.894 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:08:00.895 +05:30 [INF] Found 1 patients matching search
2025-07-24 17:08:00.895 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:00.895 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 16.1638ms
2025-07-24 17:08:00.896 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:00.896 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 17.0047 ms
2025-07-24 17:08:00.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 17.8112ms
2025-07-24 17:08:09.451 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:08:09.452 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:09.452 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:08:09.452 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:08:09.452 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3046ms
2025-07-24 17:08:12.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:08:12.243 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:12.243 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.611ms
2025-07-24 17:08:12.244 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 50
2025-07-24 17:08:12.245 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:12.245 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:08:12.246 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:08:12.249 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:08:13.171 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 17:08:13.176 +05:30 [INF] Role: Patient
2025-07-24 17:08:13.176 +05:30 [INF] Role: Patient
2025-07-24 17:08:13.176 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 17:08:13.178 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:08:13.179 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:08:13.179 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 932.9105ms
2025-07-24 17:08:13.179 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:08:13.179 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 934.1425 ms
2025-07-24 17:08:13.180 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 935.3783ms
2025-07-24 17:08:13.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:08:13.185 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:13.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 204 null null 0.6714ms
2025-07-24 17:08:13.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - null null
2025-07-24 17:08:13.188 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:13.189 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:13.190 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:08:13.191 +05:30 [INF] Searching users with params {"UID":null,"Username":["PTester"],"Role":null,"Email":["ptester@gmail.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:08:13.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:08:13.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:08:13.200 +05:30 [INF] Found 1 users among search
2025-07-24 17:08:13.200 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:13.207 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 17.2411ms
2025-07-24 17:08:13.209 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:13.210 +05:30 [INF] HTTP GET /api/user/search responded 200 in 20.5458 ms
2025-07-24 17:08:13.211 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=PTester&email=ptester@gmail.com - 200 516 application/json; charset=utf-8 23.0961ms
2025-07-24 17:08:13.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:08:13.216 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:13.217 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=901938 - 204 null null 0.8779ms
2025-07-24 17:08:13.220 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - null null
2025-07-24 17:08:13.221 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:13.221 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:13.222 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:08:13.223 +05:30 [INF] Searching patients with params {"PID":null,"UID":[901938],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 17:08:13.225 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 17:08:13.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:08:13.228 +05:30 [INF] Found 1 patients matching search
2025-07-24 17:08:13.228 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:13.229 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 6.2122ms
2025-07-24 17:08:13.229 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:08:13.229 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 8.5153 ms
2025-07-24 17:08:13.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=901938 - 200 418 application/json; charset=utf-8 9.7967ms
2025-07-24 17:08:16.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:08:16.836 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:16.837 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9842ms
2025-07-24 17:08:16.839 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:08:16.840 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:16.840 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:08:16.841 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:08:16.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 17:08:16.843 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:16.844 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.0383ms
2025-07-24 17:08:16.844 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:08:16.845 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 4.5993 ms
2025-07-24 17:08:16.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 720 application/json; charset=utf-8 5.7336ms
2025-07-24 17:08:21.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-24 17:08:21.627 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:21.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Cardiology - 204 null null 0.4688ms
2025-07-24 17:08:21.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - null null
2025-07-24 17:08:21.630 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:21.630 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:08:21.630 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 17:08:21.633 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-24 17:08:21.642 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:08:21.642 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:21.643 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 12.1141ms
2025-07-24 17:08:21.643 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:08:21.643 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 12.9292 ms
2025-07-24 17:08:21.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Cardiology - 200 386 application/json; charset=utf-8 14.0244ms
2025-07-24 17:08:30.503 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-24 17:08:30.503 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:30.504 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 0.8164ms
2025-07-24 17:08:30.508 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 155
2025-07-24 17:08:30.508 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:30.508 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:08:30.508 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-24 17:08:30.527 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 1000) (DbType = AnsiString), @p5='?' (DbType = Int32), @p6='?' (Size = 255) (DbType = AnsiString), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppointmentDate], [CreatedAt], [DoctorID], [ModifiedAt], [Notes], [PatientID], [Reason], [Status], [isActive])
OUTPUT INSERTED.[AppointmentID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-07-24 17:08:30.699 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'HealthcareApi.Models.Appointment'.
2025-07-24 17:08:30.703 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 193.7027ms
2025-07-24 17:08:30.703 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:08:30.703 +05:30 [INF] HTTP POST /api/appointment responded 201 in 195.1928 ms
2025-07-24 17:08:30.704 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 201 251 application/json; charset=utf-8 196.5574ms
2025-07-24 17:08:30.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:08:30.716 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:30.717 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.9109ms
2025-07-24 17:08:30.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:08:30.720 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:30.720 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:08:30.721 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:08:30.724 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 17:08:30.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:30.725 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 3.7702ms
2025-07-24 17:08:30.726 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:08:30.726 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 6.1335 ms
2025-07-24 17:08:30.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 835 application/json; charset=utf-8 7.162ms
2025-07-24 17:08:51.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Orthopedics - null null
2025-07-24 17:08:51.197 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:51.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?specialization=Orthopedics - 204 null null 0.7899ms
2025-07-24 17:08:51.199 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Orthopedics - null null
2025-07-24 17:08:51.200 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:08:51.200 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:08:51.201 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 17:08:51.204 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
2025-07-24 17:08:51.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_Specialization_0='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND @__qp_Specialization_0 = [d].[Specialization]
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:08:51.208 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:08:51.209 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 7.5754ms
2025-07-24 17:08:51.209 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:08:51.209 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 9.3439 ms
2025-07-24 17:08:51.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?specialization=Orthopedics - 200 391 application/json; charset=utf-8 10.555ms
2025-07-24 17:09:02.834 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - null null
2025-07-24 17:09:02.834 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:09:02.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/appointment - 204 null null 0.5519ms
2025-07-24 17:09:02.836 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/appointment - application/json 154
2025-07-24 17:09:02.837 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:09:02.838 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:09:02.838 +05:30 [INF] Route matched with {action = "Post", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(HealthcareApi.Models.Appointment) on controller HealthcareApi.Controllers.AppointmentController (HealthcareApi).
2025-07-24 17:09:02.865 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 1000) (DbType = AnsiString), @p5='?' (DbType = Int32), @p6='?' (Size = 255) (DbType = AnsiString), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppointmentDate], [CreatedAt], [DoctorID], [ModifiedAt], [Notes], [PatientID], [Reason], [Status], [isActive])
OUTPUT INSERTED.[AppointmentID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-07-24 17:09:02.985 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'HealthcareApi.Models.Appointment'.
2025-07-24 17:09:02.986 +05:30 [INF] Executed action HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi) in 147.0889ms
2025-07-24 17:09:02.986 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.AppointmentController.Post (HealthcareApi)'
2025-07-24 17:09:02.987 +05:30 [INF] HTTP POST /api/appointment responded 201 in 148.9059 ms
2025-07-24 17:09:02.987 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/appointment - 201 254 application/json; charset=utf-8 150.5047ms
2025-07-24 17:09:02.995 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:09:02.996 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:09:02.996 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.6508ms
2025-07-24 17:09:02.998 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:09:02.998 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:09:02.999 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:09:02.999 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:09:03.005 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 17:09:03.006 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:09:03.006 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 6.3473ms
2025-07-24 17:09:03.006 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:09:03.007 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 7.6530 ms
2025-07-24 17:09:03.007 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 8.9386ms
2025-07-24 17:25:48.995 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:25:48.996 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:48.997 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:25:48.997 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:25:48.998 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.5568ms
2025-07-24 17:25:53.277 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:25:53.278 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:53.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.888ms
2025-07-24 17:25:53.280 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:25:53.280 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:53.281 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:25:53.281 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:25:53.310 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:25:54.345 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 17:25:54.345 +05:30 [INF] Role: Admin
2025-07-24 17:25:54.346 +05:30 [INF] Role: Admin
2025-07-24 17:25:54.346 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:25:54.350 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:25:54.352 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:25:54.352 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1071.4948ms
2025-07-24 17:25:54.353 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:25:54.353 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1072.6889 ms
2025-07-24 17:25:54.354 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1073.5716ms
2025-07-24 17:25:54.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:25:54.357 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:54.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.7148ms
2025-07-24 17:25:54.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:25:54.360 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:54.361 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:25:54.361 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:25:54.362 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:25:54.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:25:54.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:25:54.367 +05:30 [INF] Found 1 users among search
2025-07-24 17:25:54.368 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:25:54.370 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.4709ms
2025-07-24 17:25:54.370 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:25:54.371 +05:30 [INF] HTTP GET /api/user/search responded 200 in 10.7911 ms
2025-07-24 17:25:54.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 12.6111ms
2025-07-24 17:25:54.377 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:25:54.377 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:54.378 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.8306ms
2025-07-24 17:25:54.380 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:25:54.380 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:25:54.381 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:25:54.381 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:25:54.381 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:25:54.383 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:25:54.385 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:25:54.385 +05:30 [INF] Found 1 users among search
2025-07-24 17:25:54.386 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:25:54.386 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.4321ms
2025-07-24 17:25:54.387 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:25:54.387 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.2988 ms
2025-07-24 17:25:54.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.2355ms
2025-07-24 17:29:27.352 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:29:27.352 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:27.353 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:29:27.353 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:29:27.353 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3949ms
2025-07-24 17:29:28.535 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:29:28.535 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:28.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4586ms
2025-07-24 17:29:28.537 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:29:28.537 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:28.537 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:29:28.538 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:29:28.560 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:29:29.251 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 17:29:29.252 +05:30 [INF] Role: Admin
2025-07-24 17:29:29.252 +05:30 [INF] Role: Admin
2025-07-24 17:29:29.252 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:29:29.258 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:29:29.259 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:29:29.260 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 721.9544ms
2025-07-24 17:29:29.260 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:29:29.261 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 723.2031 ms
2025-07-24 17:29:29.261 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 724.008ms
2025-07-24 17:29:29.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:29:29.267 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:29.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6163ms
2025-07-24 17:29:29.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:29:29.269 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:29.269 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:29:29.270 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:29:29.271 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:29:29.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:29:29.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:29:29.275 +05:30 [INF] Found 1 users among search
2025-07-24 17:29:29.276 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:29:29.277 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.1763ms
2025-07-24 17:29:29.277 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:29:29.278 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.5561 ms
2025-07-24 17:29:29.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 9.3942ms
2025-07-24 17:29:29.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:29:29.283 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:29.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.6194ms
2025-07-24 17:29:29.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:29:29.286 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:29.286 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:29:29.286 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:29:29.288 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:29:29.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:29:29.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:29:29.293 +05:30 [INF] Found 1 users among search
2025-07-24 17:29:29.293 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:29:29.293 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.7171ms
2025-07-24 17:29:29.294 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:29:29.294 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.8797 ms
2025-07-24 17:29:29.294 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.7084ms
2025-07-24 17:29:30.751 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:29:30.752 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:30.752 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5945ms
2025-07-24 17:29:30.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:29:30.754 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:29:30.755 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:29:30.755 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:29:30.763 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 17:29:30.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:29:30.764 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 8.8244ms
2025-07-24 17:29:30.764 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 17:29:30.764 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 9.5933 ms
2025-07-24 17:29:30.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 10.7398ms
2025-07-24 17:31:07.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:31:07.630 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:31:07.630 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.4922ms
2025-07-24 17:31:07.633 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:31:07.633 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:31:07.633 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 17:31:07.634 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:31:07.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.607ms
2025-07-24 17:31:34.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:31:34.440 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:31:34.440 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.786ms
2025-07-24 17:31:34.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:31:34.443 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:31:34.443 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 17:31:34.443 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:31:34.443 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 0.9833ms
2025-07-24 17:32:27.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 17:32:27.461 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:27.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 1.3011ms
2025-07-24 17:32:27.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 17:32:27.482 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:27.483 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Patient)
2025-07-24 17:32:27.483 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:32:27.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 401 0 null 3.2567ms
2025-07-24 17:32:29.920 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:32:29.920 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:29.920 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:32:29.921 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:32:29.921 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9882ms
2025-07-24 17:32:31.066 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:32:31.066 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.066 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5214ms
2025-07-24 17:32:31.068 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:32:31.068 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.069 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:32:31.069 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:32:31.096 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:32:31.634 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 17:32:31.635 +05:30 [INF] Role: Admin
2025-07-24 17:32:31.635 +05:30 [INF] Role: Admin
2025-07-24 17:32:31.635 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:32:31.642 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:32:31.643 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:32:31.643 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 574.3196ms
2025-07-24 17:32:31.643 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:32:31.643 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 574.8735 ms
2025-07-24 17:32:31.644 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 575.4175ms
2025-07-24 17:32:31.647 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:32:31.647 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.648 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.3635ms
2025-07-24 17:32:31.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:32:31.650 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.650 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:32:31.650 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:32:31.651 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:32:31.653 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:32:31.655 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:32:31.655 +05:30 [INF] Found 1 users among search
2025-07-24 17:32:31.656 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:32:31.656 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.5892ms
2025-07-24 17:32:31.657 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:32:31.657 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.0683 ms
2025-07-24 17:32:31.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 7.986ms
2025-07-24 17:32:31.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:32:31.670 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.670 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.5729ms
2025-07-24 17:32:31.672 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:32:31.672 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:32:31.672 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:32:31.673 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:32:31.673 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:32:31.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:32:31.677 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:32:31.677 +05:30 [INF] Found 1 users among search
2025-07-24 17:32:31.677 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:32:31.677 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 4.5549ms
2025-07-24 17:32:31.678 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:32:31.678 +05:30 [INF] HTTP GET /api/user/search responded 200 in 5.3207 ms
2025-07-24 17:32:31.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 6.29ms
2025-07-24 17:33:03.862 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:33:03.862 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:03.863 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:33:03.863 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:33:03.864 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.4011ms
2025-07-24 17:33:04.881 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:33:04.882 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:04.882 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.3505ms
2025-07-24 17:33:04.884 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:33:04.884 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:04.885 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:33:04.885 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:33:04.903 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:33:05.506 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 17:33:05.506 +05:30 [INF] Role: Admin
2025-07-24 17:33:05.506 +05:30 [INF] Role: Admin
2025-07-24 17:33:05.506 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:33:05.515 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:33:05.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:33:05.516 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 630.7031ms
2025-07-24 17:33:05.516 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:33:05.516 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 631.8241 ms
2025-07-24 17:33:05.516 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 632.5146ms
2025-07-24 17:33:05.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:33:05.519 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:05.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.3796ms
2025-07-24 17:33:05.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:33:05.522 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:05.522 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:05.522 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:33:05.523 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:33:05.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:33:05.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:33:05.528 +05:30 [INF] Found 1 users among search
2025-07-24 17:33:05.529 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:33:05.529 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.8068ms
2025-07-24 17:33:05.529 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:05.530 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.8934 ms
2025-07-24 17:33:05.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.7102ms
2025-07-24 17:33:05.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:33:05.543 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:05.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.5956ms
2025-07-24 17:33:05.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:33:05.545 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:05.546 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:05.546 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:33:05.547 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:33:05.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:33:05.552 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:33:05.553 +05:30 [INF] Found 1 users among search
2025-07-24 17:33:05.553 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:33:05.553 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.449ms
2025-07-24 17:33:05.553 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:05.553 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.5305 ms
2025-07-24 17:33:05.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.5991ms
2025-07-24 17:33:19.990 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:33:19.991 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:19.991 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:33:19.992 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:33:19.992 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4639ms
2025-07-24 17:33:21.010 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:33:21.011 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.011 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5444ms
2025-07-24 17:33:21.012 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:33:21.012 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.013 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:33:21.013 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:33:21.017 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:33:21.590 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 17:33:21.590 +05:30 [INF] Role: Admin
2025-07-24 17:33:21.590 +05:30 [INF] Role: Admin
2025-07-24 17:33:21.590 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:33:21.597 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:33:21.598 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:33:21.598 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 585.2311ms
2025-07-24 17:33:21.598 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:33:21.599 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 585.9833 ms
2025-07-24 17:33:21.599 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 587.0312ms
2025-07-24 17:33:21.602 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:33:21.603 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.603 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5248ms
2025-07-24 17:33:21.605 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 17:33:21.605 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.605 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:21.605 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:33:21.606 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:33:21.608 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:33:21.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:33:21.611 +05:30 [INF] Found 1 users among search
2025-07-24 17:33:21.611 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:33:21.612 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.2728ms
2025-07-24 17:33:21.612 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:21.613 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.6647 ms
2025-07-24 17:33:21.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.6046ms
2025-07-24 17:33:21.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:33:21.629 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.630 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.6967ms
2025-07-24 17:33:21.632 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 17:33:21.633 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:33:21.633 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:21.634 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:33:21.635 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:33:21.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:33:21.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:33:21.640 +05:30 [INF] Found 1 users among search
2025-07-24 17:33:21.640 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:33:21.640 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.3576ms
2025-07-24 17:33:21.641 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:33:21.641 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3390 ms
2025-07-24 17:33:21.641 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.3288ms
2025-07-24 17:46:57.283 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:46:57.284 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:46:57.285 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:46:57.285 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:46:57.285 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.789ms
2025-07-24 17:47:52.682 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - null null
2025-07-24 17:47:52.682 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:47:52.682 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - 204 null null 0.6341ms
2025-07-24 17:47:52.684 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/register - application/json 96
2025-07-24 17:47:52.685 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:47:52.686 +05:30 [INF] Executing endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:47:52.696 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:47:52.773 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__req_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__req_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-24 17:47:53.655 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 20), @p8='?' (Size = 50), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserID], [CreatedAt], [Email], [ModifiedAt], [PasswordHash], [RefreshToken], [RefreshTokenExpiry], [Role], [Username], [isActive])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-07-24 17:47:53.656 +05:30 [INF] User registered: test@patient.com
2025-07-24 17:47:53.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:47:53.660 +05:30 [INF] Executed action AuthController.Register (HealthcareApi) in 963.5046ms
2025-07-24 17:47:53.661 +05:30 [INF] Executed endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:47:53.661 +05:30 [INF] HTTP POST /api/auth/register responded 200 in 975.5205 ms
2025-07-24 17:47:53.662 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/register - 200 43 application/json; charset=utf-8 977.4109ms
2025-07-24 17:48:00.277 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:48:00.277 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:00.277 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5567ms
2025-07-24 17:48:00.279 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:48:00.280 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:00.280 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:00.281 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:48:00.285 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:48:01.419 +05:30 [INF] User logged in: test@patient.com
2025-07-24 17:48:01.420 +05:30 [INF] Role: Patient
2025-07-24 17:48:01.420 +05:30 [INF] Role: Patient
2025-07-24 17:48:01.420 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 17:48:01.429 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:48:01.430 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:48:01.430 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1149.4081ms
2025-07-24 17:48:01.431 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:01.431 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1150.9409 ms
2025-07-24 17:48:01.432 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 1152.4343ms
2025-07-24 17:48:01.436 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 17:48:01.436 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:01.436 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.6579ms
2025-07-24 17:48:01.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 17:48:01.438 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:01.439 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:01.439 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:48:01.439 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:48:01.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:48:01.444 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:48:01.444 +05:30 [INF] Found 1 users among search
2025-07-24 17:48:01.445 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:01.445 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8762ms
2025-07-24 17:48:01.445 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:01.445 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.8272 ms
2025-07-24 17:48:01.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 7.6765ms
2025-07-24 17:48:01.500 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 17:48:01.500 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:01.500 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5417ms
2025-07-24 17:48:01.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 17:48:01.502 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:01.503 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:01.503 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:48:01.504 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 17:48:01.513 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 17:48:01.526 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:48:01.526 +05:30 [INF] Found 0 patients matching search
2025-07-24 17:48:01.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:01.527 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 23.732ms
2025-07-24 17:48:01.527 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:01.527 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 24.6134 ms
2025-07-24 17:48:01.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 25.3876ms
2025-07-24 17:48:19.759 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:48:19.759 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:19.760 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:48:19.760 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:48:19.760 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.0066ms
2025-07-24 17:48:21.600 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:48:21.601 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:21.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5679ms
2025-07-24 17:48:21.603 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 17:48:21.603 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:21.604 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:21.604 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:48:21.608 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:48:22.440 +05:30 [INF] User logged in: test@patient.com
2025-07-24 17:48:22.440 +05:30 [INF] Role: Patient
2025-07-24 17:48:22.440 +05:30 [INF] Role: Patient
2025-07-24 17:48:22.440 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 17:48:22.446 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:48:22.447 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:48:22.447 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 842.6472ms
2025-07-24 17:48:22.448 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:22.448 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 844.3818 ms
2025-07-24 17:48:22.448 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 845.541ms
2025-07-24 17:48:22.452 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 17:48:22.453 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:22.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.5242ms
2025-07-24 17:48:22.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 17:48:22.455 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:22.455 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:22.456 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:48:22.456 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:48:22.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:48:22.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:48:22.461 +05:30 [INF] Found 1 users among search
2025-07-24 17:48:22.462 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:22.462 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.067ms
2025-07-24 17:48:22.462 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:22.463 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.2774 ms
2025-07-24 17:48:22.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 8.2548ms
2025-07-24 17:48:22.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 17:48:22.473 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:22.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5484ms
2025-07-24 17:48:22.475 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 17:48:22.476 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:22.476 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:22.477 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 17:48:22.477 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 17:48:22.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 17:48:22.481 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:48:22.482 +05:30 [INF] Found 0 patients matching search
2025-07-24 17:48:22.483 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:22.483 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 6.5761ms
2025-07-24 17:48:22.484 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:22.484 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 7.4370 ms
2025-07-24 17:48:22.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 8.5032ms
2025-07-24 17:48:25.213 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:48:25.213 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:25.214 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:48:25.215 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:48:25.215 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.2348ms
2025-07-24 17:48:48.915 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - null null
2025-07-24 17:48:48.916 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:48.916 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - 204 null null 1.492ms
2025-07-24 17:48:48.919 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/register - application/json 92
2025-07-24 17:48:48.919 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:48.920 +05:30 [INF] Executing endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:48:48.920 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:48:48.939 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__req_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__req_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-24 17:48:49.981 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 20), @p8='?' (Size = 50), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserID], [CreatedAt], [Email], [ModifiedAt], [PasswordHash], [RefreshToken], [RefreshTokenExpiry], [Role], [Username], [isActive])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-07-24 17:48:49.982 +05:30 [INF] User registered: test@doctor.com
2025-07-24 17:48:49.982 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:48:49.982 +05:30 [INF] Executed action AuthController.Register (HealthcareApi) in 1062.1187ms
2025-07-24 17:48:49.982 +05:30 [INF] Executed endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:48:49.983 +05:30 [INF] HTTP POST /api/auth/register responded 200 in 1063.1644 ms
2025-07-24 17:48:49.983 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/register - 200 43 application/json; charset=utf-8 1064.1227ms
2025-07-24 17:48:58.365 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:48:58.365 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:58.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8606ms
2025-07-24 17:48:58.367 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 17:48:58.368 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:58.369 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:58.369 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:48:58.374 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:48:59.286 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 17:48:59.286 +05:30 [INF] Role: Doctor
2025-07-24 17:48:59.286 +05:30 [INF] Role: Doctor
2025-07-24 17:48:59.286 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 17:48:59.296 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:48:59.296 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:48:59.297 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 927.715ms
2025-07-24 17:48:59.297 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:48:59.297 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 928.7065 ms
2025-07-24 17:48:59.297 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 930.0359ms
2025-07-24 17:48:59.301 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 17:48:59.302 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:59.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 1.1454ms
2025-07-24 17:48:59.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 17:48:59.304 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:59.305 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:59.305 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:48:59.306 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:48:59.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:48:59.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:48:59.311 +05:30 [INF] Found 1 users among search
2025-07-24 17:48:59.311 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:59.312 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.4173ms
2025-07-24 17:48:59.312 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:48:59.312 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.5559 ms
2025-07-24 17:48:59.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 8.4497ms
2025-07-24 17:48:59.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 17:48:59.356 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:59.357 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 1.0326ms
2025-07-24 17:48:59.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 17:48:59.360 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:48:59.360 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:48:59.360 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 17:48:59.378 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 17:48:59.380 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 17:48:59.380 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 17:48:59.394 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:48:59.394 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:48:59.395 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 34.0777ms
2025-07-24 17:48:59.395 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 17:48:59.395 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 35.1486 ms
2025-07-24 17:48:59.395 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 36.8884ms
2025-07-24 17:49:03.805 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 17:49:03.806 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:03.807 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 17:49:03.807 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 17:49:03.808 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.4761ms
2025-07-24 17:49:25.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - null null
2025-07-24 17:49:25.777 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:25.777 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/register - 204 null null 0.564ms
2025-07-24 17:49:25.779 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/register - application/json 88
2025-07-24 17:49:25.780 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:25.780 +05:30 [INF] Executing endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:49:25.780 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:49:25.782 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__req_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__req_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-24 17:49:26.600 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 20), @p8='?' (Size = 50), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserID], [CreatedAt], [Email], [ModifiedAt], [PasswordHash], [RefreshToken], [RefreshTokenExpiry], [Role], [Username], [isActive])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-07-24 17:49:26.601 +05:30 [INF] User registered: test@admin.com
2025-07-24 17:49:26.602 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:49:26.602 +05:30 [INF] Executed action AuthController.Register (HealthcareApi) in 821.7679ms
2025-07-24 17:49:26.604 +05:30 [INF] Executed endpoint 'AuthController.Register (HealthcareApi)'
2025-07-24 17:49:26.604 +05:30 [INF] HTTP POST /api/auth/register responded 200 in 824.0239 ms
2025-07-24 17:49:26.604 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/register - 200 43 application/json; charset=utf-8 825.1714ms
2025-07-24 17:49:33.349 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 17:49:33.349 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:33.349 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4337ms
2025-07-24 17:49:33.351 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 49
2025-07-24 17:49:33.351 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:33.351 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:49:33.352 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 17:49:33.373 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 17:49:34.183 +05:30 [INF] User logged in: test@admin.com
2025-07-24 17:49:34.183 +05:30 [INF] Role: Admin
2025-07-24 17:49:34.183 +05:30 [INF] Role: Admin
2025-07-24 17:49:34.183 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 17:49:34.190 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 17:49:34.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 17:49:34.191 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 839.3613ms
2025-07-24 17:49:34.191 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 17:49:34.192 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 840.3652 ms
2025-07-24 17:49:34.192 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 612 application/json; charset=utf-8 841.123ms
2025-07-24 17:49:34.195 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - null null
2025-07-24 17:49:34.195 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:34.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - 204 null null 0.8499ms
2025-07-24 17:49:34.197 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - null null
2025-07-24 17:49:34.197 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:34.198 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:49:34.198 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:49:34.199 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Admin"],"Role":null,"Email":["test@admin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:49:34.201 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 17:49:34.203 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 17:49:34.204 +05:30 [INF] Found 1 users among search
2025-07-24 17:49:34.205 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:49:34.206 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.565ms
2025-07-24 17:49:34.206 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:49:34.207 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.9036 ms
2025-07-24 17:49:34.207 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - 200 514 application/json; charset=utf-8 9.8487ms
2025-07-24 17:49:34.246 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=221360 - null null
2025-07-24 17:49:34.247 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:34.247 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=221360 - 204 null null 0.6514ms
2025-07-24 17:49:34.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=221360 - null null
2025-07-24 17:49:34.248 +05:30 [INF] CORS policy execution successful.
2025-07-24 17:49:34.249 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:49:34.249 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 17:49:34.249 +05:30 [INF] Searching users with params {"UID":[221360],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 17:49:34.252 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 17:49:34.256 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 17:49:34.257 +05:30 [INF] Found 1 users among search
2025-07-24 17:49:34.257 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 17:49:34.258 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.3754ms
2025-07-24 17:49:34.258 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 17:49:34.258 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.1478 ms
2025-07-24 17:49:34.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=221360 - 200 514 application/json; charset=utf-8 9.9482ms
2025-07-24 18:03:18.155 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 18:03:18.155 +05:30 [INF] CORS policy execution successful.
2025-07-24 18:03:18.156 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 18:03:18.156 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 18:03:18.156 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7799ms
2025-07-24 19:35:27.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:35:27.872 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:27.872 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9511ms
2025-07-24 19:35:27.874 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:35:27.874 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:27.874 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:35:27.875 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:35:27.903 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:35:28.482 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:35:28.482 +05:30 [INF] Role: Doctor
2025-07-24 19:35:28.482 +05:30 [INF] Role: Doctor
2025-07-24 19:35:28.482 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:35:28.490 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:35:28.490 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:35:28.491 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 615.9377ms
2025-07-24 19:35:28.491 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:35:28.491 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 616.6211 ms
2025-07-24 19:35:28.491 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 617.2192ms
2025-07-24 19:35:28.495 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:35:28.495 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:28.496 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 1.144ms
2025-07-24 19:35:28.498 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:35:28.498 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:28.499 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:35:28.499 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:35:28.499 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:35:28.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:35:28.504 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:35:28.504 +05:30 [INF] Found 1 users among search
2025-07-24 19:35:28.505 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:35:28.505 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.9786ms
2025-07-24 19:35:28.505 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:35:28.506 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3221 ms
2025-07-24 19:35:28.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 8.2903ms
2025-07-24 19:35:28.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:35:28.526 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:28.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.9877ms
2025-07-24 19:35:28.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:35:28.528 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:28.529 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:35:28.529 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:35:28.538 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:35:28.542 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:35:28.543 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:35:28.543 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 13.125ms
2025-07-24 19:35:28.543 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:35:28.543 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 14.5687 ms
2025-07-24 19:35:28.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 15.4595ms
2025-07-24 19:35:34.882 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 19:35:34.882 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:34.883 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 19:35:34.884 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 19:35:34.884 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7586ms
2025-07-24 19:35:48.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:35:48.353 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.354 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3934ms
2025-07-24 19:35:48.355 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:35:48.355 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.355 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:35:48.355 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:35:48.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:35:48.902 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:35:48.902 +05:30 [INF] Role: Doctor
2025-07-24 19:35:48.902 +05:30 [INF] Role: Doctor
2025-07-24 19:35:48.902 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:35:48.908 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:35:48.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:35:48.908 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 553.012ms
2025-07-24 19:35:48.908 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:35:48.908 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 553.6090 ms
2025-07-24 19:35:48.909 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 554.0777ms
2025-07-24 19:35:48.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:35:48.913 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.913 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5985ms
2025-07-24 19:35:48.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:35:48.915 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.916 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:35:48.916 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:35:48.916 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:35:48.918 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:35:48.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:35:48.920 +05:30 [INF] Found 1 users among search
2025-07-24 19:35:48.920 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:35:48.921 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 4.9526ms
2025-07-24 19:35:48.921 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:35:48.921 +05:30 [INF] HTTP GET /api/user/search responded 200 in 5.6541 ms
2025-07-24 19:35:48.922 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 6.552ms
2025-07-24 19:35:48.929 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:35:48.929 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.7001ms
2025-07-24 19:35:48.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:35:48.932 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:48.932 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:35:48.933 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:35:48.936 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:35:48.937 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:35:48.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:35:48.938 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 4.2669ms
2025-07-24 19:35:48.938 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:35:48.938 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 5.9570 ms
2025-07-24 19:35:48.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 6.868ms
2025-07-24 19:35:51.697 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 19:35:51.697 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:35:51.698 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 19:35:51.698 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 19:35:51.698 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.8146ms
2025-07-24 19:36:29.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:36:29.517 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:29.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8344ms
2025-07-24 19:36:29.519 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:36:29.520 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:29.520 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:36:29.521 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:36:29.544 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:36:30.677 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:36:30.677 +05:30 [INF] Role: Doctor
2025-07-24 19:36:30.678 +05:30 [INF] Role: Doctor
2025-07-24 19:36:30.678 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:36:30.687 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:36:30.687 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:36:30.688 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1167.0044ms
2025-07-24 19:36:30.688 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:36:30.689 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1168.9066 ms
2025-07-24 19:36:30.689 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 1169.724ms
2025-07-24 19:36:30.693 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:36:30.693 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:30.694 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.6053ms
2025-07-24 19:36:30.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:36:30.697 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:30.697 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:36:30.697 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:36:30.698 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:36:30.700 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:36:30.702 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:36:30.703 +05:30 [INF] Found 1 users among search
2025-07-24 19:36:30.704 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:36:30.704 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.9079ms
2025-07-24 19:36:30.706 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:36:30.706 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.8372 ms
2025-07-24 19:36:30.706 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 9.8612ms
2025-07-24 19:36:30.731 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:36:30.732 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:30.732 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.6324ms
2025-07-24 19:36:30.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:36:30.734 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:36:30.734 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:36:30.734 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:36:30.745 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:36:30.752 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:36:30.752 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:36:30.753 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 18.0273ms
2025-07-24 19:36:30.753 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:36:30.753 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 18.8965 ms
2025-07-24 19:36:30.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 19.7999ms
2025-07-24 19:37:56.204 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 19:37:56.204 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:56.205 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 19:37:56.205 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 19:37:56.206 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6831ms
2025-07-24 19:37:57.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:37:57.248 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3752ms
2025-07-24 19:37:57.251 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:37:57.251 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.251 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:37:57.251 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:37:57.270 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:37:57.815 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:37:57.815 +05:30 [INF] Role: Doctor
2025-07-24 19:37:57.815 +05:30 [INF] Role: Doctor
2025-07-24 19:37:57.815 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:37:57.819 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:37:57.819 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:37:57.819 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 567.9507ms
2025-07-24 19:37:57.819 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:37:57.820 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 568.4812 ms
2025-07-24 19:37:57.820 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 569.0594ms
2025-07-24 19:37:57.823 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:37:57.823 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.599ms
2025-07-24 19:37:57.825 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:37:57.825 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.826 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:37:57.826 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:37:57.827 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:37:57.829 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:37:57.831 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:37:57.832 +05:30 [INF] Found 1 users among search
2025-07-24 19:37:57.833 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:37:57.834 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.7624ms
2025-07-24 19:37:57.834 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:37:57.835 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.1767 ms
2025-07-24 19:37:57.835 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 10.0599ms
2025-07-24 19:37:57.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:37:57.840 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.840 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 1.6947ms
2025-07-24 19:37:57.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:37:57.842 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:37:57.843 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:37:57.843 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:37:57.851 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:37:57.857 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:37:57.857 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:37:57.857 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 14.2653ms
2025-07-24 19:37:57.857 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:37:57.858 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 14.9061 ms
2025-07-24 19:37:57.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 15.5983ms
2025-07-24 19:38:09.855 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 19:38:09.855 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:09.856 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 19:38:09.857 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 19:38:09.857 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0301ms
2025-07-24 19:38:10.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:38:10.759 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:10.760 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4352ms
2025-07-24 19:38:10.762 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:38:10.762 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:10.762 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:38:10.762 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:38:10.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:38:11.310 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:38:11.310 +05:30 [INF] Role: Doctor
2025-07-24 19:38:11.310 +05:30 [INF] Role: Doctor
2025-07-24 19:38:11.310 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:38:11.316 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:38:11.316 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:38:11.316 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 554.0524ms
2025-07-24 19:38:11.317 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:38:11.317 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 554.8463 ms
2025-07-24 19:38:11.317 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 555.4839ms
2025-07-24 19:38:11.320 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:38:11.320 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:11.320 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5163ms
2025-07-24 19:38:11.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:38:11.322 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:11.323 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:38:11.323 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:38:11.324 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:38:11.325 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:38:11.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:38:11.328 +05:30 [INF] Found 1 users among search
2025-07-24 19:38:11.328 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:38:11.329 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.2853ms
2025-07-24 19:38:11.329 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:38:11.329 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.2312 ms
2025-07-24 19:38:11.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 7.0533ms
2025-07-24 19:38:11.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:38:11.334 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:11.334 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.456ms
2025-07-24 19:38:11.336 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:38:11.336 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:38:11.336 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:38:11.337 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:38:11.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:38:11.341 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:38:11.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:38:11.341 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 4.661ms
2025-07-24 19:38:11.342 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:38:11.343 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 6.3221 ms
2025-07-24 19:38:11.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 7.0657ms
2025-07-24 19:50:26.455 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 19:50:26.456 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:26.457 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 19:50:26.458 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 19:50:26.459 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 3.7863ms
2025-07-24 19:50:27.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 19:50:27.734 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:27.734 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4938ms
2025-07-24 19:50:27.735 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 19:50:27.736 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:27.736 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:50:27.736 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 19:50:27.765 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 19:50:28.335 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 19:50:28.335 +05:30 [INF] Role: Doctor
2025-07-24 19:50:28.335 +05:30 [INF] Role: Doctor
2025-07-24 19:50:28.335 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 19:50:28.343 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 19:50:28.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 19:50:28.344 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 607.4309ms
2025-07-24 19:50:28.344 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 19:50:28.344 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 608.4419 ms
2025-07-24 19:50:28.344 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 609.0304ms
2025-07-24 19:50:28.365 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:50:28.365 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:28.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.8882ms
2025-07-24 19:50:28.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 19:50:28.403 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:28.403 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:50:28.404 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 19:50:28.404 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 19:50:28.406 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 19:50:28.408 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 19:50:28.408 +05:30 [INF] Found 1 users among search
2025-07-24 19:50:28.408 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:50:28.409 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 4.9084ms
2025-07-24 19:50:28.409 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 19:50:28.409 +05:30 [INF] HTTP GET /api/user/search responded 200 in 5.6782 ms
2025-07-24 19:50:28.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 6.5679ms
2025-07-24 19:50:28.416 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:50:28.417 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:28.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 1.7888ms
2025-07-24 19:50:28.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 19:50:28.421 +05:30 [INF] CORS policy execution successful.
2025-07-24 19:50:28.422 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:50:28.422 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 19:50:28.429 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 19:50:28.434 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 19:50:28.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 19:50:28.434 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 12.1765ms
2025-07-24 19:50:28.434 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 19:50:28.434 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 12.7006 ms
2025-07-24 19:50:28.434 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 13.471ms
2025-07-24 20:13:26.122 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:13:26.123 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:26.124 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:13:26.124 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:13:26.124 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.365ms
2025-07-24 20:13:27.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:13:27.329 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.330 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.3404ms
2025-07-24 20:13:27.332 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 20:13:27.332 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.333 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:13:27.333 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:13:27.355 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:13:27.899 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 20:13:27.899 +05:30 [INF] Role: Doctor
2025-07-24 20:13:27.899 +05:30 [INF] Role: Doctor
2025-07-24 20:13:27.900 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 20:13:27.907 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:13:27.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:13:27.908 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 575.238ms
2025-07-24 20:13:27.908 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:13:27.908 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 575.9227 ms
2025-07-24 20:13:27.909 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 576.5164ms
2025-07-24 20:13:27.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:13:27.912 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5718ms
2025-07-24 20:13:27.914 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:13:27.914 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.915 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:13:27.915 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:13:27.915 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:13:27.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:13:27.920 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:13:27.921 +05:30 [INF] Found 1 users among search
2025-07-24 20:13:27.921 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:13:27.921 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.2176ms
2025-07-24 20:13:27.922 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:13:27.922 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.1996 ms
2025-07-24 20:13:27.924 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 516 application/json; charset=utf-8 10.1093ms
2025-07-24 20:13:27.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:13:27.929 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.9859ms
2025-07-24 20:13:27.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:13:27.932 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:13:27.933 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:13:27.933 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:13:27.941 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 20:13:27.947 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:13:27.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:13:27.948 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 14.6262ms
2025-07-24 20:13:27.948 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:13:27.948 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 15.3315 ms
2025-07-24 20:13:27.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 16.4736ms
2025-07-24 20:14:11.587 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:14:11.588 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:11.588 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:14:11.589 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:14:11.589 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4792ms
2025-07-24 20:14:17.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:14:17.715 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:17.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.6659ms
2025-07-24 20:14:17.718 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:14:17.718 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:17.718 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:14:17.719 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:14:17.735 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:14:18.281 +05:30 [INF] User logged in: test@patient.com
2025-07-24 20:14:18.281 +05:30 [INF] Role: Patient
2025-07-24 20:14:18.282 +05:30 [INF] Role: Patient
2025-07-24 20:14:18.282 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 20:14:18.288 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:14:18.289 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:14:18.289 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 570.4929ms
2025-07-24 20:14:18.289 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:14:18.289 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 571.0293 ms
2025-07-24 20:14:18.290 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 571.8866ms
2025-07-24 20:14:18.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:14:18.293 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:18.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.6901ms
2025-07-24 20:14:18.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:14:18.296 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:18.296 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:18.296 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:14:18.296 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:14:18.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:14:18.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:14:18.302 +05:30 [INF] Found 1 users among search
2025-07-24 20:14:18.303 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:14:18.303 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6337ms
2025-07-24 20:14:18.303 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:18.303 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.4779 ms
2025-07-24 20:14:18.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 519 application/json; charset=utf-8 8.5004ms
2025-07-24 20:14:18.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:14:18.310 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:18.310 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5959ms
2025-07-24 20:14:18.313 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:14:18.313 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:18.314 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:18.314 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 20:14:18.316 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 20:14:18.326 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 20:14:18.331 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:14:18.332 +05:30 [INF] Found 0 patients matching search
2025-07-24 20:14:18.332 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:14:18.333 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 17.5504ms
2025-07-24 20:14:18.333 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:18.334 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 19.9891 ms
2025-07-24 20:14:18.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 21.0395ms
2025-07-24 20:14:20.514 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:14:20.514 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:20.515 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:14:20.516 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:14:20.516 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.166ms
2025-07-24 20:14:24.873 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:14:24.873 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:24.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4439ms
2025-07-24 20:14:24.875 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 49
2025-07-24 20:14:24.875 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:24.875 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:14:24.876 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:14:24.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:14:25.414 +05:30 [INF] User logged in: test@admin.com
2025-07-24 20:14:25.414 +05:30 [INF] Role: Admin
2025-07-24 20:14:25.414 +05:30 [INF] Role: Admin
2025-07-24 20:14:25.414 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:14:25.420 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:14:25.420 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:14:25.420 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 544.6679ms
2025-07-24 20:14:25.421 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:14:25.421 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 545.1936 ms
2025-07-24 20:14:25.421 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 612 application/json; charset=utf-8 545.7376ms
2025-07-24 20:14:25.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - null null
2025-07-24 20:14:25.424 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:25.425 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - 204 null null 0.6869ms
2025-07-24 20:14:25.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - null null
2025-07-24 20:14:25.426 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:25.427 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:25.427 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:14:25.427 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Admin"],"Role":null,"Email":["test@admin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:14:25.429 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:14:25.433 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:14:25.434 +05:30 [INF] Found 1 users among search
2025-07-24 20:14:25.435 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:14:25.435 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 8.0407ms
2025-07-24 20:14:25.436 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:25.436 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.2181 ms
2025-07-24 20:14:25.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Admin&email=test@admin.com - 200 514 application/json; charset=utf-8 10.2364ms
2025-07-24 20:14:25.440 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=221360 - null null
2025-07-24 20:14:25.441 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:25.441 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=221360 - 204 null null 0.5047ms
2025-07-24 20:14:25.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=221360 - null null
2025-07-24 20:14:25.443 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:14:25.444 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:25.444 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:14:25.445 +05:30 [INF] Searching users with params {"UID":[221360],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:14:25.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:14:25.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:14:25.448 +05:30 [INF] Found 1 users among search
2025-07-24 20:14:25.449 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:14:25.449 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 4.8575ms
2025-07-24 20:14:25.449 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:14:25.449 +05:30 [INF] HTTP GET /api/user/search responded 200 in 5.5565 ms
2025-07-24 20:14:25.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=221360 - 200 514 application/json; charset=utf-8 6.5918ms
2025-07-24 20:16:01.436 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:16:01.436 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:01.436 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:16:01.437 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:16:01.437 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.5979ms
2025-07-24 20:16:07.177 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:16:07.177 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:07.177 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7018ms
2025-07-24 20:16:07.179 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:16:07.179 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:07.179 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:16:07.180 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:16:07.192 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:16:08.316 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:16:08.316 +05:30 [INF] Role: Admin
2025-07-24 20:16:08.317 +05:30 [INF] Role: Admin
2025-07-24 20:16:08.317 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:16:08.325 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:16:08.326 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:16:08.326 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1146.1718ms
2025-07-24 20:16:08.326 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:16:08.326 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1147.0417 ms
2025-07-24 20:16:08.327 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1147.8443ms
2025-07-24 20:16:08.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:16:08.330 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:08.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6529ms
2025-07-24 20:16:08.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:16:08.333 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:08.333 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:16:08.333 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:16:08.334 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:16:08.336 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:16:08.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:16:08.339 +05:30 [INF] Found 1 users among search
2025-07-24 20:16:08.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:16:08.340 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.4221ms
2025-07-24 20:16:08.342 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:16:08.342 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.2622 ms
2025-07-24 20:16:08.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 10.1987ms
2025-07-24 20:16:08.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:16:08.351 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:08.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.9439ms
2025-07-24 20:16:08.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:16:08.355 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:16:08.356 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:16:08.356 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:16:08.357 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:16:08.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:16:08.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:16:08.362 +05:30 [INF] Found 1 users among search
2025-07-24 20:16:08.362 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:16:08.363 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.8007ms
2025-07-24 20:16:08.363 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:16:08.364 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.0859 ms
2025-07-24 20:16:08.364 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 9.1874ms
2025-07-24 20:17:43.777 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:17:43.778 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:43.778 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:17:43.779 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:17:43.779 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.7309ms
2025-07-24 20:17:44.818 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:17:44.819 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:44.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4178ms
2025-07-24 20:17:44.820 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:17:44.820 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:44.821 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:17:44.821 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:17:44.833 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:17:45.385 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:17:45.385 +05:30 [INF] Role: Admin
2025-07-24 20:17:45.385 +05:30 [INF] Role: Admin
2025-07-24 20:17:45.385 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:17:45.423 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:17:45.424 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:17:45.424 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 603.1196ms
2025-07-24 20:17:45.424 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:17:45.425 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 604.0163 ms
2025-07-24 20:17:45.425 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 604.6202ms
2025-07-24 20:17:45.428 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:17:45.429 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:45.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.763ms
2025-07-24 20:17:45.432 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:17:45.432 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:45.432 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:17:45.433 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:17:45.433 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:17:45.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:17:45.452 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:17:45.453 +05:30 [INF] Found 1 users among search
2025-07-24 20:17:45.453 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:17:45.454 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 20.9636ms
2025-07-24 20:17:45.454 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:17:45.454 +05:30 [INF] HTTP GET /api/user/search responded 200 in 21.9978 ms
2025-07-24 20:17:45.455 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 23.0307ms
2025-07-24 20:17:45.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:17:45.458 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:45.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.4103ms
2025-07-24 20:17:45.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:17:45.461 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:17:45.461 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:17:45.461 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:17:45.461 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:17:45.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:17:45.466 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:17:45.466 +05:30 [INF] Found 1 users among search
2025-07-24 20:17:45.466 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:17:45.466 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.086ms
2025-07-24 20:17:45.466 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:17:45.466 +05:30 [INF] HTTP GET /api/user/search responded 200 in 5.6405 ms
2025-07-24 20:17:45.467 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 6.3618ms
2025-07-24 20:23:13.873 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:23:13.874 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:13.874 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:23:13.874 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:23:13.875 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1302ms
2025-07-24 20:23:15.154 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:23:15.154 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3672ms
2025-07-24 20:23:15.156 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:23:15.156 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.156 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:23:15.157 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:23:15.175 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:23:15.719 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:23:15.720 +05:30 [INF] Role: Admin
2025-07-24 20:23:15.720 +05:30 [INF] Role: Admin
2025-07-24 20:23:15.720 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:23:15.727 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:23:15.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:23:15.728 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 571.4292ms
2025-07-24 20:23:15.728 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:23:15.728 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 571.9474 ms
2025-07-24 20:23:15.729 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 572.6083ms
2025-07-24 20:23:15.732 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:23:15.733 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8534ms
2025-07-24 20:23:15.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:23:15.736 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.736 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:23:15.736 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:23:15.737 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:23:15.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:23:15.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:23:15.742 +05:30 [INF] Found 1 users among search
2025-07-24 20:23:15.742 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:23:15.743 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.1647ms
2025-07-24 20:23:15.743 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:23:15.743 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.1344 ms
2025-07-24 20:23:15.743 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.0359ms
2025-07-24 20:23:15.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:23:15.751 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.751 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.537ms
2025-07-24 20:23:15.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:23:15.753 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:23:15.754 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:23:15.754 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:23:15.755 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:23:15.756 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:23:15.758 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:23:15.759 +05:30 [INF] Found 1 users among search
2025-07-24 20:23:15.759 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:23:15.760 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.3554ms
2025-07-24 20:23:15.760 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:23:15.760 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.5422 ms
2025-07-24 20:23:15.761 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.6436ms
2025-07-24 20:30:56.732 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:30:56.732 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:56.733 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:30:56.733 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:30:56.735 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.9671ms
2025-07-24 20:30:57.856 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:30:57.856 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:57.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.5265ms
2025-07-24 20:30:57.858 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:30:57.858 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:57.858 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:30:57.858 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:30:57.890 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:30:58.993 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:30:58.994 +05:30 [INF] Role: Admin
2025-07-24 20:30:58.994 +05:30 [INF] Role: Admin
2025-07-24 20:30:58.994 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:30:59.001 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:30:59.002 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:30:59.003 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1144.3712ms
2025-07-24 20:30:59.003 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:30:59.003 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1145.1386 ms
2025-07-24 20:30:59.004 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 1145.895ms
2025-07-24 20:30:59.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:30:59.009 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:59.009 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.737ms
2025-07-24 20:30:59.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:30:59.012 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:59.012 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:30:59.012 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:30:59.013 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:30:59.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:30:59.018 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:30:59.019 +05:30 [INF] Found 1 users among search
2025-07-24 20:30:59.019 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:30:59.020 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3622ms
2025-07-24 20:30:59.020 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:30:59.020 +05:30 [INF] HTTP GET /api/user/search responded 200 in 8.1911 ms
2025-07-24 20:30:59.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 9.1557ms
2025-07-24 20:30:59.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:30:59.026 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:59.026 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.5974ms
2025-07-24 20:30:59.028 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:30:59.029 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:30:59.029 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:30:59.029 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:30:59.030 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:30:59.032 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:30:59.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:30:59.034 +05:30 [INF] Found 1 users among search
2025-07-24 20:30:59.035 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:30:59.038 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.8535ms
2025-07-24 20:30:59.038 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:30:59.039 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.4990 ms
2025-07-24 20:30:59.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 10.8159ms
2025-07-24 20:34:43.263 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:34:43.263 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:43.264 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:34:43.264 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:34:43.264 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4418ms
2025-07-24 20:34:44.609 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:34:44.609 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:44.609 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4663ms
2025-07-24 20:34:44.611 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:34:44.611 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:44.611 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:34:44.612 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:34:44.627 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:34:45.413 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:34:45.413 +05:30 [INF] Role: Admin
2025-07-24 20:34:45.414 +05:30 [INF] Role: Admin
2025-07-24 20:34:45.414 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:34:45.423 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:34:45.424 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:34:45.425 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 813.175ms
2025-07-24 20:34:45.425 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:34:45.425 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 814.2431 ms
2025-07-24 20:34:45.426 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 814.9221ms
2025-07-24 20:34:45.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:34:45.430 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:45.430 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.8425ms
2025-07-24 20:34:45.432 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:34:45.432 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:45.433 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:34:45.433 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:34:45.433 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:34:45.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:34:45.439 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:34:45.439 +05:30 [INF] Found 1 users among search
2025-07-24 20:34:45.439 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:34:45.439 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.3771ms
2025-07-24 20:34:45.440 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:34:45.440 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3874 ms
2025-07-24 20:34:45.440 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.371ms
2025-07-24 20:34:45.446 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:34:45.446 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:45.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.6085ms
2025-07-24 20:34:45.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:34:45.449 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:34:45.450 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:34:45.450 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:34:45.450 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:34:45.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:34:45.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:34:45.455 +05:30 [INF] Found 1 users among search
2025-07-24 20:34:45.456 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:34:45.457 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6864ms
2025-07-24 20:34:45.457 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:34:45.457 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.7849 ms
2025-07-24 20:34:45.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.9496ms
2025-07-24 20:38:09.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user - null null
2025-07-24 20:38:09.648 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '18-07-2025 11:21:45', Current time (UTC): '24-07-2025 15:08:09'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-24 20:38:09.650 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '18-07-2025 11:21:45', Current time (UTC): '24-07-2025 15:08:09'.
2025-07-24 20:38:09.654 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-24 20:38:09.655 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:38:09.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user - 401 0 null 7.9936ms
2025-07-24 20:38:18.025 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 62
2025-07-24 20:38:18.026 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:38:18.026 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:38:18.045 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:38:18.952 +05:30 [INF] User logged in: ptester@gmail.com
2025-07-24 20:38:18.953 +05:30 [INF] Role: Patient
2025-07-24 20:38:18.953 +05:30 [INF] Role: Patient
2025-07-24 20:38:18.953 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 20:38:18.960 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:38:18.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:38:18.961 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 934.9757ms
2025-07-24 20:38:18.961 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:38:18.961 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 935.8177 ms
2025-07-24 20:38:18.962 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 621 application/json; charset=utf-8 936.495ms
2025-07-24 20:38:27.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user - null null
2025-07-24 20:38:27.534 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-24 20:38:27.542 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-24 20:38:27.542 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user - 403 0 null 8.7818ms
2025-07-24 20:38:34.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search - null null
2025-07-24 20:38:34.827 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:38:34.827 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:38:34.827 +05:30 [INF] Searching users with params {"UID":null,"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:38:34.838 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-07-24 20:38:34.839 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 20:38:34.839 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-24 20:38:34.848 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-24 20:38:34.848 +05:30 [INF] Found 24 users among search
2025-07-24 20:38:34.849 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:38:34.852 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 24.4492ms
2025-07-24 20:38:34.852 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:38:34.852 +05:30 [INF] HTTP GET /api/user/search responded 200 in 25.7271 ms
2025-07-24 20:38:34.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search - 200 2988 application/json; charset=utf-8 26.4226ms
2025-07-24 20:40:33.307 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:40:33.307 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:33.307 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:40:33.307 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:40:33.307 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.864ms
2025-07-24 20:40:34.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:40:34.332 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.444ms
2025-07-24 20:40:34.335 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:40:34.335 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.335 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:40:34.335 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:40:34.347 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:40:34.890 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:40:34.895 +05:30 [INF] Role: Admin
2025-07-24 20:40:34.896 +05:30 [INF] Role: Admin
2025-07-24 20:40:34.896 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:40:34.899 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:40:34.899 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:40:34.899 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 563.9319ms
2025-07-24 20:40:34.900 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:40:34.900 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 564.5492 ms
2025-07-24 20:40:34.900 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 565.1544ms
2025-07-24 20:40:34.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:40:34.904 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.904 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4426ms
2025-07-24 20:40:34.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:40:34.907 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.907 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:40:34.908 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:40:34.908 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:40:34.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:40:34.913 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:40:34.914 +05:30 [INF] Found 1 users among search
2025-07-24 20:40:34.914 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:40:34.915 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.6934ms
2025-07-24 20:40:34.915 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:40:34.915 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.9007 ms
2025-07-24 20:40:34.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 9.2726ms
2025-07-24 20:40:34.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:40:34.921 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.921 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.529ms
2025-07-24 20:40:34.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:40:34.925 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:34.925 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:40:34.925 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:40:34.926 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:40:34.928 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:40:34.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:40:34.931 +05:30 [INF] Found 1 users among search
2025-07-24 20:40:34.932 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:40:34.932 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.7448ms
2025-07-24 20:40:34.932 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:40:34.933 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.5362 ms
2025-07-24 20:40:34.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.3732ms
2025-07-24 20:40:57.156 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:40:57.156 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:40:57.157 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:40:57.157 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:40:57.157 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.774ms
2025-07-24 20:41:03.034 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:41:03.034 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.035 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3462ms
2025-07-24 20:41:03.036 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 20:41:03.036 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.037 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:41:03.037 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:41:03.042 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:41:03.613 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 20:41:03.614 +05:30 [INF] Role: Doctor
2025-07-24 20:41:03.614 +05:30 [INF] Role: Doctor
2025-07-24 20:41:03.614 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 20:41:03.623 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:41:03.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:41:03.624 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 586.6272ms
2025-07-24 20:41:03.624 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:41:03.624 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 587.9978 ms
2025-07-24 20:41:03.625 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 588.954ms
2025-07-24 20:41:03.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:41:03.627 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.3812ms
2025-07-24 20:41:03.629 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:41:03.630 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.630 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:41:03.630 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:41:03.631 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:41:03.633 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:41:03.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:41:03.636 +05:30 [INF] Found 1 users among search
2025-07-24 20:41:03.636 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:41:03.637 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.1206ms
2025-07-24 20:41:03.637 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:41:03.637 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.1061 ms
2025-07-24 20:41:03.638 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 8.1302ms
2025-07-24 20:41:03.641 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:41:03.642 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.642 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.6059ms
2025-07-24 20:41:03.644 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:41:03.644 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:41:03.645 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:41:03.645 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:41:03.654 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 20:41:03.659 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:41:03.660 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:41:03.660 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 15.0691ms
2025-07-24 20:41:03.660 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:41:03.660 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 15.7843 ms
2025-07-24 20:41:03.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 16.5023ms
2025-07-24 20:42:16.786 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:42:16.786 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:16.787 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:42:16.787 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:42:16.787 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4321ms
2025-07-24 20:42:17.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:42:17.759 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:17.759 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4017ms
2025-07-24 20:42:17.760 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 20:42:17.761 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:17.761 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:42:17.761 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:42:17.767 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:42:18.333 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 20:42:18.334 +05:30 [INF] Role: Doctor
2025-07-24 20:42:18.334 +05:30 [INF] Role: Doctor
2025-07-24 20:42:18.335 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 20:42:18.342 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:42:18.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:42:18.342 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 581.2759ms
2025-07-24 20:42:18.343 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:42:18.343 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 582.0627 ms
2025-07-24 20:42:18.343 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 582.7837ms
2025-07-24 20:42:18.346 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:42:18.346 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:18.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5922ms
2025-07-24 20:42:18.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:42:18.350 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:18.351 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:42:18.351 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:42:18.352 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:42:18.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:42:18.356 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:42:18.356 +05:30 [INF] Found 1 users among search
2025-07-24 20:42:18.357 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:42:18.357 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.6131ms
2025-07-24 20:42:18.357 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:42:18.358 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.4532 ms
2025-07-24 20:42:18.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 8.9074ms
2025-07-24 20:42:18.362 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:42:18.363 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:18.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.5553ms
2025-07-24 20:42:18.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:42:18.366 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:18.366 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:42:18.366 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:42:18.374 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 20:42:18.379 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:42:18.380 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:42:18.380 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 13.6816ms
2025-07-24 20:42:18.380 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:42:18.380 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 14.3276 ms
2025-07-24 20:42:18.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 14.9888ms
2025-07-24 20:42:57.078 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:42:57.079 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:57.079 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:42:57.079 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:42:57.080 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.3719ms
2025-07-24 20:42:58.175 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:42:58.176 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:58.176 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4754ms
2025-07-24 20:42:58.178 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 20:42:58.178 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:58.178 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:42:58.178 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:42:58.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:42:59.101 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 20:42:59.101 +05:30 [INF] Role: Doctor
2025-07-24 20:42:59.102 +05:30 [INF] Role: Doctor
2025-07-24 20:42:59.102 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 20:42:59.108 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:42:59.109 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:42:59.109 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 930.7402ms
2025-07-24 20:42:59.110 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:42:59.110 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 931.7981 ms
2025-07-24 20:42:59.110 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 932.3279ms
2025-07-24 20:42:59.113 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:42:59.114 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:59.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.6497ms
2025-07-24 20:42:59.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:42:59.116 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:59.117 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:42:59.117 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:42:59.118 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:42:59.122 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:42:59.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:42:59.127 +05:30 [INF] Found 1 users among search
2025-07-24 20:42:59.128 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:42:59.128 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 10.7727ms
2025-07-24 20:42:59.129 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:42:59.129 +05:30 [INF] HTTP GET /api/user/search responded 200 in 12.1605 ms
2025-07-24 20:42:59.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 13.4108ms
2025-07-24 20:42:59.136 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:42:59.137 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:59.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 1.0676ms
2025-07-24 20:42:59.140 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:42:59.140 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:42:59.141 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:42:59.141 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:42:59.143 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 20:42:59.145 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:42:59.146 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:42:59.146 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 4.7859ms
2025-07-24 20:42:59.146 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:42:59.147 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 5.9342 ms
2025-07-24 20:42:59.147 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 6.8445ms
2025-07-24 20:43:03.188 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:43:03.188 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:03.188 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:43:03.189 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:43:03.189 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.2767ms
2025-07-24 20:43:07.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:43:07.727 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:07.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 1.0569ms
2025-07-24 20:43:07.729 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:43:07.729 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:07.730 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:43:07.730 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:43:07.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:43:08.647 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:43:08.648 +05:30 [INF] Role: Admin
2025-07-24 20:43:08.648 +05:30 [INF] Role: Admin
2025-07-24 20:43:08.648 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:43:08.653 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:43:08.654 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:43:08.655 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 924.6531ms
2025-07-24 20:43:08.655 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:43:08.655 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 925.4660 ms
2025-07-24 20:43:08.655 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 926.5628ms
2025-07-24 20:43:08.659 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:43:08.659 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:08.659 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.5854ms
2025-07-24 20:43:08.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:43:08.662 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:08.662 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:08.662 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:43:08.663 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:43:08.670 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:43:08.677 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:43:08.677 +05:30 [INF] Found 1 users among search
2025-07-24 20:43:08.678 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:43:08.678 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 15.7182ms
2025-07-24 20:43:08.679 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:08.680 +05:30 [INF] HTTP GET /api/user/search responded 200 in 17.4793 ms
2025-07-24 20:43:08.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 18.7714ms
2025-07-24 20:43:08.687 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:43:08.688 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:08.688 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 0.9712ms
2025-07-24 20:43:08.691 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:43:08.691 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:08.692 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:08.692 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:43:08.693 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:43:08.695 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:43:08.698 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:43:08.698 +05:30 [INF] Found 1 users among search
2025-07-24 20:43:08.699 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:43:08.699 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.5568ms
2025-07-24 20:43:08.699 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:08.699 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.5897 ms
2025-07-24 20:43:08.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 8.866ms
2025-07-24 20:43:11.442 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:43:11.443 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:11.443 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:43:11.444 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:43:11.444 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 2.0004ms
2025-07-24 20:43:43.898 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:43:43.898 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:43.899 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.3859ms
2025-07-24 20:43:43.900 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:43:43.900 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:43.901 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:43:43.901 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:43:43.917 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:43:44.462 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:43:44.462 +05:30 [INF] Role: Admin
2025-07-24 20:43:44.463 +05:30 [INF] Role: Admin
2025-07-24 20:43:44.463 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:43:44.466 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:43:44.467 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:43:44.467 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 565.7539ms
2025-07-24 20:43:44.467 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:43:44.467 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 566.4169 ms
2025-07-24 20:43:44.467 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 567.5974ms
2025-07-24 20:43:44.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:43:44.470 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:44.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.4986ms
2025-07-24 20:43:44.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:43:44.472 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:44.473 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:44.473 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:43:44.474 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:43:44.476 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:43:44.479 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:43:44.479 +05:30 [INF] Found 1 users among search
2025-07-24 20:43:44.480 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:43:44.480 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.7036ms
2025-07-24 20:43:44.480 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:44.480 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.4591 ms
2025-07-24 20:43:44.481 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.4932ms
2025-07-24 20:43:44.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:43:44.494 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:44.494 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 2.5956ms
2025-07-24 20:43:44.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:43:44.496 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:43:44.497 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:44.497 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:43:44.498 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:43:44.500 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:43:44.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:43:44.502 +05:30 [INF] Found 1 users among search
2025-07-24 20:43:44.503 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:43:44.503 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.6497ms
2025-07-24 20:43:44.503 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:43:44.503 +05:30 [INF] HTTP GET /api/user/search responded 200 in 6.4894 ms
2025-07-24 20:43:44.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.4766ms
2025-07-24 20:56:12.325 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:56:12.326 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:12.326 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:56:12.327 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:56:12.327 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6991ms
2025-07-24 20:56:13.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:56:13.427 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:13.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.7779ms
2025-07-24 20:56:13.429 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:56:13.429 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:13.430 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:56:13.431 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:56:13.454 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:56:14.371 +05:30 [INF] User logged in: ruby@raishin.com
2025-07-24 20:56:14.371 +05:30 [INF] Role: Admin
2025-07-24 20:56:14.371 +05:30 [INF] Role: Admin
2025-07-24 20:56:14.371 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Admin
2025-07-24 20:56:14.380 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:56:14.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:56:14.381 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 949.6223ms
2025-07-24 20:56:14.381 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:56:14.381 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 951.4556 ms
2025-07-24 20:56:14.382 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 610 application/json; charset=utf-8 952.7205ms
2025-07-24 20:56:14.385 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:56:14.385 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:14.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 204 null null 0.6982ms
2025-07-24 20:56:14.387 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - null null
2025-07-24 20:56:14.388 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:14.388 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:56:14.389 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:56:14.389 +05:30 [INF] Searching users with params {"UID":null,"Username":["Ruby"],"Role":null,"Email":["ruby@raishin.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:56:14.391 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:56:14.394 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:56:14.394 +05:30 [INF] Found 1 users among search
2025-07-24 20:56:14.394 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:56:14.395 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.9114ms
2025-07-24 20:56:14.395 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:56:14.396 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3549 ms
2025-07-24 20:56:14.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Ruby&email=ruby@raishin.com - 200 509 application/json; charset=utf-8 8.522ms
2025-07-24 20:56:14.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:56:14.404 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:14.405 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?uid=21982 - 204 null null 1.0093ms
2025-07-24 20:56:14.407 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - null null
2025-07-24 20:56:14.407 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:14.408 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:56:14.408 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:56:14.409 +05:30 [INF] Searching users with params {"UID":[21982],"Username":null,"Role":null,"Email":null,"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:56:14.410 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
2025-07-24 20:56:14.413 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[UserID] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:56:14.413 +05:30 [INF] Found 1 users among search
2025-07-24 20:56:14.414 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:56:14.414 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 5.8058ms
2025-07-24 20:56:14.414 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:56:14.414 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.0181 ms
2025-07-24 20:56:14.415 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?uid=21982 - 200 509 application/json; charset=utf-8 7.919ms
2025-07-24 20:56:19.061 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 20:56:19.063 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:19.064 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 20:56:19.064 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:56:19.073 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 20:56:19.073 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:56:19.074 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 9.1759ms
2025-07-24 20:56:19.074 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 20:56:19.074 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 10.3336 ms
2025-07-24 20:56:19.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 12.7222ms
2025-07-24 20:56:24.553 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - null null
2025-07-24 20:56:24.554 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:24.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/proc - 204 null null 0.5984ms
2025-07-24 20:56:24.556 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/proc - null null
2025-07-24 20:56:24.556 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:56:24.556 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 20:56:24.557 +05:30 [INF] Route matched with {action = "UpcomingAppointments", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpcomingAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 20:56:24.560 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@PatientID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.usp_PatientUpcomingAppointmentsGet 
                        @PatientID = @PatientID, 
                        @StatusFilter = @StatusFilter
2025-07-24 20:56:24.561 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.UpcomingAppointmentDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:56:24.561 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi) in 4.4933ms
2025-07-24 20:56:24.561 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.UpcomingAppointments (HealthcareApi)'
2025-07-24 20:56:24.562 +05:30 [INF] HTTP GET /api/patient/proc responded 200 in 5.4105 ms
2025-07-24 20:56:24.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/proc - 200 950 application/json; charset=utf-8 6.2443ms
2025-07-24 20:57:17.122 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:57:17.122 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:17.122 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:57:17.123 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:57:17.123 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.4756ms
2025-07-24 20:57:20.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:57:20.901 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:20.901 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.8877ms
2025-07-24 20:57:20.903 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 20:57:20.903 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:20.904 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:57:20.904 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:57:20.915 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:57:21.898 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 20:57:21.899 +05:30 [INF] Role: Doctor
2025-07-24 20:57:21.899 +05:30 [INF] Role: Doctor
2025-07-24 20:57:21.899 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 20:57:21.907 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:57:21.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:57:21.908 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1003.4047ms
2025-07-24 20:57:21.909 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:57:21.909 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1005.0820 ms
2025-07-24 20:57:21.909 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 1006.3157ms
2025-07-24 20:57:21.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:57:21.913 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:21.913 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.5992ms
2025-07-24 20:57:21.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 20:57:21.916 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:21.916 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:57:21.917 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:57:21.918 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:57:21.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:57:21.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:57:21.924 +05:30 [INF] Found 1 users among search
2025-07-24 20:57:21.924 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:57:21.925 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.7664ms
2025-07-24 20:57:21.926 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:57:21.926 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.8282 ms
2025-07-24 20:57:21.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 517 application/json; charset=utf-8 11.0733ms
2025-07-24 20:57:21.929 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:57:21.929 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:21.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 0.6243ms
2025-07-24 20:57:21.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 20:57:21.933 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:57:21.933 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:57:21.934 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 20:57:21.941 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 20:57:21.946 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:57:21.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:57:21.948 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 13.333ms
2025-07-24 20:57:21.948 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 20:57:21.948 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 14.6583 ms
2025-07-24 20:57:21.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 15.8035ms
2025-07-24 20:59:15.418 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:59:15.419 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:15.419 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:59:15.419 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:59:15.419 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 0.9317ms
2025-07-24 20:59:19.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:59:19.756 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:19.757 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.9974ms
2025-07-24 20:59:19.759 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:59:19.759 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:19.759 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:59:19.760 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:59:19.772 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:59:20.758 +05:30 [INF] User logged in: test@patient.com
2025-07-24 20:59:20.759 +05:30 [INF] Role: Patient
2025-07-24 20:59:20.759 +05:30 [INF] Role: Patient
2025-07-24 20:59:20.759 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 20:59:20.766 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:59:20.766 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:59:20.766 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 1006.2499ms
2025-07-24 20:59:20.766 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:59:20.767 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 1007.3359 ms
2025-07-24 20:59:20.767 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 1008.308ms
2025-07-24 20:59:20.769 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:59:20.770 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:20.770 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.7207ms
2025-07-24 20:59:20.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:59:20.772 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:20.772 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:20.773 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:59:20.773 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:59:20.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:59:20.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:59:20.780 +05:30 [INF] Found 1 users among search
2025-07-24 20:59:20.780 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:59:20.780 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 7.3406ms
2025-07-24 20:59:20.781 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:20.782 +05:30 [INF] HTTP GET /api/user/search responded 200 in 9.6169 ms
2025-07-24 20:59:20.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 10.5228ms
2025-07-24 20:59:20.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:59:20.790 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:20.790 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 0.5963ms
2025-07-24 20:59:20.792 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:59:20.793 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:20.794 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:20.794 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 20:59:20.795 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 20:59:20.802 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 20:59:20.808 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:59:20.808 +05:30 [INF] Found 0 patients matching search
2025-07-24 20:59:20.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:59:20.809 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 14.1923ms
2025-07-24 20:59:20.809 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:20.810 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 16.0397 ms
2025-07-24 20:59:20.810 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 17.7457ms
2025-07-24 20:59:46.695 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:59:46.695 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:46.696 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:59:46.696 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:59:46.696 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.1273ms
2025-07-24 20:59:47.953 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 20:59:47.953 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:47.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4824ms
2025-07-24 20:59:47.955 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 53
2025-07-24 20:59:47.955 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:47.955 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:59:47.956 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 20:59:47.960 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 20:59:48.502 +05:30 [INF] User logged in: test@patient.com
2025-07-24 20:59:48.502 +05:30 [INF] Role: Patient
2025-07-24 20:59:48.502 +05:30 [INF] Role: Patient
2025-07-24 20:59:48.502 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Patient
2025-07-24 20:59:48.507 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 20:59:48.507 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 20:59:48.507 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 551.6356ms
2025-07-24 20:59:48.507 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 20:59:48.508 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 552.1213 ms
2025-07-24 20:59:48.508 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 624 application/json; charset=utf-8 552.9866ms
2025-07-24 20:59:48.512 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:59:48.512 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:48.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 204 null null 0.596ms
2025-07-24 20:59:48.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - null null
2025-07-24 20:59:48.514 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:48.515 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:48.515 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 20:59:48.515 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Patient"],"Role":null,"Email":["test@patient.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 20:59:48.517 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 20:59:48.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 20:59:48.521 +05:30 [INF] Found 1 users among search
2025-07-24 20:59:48.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:59:48.521 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 6.0949ms
2025-07-24 20:59:48.522 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:48.522 +05:30 [INF] HTTP GET /api/user/search responded 200 in 7.3140 ms
2025-07-24 20:59:48.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Patient&email=test@patient.com - 200 520 application/json; charset=utf-8 8.1727ms
2025-07-24 20:59:48.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:59:48.528 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:48.529 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/patient/search?uid=786102 - 204 null null 2.0181ms
2025-07-24 20:59:48.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - null null
2025-07-24 20:59:48.531 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:48.532 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:48.532 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.Patient]]] GetWithParams(HealthcareApi.Models.PatientQueryParams) on controller HealthcareApi.Controllers.PatientController (HealthcareApi).
2025-07-24 20:59:48.532 +05:30 [INF] Searching patients with params {"PID":null,"UID":[786102],"FirstName":null,"LastName":null,"Dob":null,"Phone":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"PatientQueryParams"}
2025-07-24 20:59:48.539 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
2025-07-24 20:59:48.543 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientID], [p].[Address], [p].[Allergies], [p].[ContactNumber], [p].[CreatedAt], [p].[CurrentMedications], [p].[DateOfBirth], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[MedicalHistory], [p].[ModifiedAt], [p].[UserID], [p].[isActive]
FROM [Patients] AS [p]
WHERE [p].[isActive] = CAST(1 AS bit) AND [p].[UserID] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_UID_0) WITH ([value] int '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 20:59:48.543 +05:30 [INF] Found 0 patients matching search
2025-07-24 20:59:48.543 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Patient, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 20:59:48.543 +05:30 [INF] Executed action HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi) in 11.32ms
2025-07-24 20:59:48.543 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.PatientController.GetWithParams (HealthcareApi)'
2025-07-24 20:59:48.543 +05:30 [INF] HTTP GET /api/patient/search responded 200 in 11.8153 ms
2025-07-24 20:59:48.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/patient/search?uid=786102 - 200 70 application/json; charset=utf-8 12.4158ms
2025-07-24 20:59:58.676 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/logout - null 0
2025-07-24 20:59:58.677 +05:30 [INF] CORS policy execution successful.
2025-07-24 20:59:58.677 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-24 20:59:58.677 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 20:59:58.678 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/logout - 401 0 null 1.6054ms
2025-07-24 21:00:03.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - null null
2025-07-24 21:00:03.631 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:03.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/auth/login - 204 null null 0.4451ms
2025-07-24 21:00:03.633 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5122/api/auth/login - application/json 51
2025-07-24 21:00:03.633 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:03.634 +05:30 [INF] Executing endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 21:00:03.634 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller AuthController (HealthcareApi).
2025-07-24 21:00:03.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE LOWER(LTRIM(RTRIM([u].[Email]))) = @__normalizedEmail_0
2025-07-24 21:00:04.536 +05:30 [INF] User logged in: test@doctor.com
2025-07-24 21:00:04.537 +05:30 [INF] Role: Doctor
2025-07-24 21:00:04.537 +05:30 [INF] Role: Doctor
2025-07-24 21:00:04.538 +05:30 [INF] claims of token: http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Doctor
2025-07-24 21:00:04.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ModifiedAt] = @p0, [RefreshToken] = @p1, [RefreshTokenExpiry] = @p2
OUTPUT 1
WHERE [UserID] = @p3;
2025-07-24 21:00:04.541 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 21:00:04.542 +05:30 [INF] Executed action AuthController.Login (HealthcareApi) in 907.5485ms
2025-07-24 21:00:04.542 +05:30 [INF] Executed endpoint 'AuthController.Login (HealthcareApi)'
2025-07-24 21:00:04.543 +05:30 [INF] HTTP POST /api/auth/login responded 200 in 908.9457 ms
2025-07-24 21:00:04.543 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5122/api/auth/login - 200 618 application/json; charset=utf-8 909.913ms
2025-07-24 21:00:04.546 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 21:00:04.546 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:04.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 204 null null 0.6149ms
2025-07-24 21:00:04.548 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - null null
2025-07-24 21:00:04.549 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:04.553 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 21:00:04.554 +05:30 [INF] Route matched with {action = "GetWithParams", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PagedResult`1[HealthcareApi.Models.User]]] GetWithParams(HealthcareApi.Models.UserQueryParams) on controller HealthcareApi.Controllers.UserController (HealthcareApi).
2025-07-24 21:00:04.570 +05:30 [INF] Searching users with params {"UID":null,"Username":["Test Doctor"],"Role":null,"Email":["test@doctor.com"],"CreatedAt":null,"ModifiedAt":null,"isActive":null,"Sort":null,"Order":null,"pageNumber":1,"pageSize":10,"$type":"UserQueryParams"}
2025-07-24 21:00:04.576 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
2025-07-24 21:00:04.586 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__param_Username_0='?' (Size = 4000), @__param_Email_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[ModifiedAt], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[Role], [u].[Username], [u].[isActive]
FROM [Users] AS [u]
WHERE [u].[Username] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__param_Username_0) WITH ([value] nvarchar(50) '$') AS [p]
) AND [u].[Email] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__param_Email_1) WITH ([value] nvarchar(100) '$') AS [p0]
)
ORDER BY (SELECT 1)
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-07-24 21:00:04.589 +05:30 [INF] Found 1 users among search
2025-07-24 21:00:04.590 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.User, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:00:04.590 +05:30 [INF] Executed action HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi) in 35.494ms
2025-07-24 21:00:04.590 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.UserController.GetWithParams (HealthcareApi)'
2025-07-24 21:00:04.590 +05:30 [INF] HTTP GET /api/user/search responded 200 in 37.2405 ms
2025-07-24 21:00:04.591 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/user/search?username=Test%20Doctor&email=test@doctor.com - 200 516 application/json; charset=utf-8 42.271ms
2025-07-24 21:00:04.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 21:00:04.607 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:04.607 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5122/api/doctor/search?uid=629896 - 204 null null 1.1508ms
2025-07-24 21:00:04.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - null null
2025-07-24 21:00:04.615 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:04.615 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 21:00:04.615 +05:30 [INF] Route matched with {action = "Search", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HealthcareApi.Models.DoctorQueryParams) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 21:00:04.624 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__qp_UID_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
2025-07-24 21:00:04.636 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__qp_UID_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorID], [d].[ContactNumber], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[LastName], [d].[ModifiedAt], [d].[Schedule], [d].[Specialization], [d].[UserID], [d].[isActive]
FROM [Doctors] AS [d]
WHERE [d].[isActive] = CAST(1 AS bit) AND [d].[UserID] IN (
    SELECT [q].[value]
    FROM OPENJSON(@__qp_UID_0) WITH ([value] int '$') AS [q]
)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-24 21:00:04.636 +05:30 [INF] Executing OkObjectResult, writing value of type 'PagedResult`1[[HealthcareApi.Models.Doctor, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:00:04.636 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.Search (HealthcareApi) in 20.7551ms
2025-07-24 21:00:04.636 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.Search (HealthcareApi)'
2025-07-24 21:00:04.637 +05:30 [INF] HTTP GET /api/doctor/search responded 200 in 21.5928 ms
2025-07-24 21:00:04.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/search?uid=629896 - 200 70 application/json; charset=utf-8 22.7492ms
2025-07-24 21:00:10.178 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 21:00:10.179 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:00:10.180 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:00:10.180 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 21:00:10.183 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 21:00:10.183 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:00:10.184 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 3.0956ms
2025-07-24 21:00:10.184 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:00:10.184 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 4.4183 ms
2025-07-24 21:00:10.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 5.8409ms
2025-07-24 21:01:58.529 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 21:01:58.530 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:01:58.530 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:01:58.530 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 21:01:58.534 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 21:01:58.534 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:01:58.535 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 4.4953ms
2025-07-24 21:01:58.535 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:01:58.535 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 5.4203 ms
2025-07-24 21:01:58.536 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 6.2434ms
2025-07-24 21:01:59.706 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 21:01:59.706 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:01:59.706 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:01:59.707 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 21:01:59.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 21:01:59.709 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:01:59.710 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 2.9519ms
2025-07-24 21:01:59.710 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:01:59.710 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 3.9871 ms
2025-07-24 21:01:59.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 4.774ms
2025-07-24 21:02:03.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - null null
2025-07-24 21:02:03.256 +05:30 [INF] CORS policy execution successful.
2025-07-24 21:02:03.256 +05:30 [INF] Executing endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:02:03.256 +05:30 [INF] Route matched with {action = "PresentAppointments", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PresentAppointments(System.Nullable`1[System.Int32], System.String) on controller HealthcareApi.Controllers.DoctorController (HealthcareApi).
2025-07-24 21:02:03.258 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@DoctorID='?', @StatusFilter='?'], CommandType='"Text"', CommandTimeout='30']

                    EXEC dbo.GetTodayAppointDoctor 
                        @DoctorID = @DoctorID, 
                        @StatusFilter = @StatusFilter
2025-07-24 21:02:03.259 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HealthcareApi.Models.CurrentAppointmentsDTO, HealthcareApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 21:02:03.259 +05:30 [INF] Executed action HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi) in 2.8499ms
2025-07-24 21:02:03.259 +05:30 [INF] Executed endpoint 'HealthcareApi.Controllers.DoctorController.PresentAppointments (HealthcareApi)'
2025-07-24 21:02:03.259 +05:30 [INF] HTTP GET /api/doctor/proc responded 200 in 3.4769 ms
2025-07-24 21:02:03.260 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5122/api/doctor/proc?doctorId=NaN - 200 2 application/json; charset=utf-8 4.1759ms
